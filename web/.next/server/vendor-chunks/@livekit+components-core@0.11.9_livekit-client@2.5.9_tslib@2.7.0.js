"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit+components-core@0.11.9_livekit-client@2.5.9_tslib@2.7.0";
exports.ids = ["vendor-chunks/@livekit+components-core@0.11.9_livekit-client@2.5.9_tslib@2.7.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-core@0.11.9_livekit-client@2.5.9_tslib@2.7.0/node_modules/@livekit/components-core/dist/index.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-core@0.11.9_livekit-client@2.5.9_tslib@2.7.0/node_modules/@livekit/components-core/dist/index.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataTopic: () => (/* binding */ DataTopic),\n/* harmony export */   GRID_LAYOUTS: () => (/* binding */ GRID_LAYOUTS),\n/* harmony export */   PIN_DEFAULT_STATE: () => (/* binding */ PIN_DEFAULT_STATE),\n/* harmony export */   WIDGET_DEFAULT_STATE: () => (/* binding */ WIDGET_DEFAULT_STATE),\n/* harmony export */   activeSpeakerObserver: () => (/* binding */ activeSpeakerObserver),\n/* harmony export */   addMediaTimestampToTranscription: () => (/* binding */ addMediaTimestampToTranscription),\n/* harmony export */   allParticipantEvents: () => (/* binding */ allParticipantEvents),\n/* harmony export */   allParticipantRoomEvents: () => (/* binding */ allParticipantRoomEvents),\n/* harmony export */   allRemoteParticipantEvents: () => (/* binding */ allRemoteParticipantEvents),\n/* harmony export */   allRemoteParticipantRoomEvents: () => (/* binding */ allRemoteParticipantRoomEvents),\n/* harmony export */   attachIfSubscribed: () => (/* binding */ attachIfSubscribed),\n/* harmony export */   computeMenuPosition: () => (/* binding */ computeMenuPosition),\n/* harmony export */   connectedParticipantObserver: () => (/* binding */ connectedParticipantObserver),\n/* harmony export */   connectedParticipantsObserver: () => (/* binding */ connectedParticipantsObserver),\n/* harmony export */   connectionStateObserver: () => (/* binding */ connectionStateObserver),\n/* harmony export */   createActiveDeviceObservable: () => (/* binding */ createActiveDeviceObservable),\n/* harmony export */   createChatObserver: () => (/* binding */ createChatObserver),\n/* harmony export */   createConnectionQualityObserver: () => (/* binding */ createConnectionQualityObserver),\n/* harmony export */   createDataObserver: () => (/* binding */ createDataObserver),\n/* harmony export */   createDefaultGrammar: () => (/* binding */ createDefaultGrammar),\n/* harmony export */   createEmailRegExp: () => (/* binding */ createEmailRegExp),\n/* harmony export */   createInteractingObservable: () => (/* binding */ createInteractingObservable),\n/* harmony export */   createIsSpeakingObserver: () => (/* binding */ createIsSpeakingObserver),\n/* harmony export */   createMediaDeviceObserver: () => (/* binding */ createMediaDeviceObserver),\n/* harmony export */   createTrackObserver: () => (/* binding */ createTrackObserver),\n/* harmony export */   createUrlRegExp: () => (/* binding */ createUrlRegExp),\n/* harmony export */   cssPrefix: () => (/* binding */ cssPrefix),\n/* harmony export */   dedupeSegments: () => (/* binding */ dedupeSegments),\n/* harmony export */   defaultUserChoices: () => (/* binding */ defaultUserChoices),\n/* harmony export */   didActiveSegmentsChange: () => (/* binding */ didActiveSegmentsChange),\n/* harmony export */   encryptionStatusObservable: () => (/* binding */ encryptionStatusObservable),\n/* harmony export */   getActiveTranscriptionSegments: () => (/* binding */ getActiveTranscriptionSegments),\n/* harmony export */   getScrollBarWidth: () => (/* binding */ getScrollBarWidth),\n/* harmony export */   getTrackByIdentifier: () => (/* binding */ getTrackByIdentifier),\n/* harmony export */   getTrackReferenceId: () => (/* binding */ getTrackReferenceId),\n/* harmony export */   getTrackReferenceSource: () => (/* binding */ getTrackReferenceSource),\n/* harmony export */   isEqualTrackRef: () => (/* binding */ isEqualTrackRef),\n/* harmony export */   isLocal: () => (/* binding */ isLocal),\n/* harmony export */   isMobileBrowser: () => (/* binding */ isMobileBrowser),\n/* harmony export */   isParticipantTrackReferencePinned: () => (/* binding */ isParticipantTrackReferencePinned),\n/* harmony export */   isPlaceholderReplacement: () => (/* binding */ isPlaceholderReplacement),\n/* harmony export */   isRemote: () => (/* binding */ isRemote),\n/* harmony export */   isSourceWitOptions: () => (/* binding */ isSourceWitOptions),\n/* harmony export */   isSourcesWithOptions: () => (/* binding */ isSourcesWithOptions),\n/* harmony export */   isTrackReference: () => (/* binding */ isTrackReference),\n/* harmony export */   isTrackReferencePinned: () => (/* binding */ isTrackReferencePinned),\n/* harmony export */   isTrackReferencePlaceholder: () => (/* binding */ isTrackReferencePlaceholder),\n/* harmony export */   isWeb: () => (/* binding */ isWeb),\n/* harmony export */   loadUserChoices: () => (/* binding */ loadUserChoices),\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   mutedObserver: () => (/* binding */ mutedObserver),\n/* harmony export */   observeParticipantEvents: () => (/* binding */ observeParticipantEvents),\n/* harmony export */   observeParticipantMedia: () => (/* binding */ observeParticipantMedia),\n/* harmony export */   observeRoomEvents: () => (/* binding */ observeRoomEvents),\n/* harmony export */   observeTrackEvents: () => (/* binding */ observeTrackEvents),\n/* harmony export */   participantAttributesObserver: () => (/* binding */ participantAttributesObserver),\n/* harmony export */   participantByIdentifierObserver: () => (/* binding */ participantByIdentifierObserver),\n/* harmony export */   participantEventSelector: () => (/* binding */ participantEventSelector),\n/* harmony export */   participantInfoObserver: () => (/* binding */ participantInfoObserver),\n/* harmony export */   participantPermissionObserver: () => (/* binding */ participantPermissionObserver),\n/* harmony export */   participantTrackEvents: () => (/* binding */ participantTrackEvents),\n/* harmony export */   participantTracksObservable: () => (/* binding */ participantTracksObservable),\n/* harmony export */   recordingStatusObservable: () => (/* binding */ recordingStatusObservable),\n/* harmony export */   roomAudioPlaybackAllowedObservable: () => (/* binding */ roomAudioPlaybackAllowedObservable),\n/* harmony export */   roomEventSelector: () => (/* binding */ roomEventSelector),\n/* harmony export */   roomInfoObserver: () => (/* binding */ roomInfoObserver),\n/* harmony export */   roomObserver: () => (/* binding */ roomObserver),\n/* harmony export */   roomVideoPlaybackAllowedObservable: () => (/* binding */ roomVideoPlaybackAllowedObservable),\n/* harmony export */   saveUserChoices: () => (/* binding */ saveUserChoices),\n/* harmony export */   screenShareObserver: () => (/* binding */ screenShareObserver),\n/* harmony export */   selectGridLayout: () => (/* binding */ selectGridLayout),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage),\n/* harmony export */   setDifference: () => (/* binding */ setDifference),\n/* harmony export */   setLogExtension: () => (/* binding */ setLogExtension),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setupChat: () => (/* binding */ setupChat),\n/* harmony export */   setupChatMessageHandler: () => (/* binding */ setupChatMessageHandler),\n/* harmony export */   setupChatToggle: () => (/* binding */ setupChatToggle),\n/* harmony export */   setupClearPinButton: () => (/* binding */ setupClearPinButton),\n/* harmony export */   setupConnectionQualityIndicator: () => (/* binding */ setupConnectionQualityIndicator),\n/* harmony export */   setupDataMessageHandler: () => (/* binding */ setupDataMessageHandler),\n/* harmony export */   setupDeviceSelector: () => (/* binding */ setupDeviceSelector),\n/* harmony export */   setupDisconnectButton: () => (/* binding */ setupDisconnectButton),\n/* harmony export */   setupFocusToggle: () => (/* binding */ setupFocusToggle),\n/* harmony export */   setupLiveKitRoom: () => (/* binding */ setupLiveKitRoom),\n/* harmony export */   setupManualToggle: () => (/* binding */ setupManualToggle),\n/* harmony export */   setupMediaToggle: () => (/* binding */ setupMediaToggle),\n/* harmony export */   setupMediaTrack: () => (/* binding */ setupMediaTrack),\n/* harmony export */   setupParticipantName: () => (/* binding */ setupParticipantName),\n/* harmony export */   setupParticipantTile: () => (/* binding */ setupParticipantTile),\n/* harmony export */   setupStartAudio: () => (/* binding */ setupStartAudio),\n/* harmony export */   setupStartVideo: () => (/* binding */ setupStartVideo),\n/* harmony export */   setupTrackMutedIndicator: () => (/* binding */ setupTrackMutedIndicator),\n/* harmony export */   sortParticipants: () => (/* binding */ sortParticipants),\n/* harmony export */   sortTrackReferences: () => (/* binding */ sortTrackReferences),\n/* harmony export */   supportsScreenSharing: () => (/* binding */ supportsScreenSharing),\n/* harmony export */   tokenize: () => (/* binding */ tokenize),\n/* harmony export */   trackEventSelector: () => (/* binding */ trackEventSelector),\n/* harmony export */   trackObservable: () => (/* binding */ trackObservable),\n/* harmony export */   trackReferencesObservable: () => (/* binding */ trackReferencesObservable),\n/* harmony export */   trackSyncTimeObserver: () => (/* binding */ trackSyncTimeObserver),\n/* harmony export */   trackTranscriptionObserver: () => (/* binding */ trackTranscriptionObserver),\n/* harmony export */   updatePages: () => (/* binding */ updatePages),\n/* harmony export */   wasClickOutside: () => (/* binding */ wasClickOutside)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.9/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @floating-ui/dom */ \"(ssr)/./node_modules/.pnpm/@floating-ui+dom@1.6.11/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! loglevel */ \"(ssr)/./node_modules/.pnpm/loglevel@1.9.1/node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Subject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/finalize.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/filter.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/timeout.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/skipUntil.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/constants.ts\nvar cssPrefix = \"lk\";\n\n// src/utils.ts\n\n\n// src/track-reference/track-reference.types.ts\nfunction isTrackReference(trackReference) {\n  if (typeof trackReference === \"undefined\") {\n    return false;\n  }\n  return isTrackReferenceSubscribed(trackReference) || isTrackReferencePublished(trackReference);\n}\nfunction isTrackReferenceSubscribed(trackReference) {\n  var _a;\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"track\") && typeof ((_a = trackReference.publication) == null ? void 0 : _a.track) !== \"undefined\";\n}\nfunction isTrackReferencePublished(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"publication\") && typeof trackReference.publication !== \"undefined\";\n}\nfunction isTrackReferencePlaceholder(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && typeof trackReference.publication === \"undefined\";\n}\n\n// src/track-reference/track-reference.utils.ts\nfunction getTrackReferenceId(trackReference) {\n  if (typeof trackReference === \"string\" || typeof trackReference === \"number\") {\n    return `${trackReference}`;\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.source}_placeholder`;\n  } else if (isTrackReference(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.publication.source}_${trackReference.publication.trackSid}`;\n  } else {\n    throw new Error(`Can't generate a id for the given track reference: ${trackReference}`);\n  }\n}\nfunction getTrackReferenceSource(trackReference) {\n  if (isTrackReference(trackReference)) {\n    return trackReference.publication.source;\n  } else {\n    return trackReference.source;\n  }\n}\nfunction isEqualTrackRef(a, b) {\n  if (a === void 0 || b === void 0) {\n    return false;\n  }\n  if (isTrackReference(a) && isTrackReference(b)) {\n    return a.publication.trackSid === b.publication.trackSid;\n  } else {\n    return getTrackReferenceId(a) === getTrackReferenceId(b);\n  }\n}\nfunction isTrackReferencePinned(trackReference, pinState) {\n  if (typeof pinState === \"undefined\") {\n    return false;\n  }\n  if (isTrackReference(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReference(pinnedTrackReference) && pinnedTrackReference.publication.trackSid === trackReference.publication.trackSid\n    );\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReferencePlaceholder(pinnedTrackReference) && pinnedTrackReference.source === trackReference.source\n    );\n  } else {\n    return false;\n  }\n}\nfunction isPlaceholderReplacement(currentTrackRef, nextTrackRef) {\n  return isTrackReferencePlaceholder(currentTrackRef) && isTrackReference(nextTrackRef) && nextTrackRef.participant.identity === currentTrackRef.participant.identity && nextTrackRef.source === currentTrackRef.source;\n}\n\n// src/utils.ts\nfunction isLocal(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant;\n}\nfunction isRemote(p) {\n  return p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.RemoteParticipant;\n}\nvar attachIfSubscribed = (publication, element) => {\n  if (!publication) return;\n  const { isSubscribed, track } = publication;\n  if (element && track) {\n    if (isSubscribed) {\n      track.attach(element);\n    } else {\n      track.detach(element);\n    }\n  }\n};\nfunction isParticipantTrackReferencePinned(trackRef, pinState) {\n  if (pinState === void 0) {\n    return false;\n  }\n  return pinState.some((pinnedTrackRef) => isEqualTrackRef(pinnedTrackRef, trackRef));\n}\nfunction getScrollBarWidth() {\n  const inner = document.createElement(\"p\");\n  inner.style.width = \"100%\";\n  inner.style.height = \"200px\";\n  const outer = document.createElement(\"div\");\n  outer.style.position = \"absolute\";\n  outer.style.top = \"0px\";\n  outer.style.left = \"0px\";\n  outer.style.visibility = \"hidden\";\n  outer.style.width = \"200px\";\n  outer.style.height = \"150px\";\n  outer.style.overflow = \"hidden\";\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = \"scroll\";\n  let w2 = inner.offsetWidth;\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n  document.body.removeChild(outer);\n  const scrollBarWidth = w1 - w2;\n  return scrollBarWidth;\n}\n\n// src/helper/detectMobileBrowser.ts\nfunction isWeb() {\n  return typeof document !== \"undefined\";\n}\nfunction isMobileBrowser() {\n  return isWeb() ? /Mobi/i.test(window.navigator.userAgent) : false;\n}\n\n// src/helper/url-regex.ts\nfunction createUrlRegExp(options) {\n  options = __spreadValues({}, options);\n  const protocol = `(?:(?:[a-z]+:)?//)?`;\n  const auth = \"(?:\\\\S+(?::\\\\S*)?@)?\";\n  const ip = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source;\n  const host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  const domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  const tld = `(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?`;\n  const port = \"(?::\\\\d{2,5})?\";\n  const path = '(?:[/?#][^\\\\s\"]*)?';\n  const regex2 = `(?:${protocol}|www\\\\.)${auth}(?:localhost|${ip}|${host}${domain}${tld})${port}${path}`;\n  return options.exact ? new RegExp(`(?:^${regex2}$)`, \"i\") : new RegExp(regex2, \"ig\");\n}\n\n// src/helper/emailRegex.ts\nvar regex = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction createEmailRegExp({ exact } = {}) {\n  return exact ? new RegExp(`^${regex}$`) : new RegExp(regex, \"g\");\n}\n\n// src/helper/floating-menu.ts\n\nfunction computeMenuPosition(button, menu) {\n  return __async(this, null, function* () {\n    const { x, y } = yield (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.computePosition)(button, menu, {\n      placement: \"top\",\n      middleware: [(0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.offset)(6), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.flip)(), (0,_floating_ui_dom__WEBPACK_IMPORTED_MODULE_1__.shift)({ padding: 5 })]\n    });\n    return { x, y };\n  });\n}\nfunction wasClickOutside(insideElement, event) {\n  const isOutside = !insideElement.contains(event.target);\n  return isOutside;\n}\n\n// src/helper/tokenizer.ts\nvar createDefaultGrammar = () => {\n  return {\n    email: createEmailRegExp(),\n    url: createUrlRegExp({})\n  };\n};\nfunction tokenize(input, grammar) {\n  const matches = Object.entries(grammar).map(\n    ([type, rx], weight) => Array.from(input.matchAll(rx)).map(({ index, 0: content }) => ({\n      type,\n      weight,\n      content,\n      index: index != null ? index : 0\n    }))\n  ).flat().sort((a, b) => {\n    const d = a.index - b.index;\n    return d !== 0 ? d : a.weight - b.weight;\n  }).filter(({ index }, i, arr) => {\n    if (i === 0) return true;\n    const prev = arr[i - 1];\n    return prev.index + prev.content.length <= index;\n  });\n  const tokens = [];\n  let pos = 0;\n  for (const { type, content, index } of matches) {\n    if (index > pos) tokens.push(input.substring(pos, index));\n    tokens.push({ type, content });\n    pos = index + content.length;\n  }\n  if (input.length > pos) tokens.push(input.substring(pos));\n  return tokens;\n}\n\n// src/helper/eventGroups.ts\n\nvar allRemoteParticipantRoomEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantNameChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantAttributesChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantRoomEvents = [\n  ...allRemoteParticipantRoomEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n];\nvar participantTrackEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n];\nvar allRemoteParticipantEvents = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantEvents = [\n  ...allRemoteParticipantEvents,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n];\n\n// src/logger.ts\n\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_2__.getLogger(\"lk-components-js\");\nlog.setDefaultLevel(\"WARN\");\nfunction setLogLevel(level, options = {}) {\n  var _a;\n  log.setLevel(level);\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((_a = options.liveKitClientLogLevel) != null ? _a : level);\n}\nfunction setLogExtension(extension, options = {}) {\n  var _a;\n  const originalFactory = log.methodFactory;\n  log.methodFactory = (methodName, configLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, configLevel, loggerName);\n    const logLevel = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[methodName];\n    const needLog = logLevel >= configLevel && logLevel < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (msg, context) => {\n      if (context) rawMethod(msg, context);\n      else rawMethod(msg);\n      if (needLog) {\n        extension(logLevel, msg, context);\n      }\n    };\n  };\n  log.setLevel(log.getLevel());\n  (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((_a = options.liveKitClientLogExtension) != null ? _a : extension);\n}\n\n// src/helper/grid-layouts.ts\nvar GRID_LAYOUTS = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction selectGridLayout(layoutDefinitions, participantCount, width, height) {\n  if (layoutDefinitions.length < 1) {\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  }\n  const layouts = expandAndSortLayoutDefinitions(layoutDefinitions);\n  if (width <= 0 || height <= 0) {\n    return layouts[0];\n  }\n  let currentLayoutIndex = 0;\n  const containerOrientation = width / height > 1 ? \"landscape\" : \"portrait\";\n  let layout = layouts.find((layout_, index, allLayouts) => {\n    currentLayoutIndex = index;\n    const isBiggerLayoutAvailable = allLayouts.findIndex((l, i) => {\n      const fitsOrientation = !l.orientation || l.orientation === containerOrientation;\n      const layoutIsBiggerThanCurrent = i > index;\n      const layoutFitsSameAmountOfParticipants = l.maxTiles === layout_.maxTiles;\n      return layoutIsBiggerThanCurrent && layoutFitsSameAmountOfParticipants && fitsOrientation;\n    }) !== -1;\n    return layout_.maxTiles >= participantCount && !isBiggerLayoutAvailable;\n  });\n  if (layout === void 0) {\n    layout = layouts[layouts.length - 1];\n    if (layout) {\n      log.warn(\n        `No layout found for: participantCount: ${participantCount}, width/height: ${width}/${height} fallback to biggest available layout (${layout}).`\n      );\n    } else {\n      throw new Error(`No layout or fallback layout found.`);\n    }\n  }\n  if (width < layout.minWidth || height < layout.minHeight) {\n    if (currentLayoutIndex > 0) {\n      const smallerLayout = layouts[currentLayoutIndex - 1];\n      layout = selectGridLayout(\n        layouts.slice(0, currentLayoutIndex),\n        smallerLayout.maxTiles,\n        width,\n        height\n      );\n    }\n  }\n  return layout;\n}\nfunction expandAndSortLayoutDefinitions(layouts) {\n  return [...layouts].map((layout) => {\n    var _a, _b;\n    return {\n      name: `${layout.columns}x${layout.rows}`,\n      columns: layout.columns,\n      rows: layout.rows,\n      maxTiles: layout.columns * layout.rows,\n      minWidth: (_a = layout.minWidth) != null ? _a : 0,\n      minHeight: (_b = layout.minHeight) != null ? _b : 0,\n      orientation: layout.orientation\n    };\n  }).sort((a, b) => {\n    if (a.maxTiles !== b.maxTiles) {\n      return a.maxTiles - b.maxTiles;\n    } else if (a.minWidth !== 0 || b.minWidth !== 0) {\n      return a.minWidth - b.minWidth;\n    } else if (a.minHeight !== 0 || b.minHeight !== 0) {\n      return a.minHeight - b.minHeight;\n    } else {\n      return 0;\n    }\n  });\n}\n\n// src/helper/set-helper.ts\nfunction setDifference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\n\n// src/helper/featureDetection.ts\nfunction supportsScreenSharing() {\n  return typeof navigator !== \"undefined\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\n\n// src/helper/transcriptions.ts\nfunction getActiveTranscriptionSegments(segments, syncTimes, maxAge = 0) {\n  return segments.filter((segment) => {\n    var _a;\n    const hasTrackSync = !!syncTimes.rtpTimestamp;\n    const currentTrackTime = (_a = syncTimes.rtpTimestamp) != null ? _a : performance.timeOrigin + performance.now();\n    const displayStartTime = hasTrackSync ? Math.max(segment.receivedAtMediaTimestamp, segment.startTime) : segment.receivedAt;\n    const segmentDuration = maxAge + segment.endTime - segment.startTime;\n    return currentTrackTime >= displayStartTime && currentTrackTime <= displayStartTime + segmentDuration;\n  });\n}\nfunction addMediaTimestampToTranscription(segment, timestamps) {\n  var _a;\n  return __spreadProps(__spreadValues({}, segment), {\n    receivedAtMediaTimestamp: (_a = timestamps.rtpTimestamp) != null ? _a : 0,\n    receivedAt: timestamps.timestamp\n  });\n}\nfunction dedupeSegments(prevSegments, newSegments, windowSize) {\n  return [...prevSegments, ...newSegments].reduceRight((acc, segment) => {\n    if (!acc.find((val) => val.id === segment.id)) {\n      acc.unshift(segment);\n    }\n    return acc;\n  }, []).slice(0 - windowSize);\n}\nfunction didActiveSegmentsChange(prevActive, newActive) {\n  if (newActive.length !== prevActive.length) {\n    return true;\n  }\n  return !newActive.every((newSegment) => {\n    return prevActive.find(\n      (prevSegment) => prevSegment.id === newSegment.id && prevSegment.text === newSegment.text && prevSegment.final === newSegment.final && prevSegment.language === newSegment.language && prevSegment.startTime === newSegment.startTime && prevSegment.endTime === newSegment.endTime\n    );\n  });\n}\n\n// src/types.ts\nvar PIN_DEFAULT_STATE = [];\nvar WIDGET_DEFAULT_STATE = {\n  showChat: false,\n  unreadMessages: 0,\n  showSettings: false\n};\nfunction isSourceWitOptions(source) {\n  return typeof source === \"object\";\n}\nfunction isSourcesWithOptions(sources) {\n  return Array.isArray(sources) && sources.filter(isSourceWitOptions).length > 0;\n}\n\n// src/sorting/sort-track-bundles.ts\n\n\n// src/sorting/base-sort-functions.ts\n\nfunction sortParticipantsByAudioLevel(a, b) {\n  return b.audioLevel - a.audioLevel;\n}\nfunction sortParticipantsByIsSpeaking(a, b) {\n  if (a.isSpeaking === b.isSpeaking) {\n    return 0;\n  } else {\n    return a.isSpeaking ? -1 : 1;\n  }\n}\nfunction sortParticipantsByLastSpokenAT(a, b) {\n  var _a, _b, _c, _d;\n  if (a.lastSpokeAt !== void 0 || b.lastSpokeAt !== void 0) {\n    return ((_b = (_a = b.lastSpokeAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = a.lastSpokeAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n  } else {\n    return 0;\n  }\n}\nfunction sortParticipantsByJoinedAt(a, b) {\n  var _a, _b, _c, _d;\n  return ((_b = (_a = a.joinedAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = b.joinedAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n}\nfunction sortTrackReferencesByType(a, b) {\n  if (isTrackReference(a)) {\n    if (isTrackReference(b)) {\n      return 0;\n    } else {\n      return -1;\n    }\n  } else if (isTrackReference(b)) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\nfunction sortTrackRefsByIsCameraEnabled(a, b) {\n  const aVideo = a.participant.isCameraEnabled;\n  const bVideo = b.participant.isCameraEnabled;\n  if (aVideo !== bVideo) {\n    if (aVideo) {\n      return -1;\n    } else {\n      return 1;\n    }\n  } else {\n    return 0;\n  }\n}\n\n// src/sorting/sort-track-bundles.ts\nfunction sortTrackReferences(tracks) {\n  const localTracks = [];\n  const screenShareTracks = [];\n  const cameraTracks = [];\n  const undefinedTracks = [];\n  tracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal && trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      localTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare) {\n      screenShareTracks.push(trackRef);\n    } else if (trackRef.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera) {\n      cameraTracks.push(trackRef);\n    } else {\n      undefinedTracks.push(trackRef);\n    }\n  });\n  const sortedScreenShareTracks = sortScreenShareTracks(screenShareTracks);\n  const sortedCameraTracks = sortCameraTracks(cameraTracks);\n  return [...localTracks, ...sortedScreenShareTracks, ...sortedCameraTracks, ...undefinedTracks];\n}\nfunction sortScreenShareTracks(screenShareTracks) {\n  const localScreenShares = [];\n  const remoteScreenShares = [];\n  screenShareTracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localScreenShares.push(trackRef);\n    } else {\n      remoteScreenShares.push(trackRef);\n    }\n  });\n  localScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  remoteScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  const sortedScreenShareTrackRefs = [...remoteScreenShares, ...localScreenShares];\n  return sortedScreenShareTrackRefs;\n}\nfunction sortCameraTracks(cameraTrackReferences) {\n  const localCameraTracks = [];\n  const remoteCameraTracks = [];\n  cameraTrackReferences.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localCameraTracks.push(trackRef);\n    } else {\n      remoteCameraTracks.push(trackRef);\n    }\n  });\n  remoteCameraTracks.sort((a, b) => {\n    if (a.participant.isSpeaking && b.participant.isSpeaking) {\n      return sortParticipantsByAudioLevel(a.participant, b.participant);\n    }\n    if (a.participant.isSpeaking !== b.participant.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a.participant, b.participant);\n    }\n    if (a.participant.lastSpokeAt !== b.participant.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a.participant, b.participant);\n    }\n    if (isTrackReference(a) !== isTrackReference(b)) {\n      return sortTrackReferencesByType(a, b);\n    }\n    if (a.participant.isCameraEnabled !== b.participant.isCameraEnabled) {\n      return sortTrackRefsByIsCameraEnabled(a, b);\n    }\n    return sortParticipantsByJoinedAt(a.participant, b.participant);\n  });\n  return [...localCameraTracks, ...remoteCameraTracks];\n}\n\n// src/sorting/sort-participants.ts\n\nfunction sortParticipants(participants) {\n  const sortedParticipants = [...participants];\n  sortedParticipants.sort((a, b) => {\n    if (a.isSpeaking && b.isSpeaking) {\n      return sortParticipantsByAudioLevel(a, b);\n    }\n    if (a.isSpeaking !== b.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a, b);\n    }\n    if (a.lastSpokeAt !== b.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a, b);\n    }\n    const aVideo = a.videoTrackPublications.size > 0;\n    const bVideo = b.videoTrackPublications.size > 0;\n    if (aVideo !== bVideo) {\n      if (aVideo) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n    return sortParticipantsByJoinedAt(a, b);\n  });\n  const localParticipant = sortedParticipants.find((p) => p instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant);\n  if (localParticipant) {\n    const localIdx = sortedParticipants.indexOf(localParticipant);\n    if (localIdx >= 0) {\n      sortedParticipants.splice(localIdx, 1);\n      if (sortedParticipants.length > 0) {\n        sortedParticipants.splice(0, 0, localParticipant);\n      } else {\n        sortedParticipants.push(localParticipant);\n      }\n    }\n  }\n  return sortedParticipants;\n}\n\n// src/helper/array-helper.ts\nfunction chunk(input, size) {\n  return input.reduce(\n    (arr, item, idx) => {\n      return idx % size === 0 ? [...arr, [item]] : [...arr.slice(0, -1), [...arr.slice(-1)[0], item]];\n    },\n    []\n  );\n}\nfunction zip(a1, a2) {\n  const resultLength = Math.max(a1.length, a2.length);\n  return new Array(resultLength).fill([]).map((_val, idx) => [a1[idx], a2[idx]]);\n}\nfunction differenceBy(a1, a2, by) {\n  return a1.filter((c) => !a2.map((v) => by(v)).includes(by(c)));\n}\n\n// src/track-reference/test-utils.ts\n\nfunction flatTrackReferenceArray(list) {\n  return list.map((item) => {\n    if (typeof item === \"string\" || typeof item === \"number\") {\n      return `${item}`;\n    } else {\n      return getTrackReferenceId(item);\n    }\n  });\n}\n\n// src/sorting/tile-array-update.ts\nfunction visualPageChange(state, next) {\n  return {\n    dropped: differenceBy(state, next, getTrackReferenceId),\n    added: differenceBy(next, state, getTrackReferenceId)\n  };\n}\nfunction listNeedsUpdating(changes) {\n  return changes.added.length !== 0 || changes.dropped.length !== 0;\n}\nfunction findIndex(trackReference, trackReferences) {\n  const indexToReplace = trackReferences.findIndex(\n    (trackReference_) => getTrackReferenceId(trackReference_) === getTrackReferenceId(trackReference)\n  );\n  if (indexToReplace === -1) {\n    throw new Error(\n      `Element not part of the array: ${getTrackReferenceId(\n        trackReference\n      )} not in ${flatTrackReferenceArray(trackReferences)}`\n    );\n  }\n  return indexToReplace;\n}\nfunction swapItems(moveForward, moveBack, trackReferences) {\n  const indexToReplace = findIndex(moveForward, trackReferences);\n  const indexReplaceWith = findIndex(moveBack, trackReferences);\n  trackReferences.splice(indexToReplace, 1, moveBack);\n  trackReferences.splice(indexReplaceWith, 1, moveForward);\n  return trackReferences;\n}\nfunction dropItem(itemToDrop, list) {\n  const indexOfElementToDrop = findIndex(itemToDrop, list);\n  list.splice(indexOfElementToDrop, 1);\n  return list;\n}\nfunction addItem(itemToAdd, list) {\n  return [...list, itemToAdd];\n}\nfunction divideIntoPages(list, maxElementsOnPage) {\n  const pages = chunk(list, maxElementsOnPage);\n  return pages;\n}\nfunction updatePages(currentList, nextList, maxItemsOnPage) {\n  let updatedList = refreshList(currentList, nextList);\n  if (updatedList.length < nextList.length) {\n    const addedItems = differenceBy(nextList, updatedList, getTrackReferenceId);\n    updatedList = [...updatedList, ...addedItems];\n  }\n  const currentPages = divideIntoPages(updatedList, maxItemsOnPage);\n  const nextPages = divideIntoPages(nextList, maxItemsOnPage);\n  zip(currentPages, nextPages).forEach(([currentPage, nextPage], pageIndex) => {\n    if (currentPage && nextPage) {\n      const updatedPage = divideIntoPages(updatedList, maxItemsOnPage)[pageIndex];\n      const changes = visualPageChange(updatedPage, nextPage);\n      if (listNeedsUpdating(changes)) {\n        log.debug(\n          `Detected visual changes on page: ${pageIndex}, current: ${flatTrackReferenceArray(\n            currentPage\n          )}, next: ${flatTrackReferenceArray(nextPage)}`,\n          { changes }\n        );\n        if (changes.added.length === changes.dropped.length) {\n          zip(changes.added, changes.dropped).forEach(([added, dropped]) => {\n            if (added && dropped) {\n              updatedList = swapItems(added, dropped, updatedList);\n            } else {\n              throw new Error(\n                `For a swap action we need a addition and a removal one is missing: ${added}, ${dropped}`\n              );\n            }\n          });\n        }\n        if (changes.added.length === 0 && changes.dropped.length > 0) {\n          changes.dropped.forEach((item) => {\n            updatedList = dropItem(item, updatedList);\n          });\n        }\n        if (changes.added.length > 0 && changes.dropped.length === 0) {\n          changes.added.forEach((item) => {\n            updatedList = addItem(item, updatedList);\n          });\n        }\n      }\n    }\n  });\n  if (updatedList.length > nextList.length) {\n    const missingItems = differenceBy(updatedList, nextList, getTrackReferenceId);\n    updatedList = updatedList.filter(\n      (item) => !missingItems.map(getTrackReferenceId).includes(getTrackReferenceId(item))\n    );\n  }\n  return updatedList;\n}\nfunction refreshList(currentList, nextList) {\n  return currentList.map((currentItem) => {\n    const updateForCurrentItem = nextList.find(\n      (newItem_) => (\n        // If the IDs match or ..\n        getTrackReferenceId(currentItem) === getTrackReferenceId(newItem_) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof currentItem !== \"number\" && isTrackReferencePlaceholder(currentItem) && isTrackReference(newItem_) && isPlaceholderReplacement(currentItem, newItem_)\n      )\n    );\n    return updateForCurrentItem != null ? updateForCurrentItem : currentItem;\n  });\n}\n\n// src/components/mediaToggle.ts\n\n\n\n// src/observables/participant.ts\n\n\n\n// src/components/mediaTrack.ts\n\n\n\n// src/styles-interface/class-prefixer.ts\nfunction prefixClass(unprefixedClassName) {\n  return `${cssPrefix}-${unprefixedClassName}`;\n}\n\n// src/components/mediaTrack.ts\nfunction setupMediaTrack(trackIdentifier) {\n  const initialPub = getTrackByIdentifier(trackIdentifier);\n  const trackObserver = observeParticipantMedia(trackIdentifier.participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => {\n      return getTrackByIdentifier(trackIdentifier);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(initialPub)\n  );\n  const className = prefixClass(\n    trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || trackIdentifier.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  );\n  return { className, trackObserver };\n}\nfunction getTrackByIdentifier(options) {\n  if (isTrackReference(options)) {\n    return options.publication;\n  } else {\n    const { source, name, participant } = options;\n    if (source && name) {\n      return participant.getTrackPublications().find((pub) => pub.source === source && pub.trackName === name);\n    } else if (name) {\n      return participant.getTrackPublicationByName(name);\n    } else if (source) {\n      return participant.getTrackPublication(source);\n    } else {\n      throw new Error(\"At least one of source and name needs to be defined\");\n    }\n  }\n}\n\n// src/observables/room.ts\n\n\nfunction observeRoomEvents(room, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onRoomUpdate = () => {\n      subscribe.next(room);\n    };\n    events.forEach((evt) => {\n      room.on(evt, onRoomUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        room.off(evt, onRoomUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room));\n  return observable;\n}\nfunction roomEventSelector(room, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    room.on(event, update);\n    const unsubscribe = () => {\n      room.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction roomObserver(room) {\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room));\n  return observable;\n}\nfunction connectionStateObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([connectionState]) => connectionState),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.state)\n  );\n}\nfunction screenShareObserver(room) {\n  let screenShareSubscriber;\n  const observers = [];\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    screenShareSubscriber = subscriber;\n    return () => {\n      observers.forEach((observer) => {\n        observer.unsubscribe();\n      });\n    };\n  });\n  const screenShareTracks = [];\n  const handleSub = (publication, participant) => {\n    if (publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare && publication.source !== livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) {\n      return;\n    }\n    let trackMap = screenShareTracks.find((tr) => tr.participant.identity === participant.identity);\n    const getScreenShareTracks = (participant2) => {\n      return participant2.getTrackPublications().filter(\n        (track) => (track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare || track.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShareAudio) && track.track\n      );\n    };\n    if (!trackMap) {\n      trackMap = {\n        participant,\n        tracks: getScreenShareTracks(participant)\n      };\n    } else {\n      const index = screenShareTracks.indexOf(trackMap);\n      screenShareTracks.splice(index, 1);\n      trackMap.tracks = getScreenShareTracks(participant);\n    }\n    if (trackMap.tracks.length > 0) {\n      screenShareTracks.push(trackMap);\n    }\n    screenShareSubscriber.next(screenShareTracks);\n  };\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnsubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished).subscribe((args) => handleSub(...args))\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  setTimeout(() => {\n    for (const p of room.remoteParticipants.values()) {\n      p.getTrackPublications().forEach((track) => {\n        handleSub(track, p);\n      });\n    }\n  }, 1);\n  return observable;\n}\nfunction roomInfoObserver(room) {\n  const observer = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((r) => {\n      return { name: r.name, metadata: r.metadata };\n    })\n  );\n  return observer;\n}\nfunction activeSpeakerObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([speakers]) => speakers)\n  );\n}\nfunction createMediaDeviceObserver(kind, onError, requestPermissions = true) {\n  var _a;\n  const onDeviceChange = () => __async(this, null, function* () {\n    try {\n      const newDevices = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions);\n      deviceSubject.next(newDevices);\n    } catch (e) {\n      onError == null ? void 0 : onError(e);\n    }\n  });\n  const deviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const observable = deviceSubject.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.finalize)(() => {\n      var _a2;\n      (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.removeEventListener(\"devicechange\", onDeviceChange);\n    })\n  );\n  if (typeof window !== \"undefined\") {\n    if (!window.isSecureContext) {\n      throw new Error(\n        `Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices`\n      );\n    }\n    (_a = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a.addEventListener(\"devicechange\", onDeviceChange);\n  }\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.concat)(\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(kind, requestPermissions).catch((e) => {\n      onError == null ? void 0 : onError(e);\n      return [];\n    }),\n    observable\n  );\n}\nfunction createDataObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction createChatObserver(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ChatMessage);\n}\nfunction roomAudioPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      return { canPlayAudio: room2.canPlaybackAudio };\n    })\n  );\n  return observable;\n}\nfunction roomVideoPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      return { canPlayVideo: room2.canPlaybackVideo };\n    })\n  );\n  return observable;\n}\nfunction createActiveDeviceObservable(room, kind) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(([kindOfDevice]) => kindOfDevice === kind),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([kind2, deviceId]) => {\n      log.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: kind2, deviceId });\n      return deviceId;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.getActiveDevice(kind))\n  );\n}\nfunction encryptionStatusObservable(room, participant) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(\n      ([, p]) => (participant == null ? void 0 : participant.identity) === (p == null ? void 0 : p.identity) || !p && (participant == null ? void 0 : participant.identity) === room.localParticipant.identity\n    ),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([encrypted]) => encrypted),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(\n      participant instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant ? participant.isE2EEEnabled : !!(participant == null ? void 0 : participant.isEncrypted)\n    )\n  );\n}\nfunction recordingStatusObservable(room) {\n  return roomEventSelector(room, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RecordingStatusChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([recording]) => recording),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.isRecording)\n  );\n}\n\n// src/observables/participant.ts\nfunction observeParticipantEvents(participant, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onParticipantUpdate = () => {\n      subscribe.next(participant);\n    };\n    events.forEach((evt) => {\n      participant.on(evt, onParticipantUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        participant.off(evt, onParticipantUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant));\n  return observable;\n}\nfunction observeParticipantMedia(participant) {\n  const participantObserver = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((p) => {\n      const { isMicrophoneEnabled, isCameraEnabled, isScreenShareEnabled } = p;\n      const microphoneTrack = p.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone);\n      const cameraTrack = p.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      const participantMedia = {\n        isCameraEnabled,\n        isMicrophoneEnabled,\n        isScreenShareEnabled,\n        cameraTrack,\n        microphoneTrack,\n        participant: p\n      };\n      return participantMedia;\n    })\n  );\n  return participantObserver;\n}\nfunction createTrackObserver(participant, options) {\n  return observeParticipantMedia(participant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => {\n      return { publication: getTrackByIdentifier(options) };\n    })\n  );\n}\nfunction participantInfoObserver(participant) {\n  if (!participant) {\n    return void 0;\n  }\n  const observer = observeParticipantEvents(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantNameChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(({ name, identity, metadata }) => {\n      return {\n        name,\n        identity,\n        metadata\n      };\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)({\n      name: participant.name,\n      identity: participant.identity,\n      metadata: participant.metadata\n    })\n  );\n  return observer;\n}\nfunction createConnectionQualityObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([quality]) => quality),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant.connectionQuality)\n  );\n  return observer;\n}\nfunction participantEventSelector(participant, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    participant.on(event, update);\n    const unsubscribe = () => {\n      participant.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction mutedObserver(trackRef) {\n  var _a, _b, _c, _d;\n  return observeParticipantEvents(\n    trackRef.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((participant) => {\n      var _a2, _b2;\n      const pub = (_a2 = trackRef.publication) != null ? _a2 : participant.getTrackPublication(trackRef.source);\n      return (_b2 = pub == null ? void 0 : pub.isMuted) != null ? _b2 : true;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(\n      (_d = (_c = (_a = trackRef.publication) == null ? void 0 : _a.isMuted) != null ? _c : (_b = trackRef.participant.getTrackPublication(trackRef.source)) == null ? void 0 : _b.isMuted) != null ? _d : true\n    )\n  );\n}\nfunction createIsSpeakingObserver(participant) {\n  return participantEventSelector(participant, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([isSpeaking]) => isSpeaking)\n  );\n}\nfunction connectedParticipantsObserver(room, options = {}) {\n  var _a;\n  let subscriber;\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((sub) => {\n    subscriber = sub;\n    return () => listener.unsubscribe();\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(Array.from(room.remoteParticipants.values())));\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const roomEvents = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...additionalRoomEvents\n    ])\n  );\n  const listener = observeRoomEvents(room, ...roomEvents).subscribe(\n    (r) => subscriber == null ? void 0 : subscriber.next(Array.from(r.remoteParticipants.values()))\n  );\n  if (room.remoteParticipants.size > 0) {\n    subscriber == null ? void 0 : subscriber.next(Array.from(room.remoteParticipants.values()));\n  }\n  return observable;\n}\nfunction connectedParticipantObserver(room, identity, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.switchMap)((r) => {\n      const participant = r.getParticipantByIdentity(identity);\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(room.getParticipantByIdentity(identity))\n  );\n  return observable;\n}\nfunction participantPermissionObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => participant.permissions),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(participant.permissions)\n  );\n  return observer;\n}\nfunction participantByIdentifierObserver(room, { kind, identity }, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const matchesIdentifier = (participant) => {\n    let isMatch = true;\n    if (kind) {\n      isMatch = isMatch && participant.kind === kind;\n    }\n    if (identity) {\n      isMatch = isMatch && participant.identity === identity;\n    }\n    return isMatch;\n  };\n  const observable = observeRoomEvents(\n    room,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.switchMap)((r) => {\n      const participant = Array.from(r.remoteParticipants.values()).find(\n        (p) => matchesIdentifier(p)\n      );\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(Array.from(room.remoteParticipants.values()).find((p) => matchesIdentifier(p)))\n  );\n  return observable;\n}\nfunction participantAttributesObserver(participant) {\n  if (typeof participant === \"undefined\") {\n    return new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable();\n  }\n  return participantEventSelector(participant, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.AttributesChanged).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([changedAttributes]) => {\n      return {\n        changed: changedAttributes,\n        attributes: participant.attributes\n      };\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)({ changed: participant.attributes, attributes: participant.attributes })\n  );\n}\n\n// src/components/mediaToggle.ts\nfunction setupMediaToggle(source, room, options, publishOptions, onError) {\n  const { localParticipant } = room;\n  const getSourceEnabled = (source2, localParticipant2) => {\n    let isEnabled = false;\n    switch (source2) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        isEnabled = localParticipant2.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        isEnabled = localParticipant2.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        isEnabled = localParticipant2.isScreenShareEnabled;\n        break;\n      default:\n        break;\n    }\n    return isEnabled;\n  };\n  const enabledObserver = observeParticipantMedia(localParticipant).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((media) => {\n      return getSourceEnabled(source, media.participant);\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getSourceEnabled(source, localParticipant))\n  );\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const toggle = (forceState, captureOptions) => __async(this, null, function* () {\n    try {\n      captureOptions != null ? captureOptions : captureOptions = options;\n      pendingSubject.next(true);\n      switch (source) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          yield localParticipant.setCameraEnabled(\n            forceState != null ? forceState : !localParticipant.isCameraEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isCameraEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          yield localParticipant.setMicrophoneEnabled(\n            forceState != null ? forceState : !localParticipant.isMicrophoneEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isMicrophoneEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          yield localParticipant.setScreenShareEnabled(\n            forceState != null ? forceState : !localParticipant.isScreenShareEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (e) {\n      if (onError && e instanceof Error) {\n        onError == null ? void 0 : onError(e);\n        return void 0;\n      } else {\n        throw e;\n      }\n    } finally {\n      pendingSubject.next(false);\n    }\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver,\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\nfunction setupManualToggle() {\n  let state = false;\n  const enabledSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const pendingSubject = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const toggle = (forceState) => __async(this, null, function* () {\n    pendingSubject.next(true);\n    state = forceState != null ? forceState : !state;\n    enabledSubject.next(state);\n    pendingSubject.next(false);\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver: enabledSubject.asObservable(),\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\n\n// src/components/mediaDeviceSelect.ts\n\n\nfunction setupDeviceSelector(kind, room, localTrack) {\n  const activeDeviceSubject = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(void 0);\n  const activeDeviceObservable = room ? createActiveDeviceObservable(room, kind) : activeDeviceSubject.asObservable();\n  const setActiveMediaDevice = (_0, ..._1) => __async(this, [_0, ..._1], function* (id, options = {}) {\n    var _a, _b, _c;\n    if (room) {\n      log.debug(`Switching active device of kind \"${kind}\" with id ${id}.`);\n      yield room.switchActiveDevice(kind, id, options.exact);\n      const actualDeviceId = (_a = room.getActiveDevice(kind)) != null ? _a : id;\n      if (actualDeviceId !== id && id !== \"default\") {\n        log.info(\n          `We tried to select the device with id (${id}), but the browser decided to select the device with id (${actualDeviceId}) instead.`\n        );\n      }\n      let targetTrack = void 0;\n      if (kind === \"audioinput\")\n        targetTrack = (_b = room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : _b.track;\n      else if (kind === \"videoinput\") {\n        targetTrack = (_c = room.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : _c.track;\n      }\n      const useDefault = id === \"default\" && !targetTrack || id === \"default\" && (targetTrack == null ? void 0 : targetTrack.mediaStreamTrack.label.startsWith(\"Default\"));\n      activeDeviceSubject.next(useDefault ? id : actualDeviceId);\n    } else if (localTrack) {\n      yield localTrack.setDeviceId(options.exact ? { exact: id } : id);\n      const actualId = yield localTrack.getDeviceId();\n      activeDeviceSubject.next(\n        id === \"default\" && localTrack.mediaStreamTrack.label.startsWith(\"Default\") ? id : actualId\n      );\n    } else if (activeDeviceSubject.value !== id) {\n      log.warn(\n        \"device switch skipped, please provide either a room or a local track to switch on. \"\n      );\n      activeDeviceSubject.next(id);\n    }\n  });\n  const className = prefixClass(\"media-device-select\");\n  return {\n    className,\n    activeDeviceObservable,\n    setActiveMediaDevice\n  };\n}\n\n// src/components/disconnectButton.ts\nfunction setupDisconnectButton(room) {\n  const disconnect = (stopTracks) => {\n    room.disconnect(stopTracks);\n  };\n  const className = prefixClass(\"disconnect-button\");\n  return { className, disconnect };\n}\n\n// src/components/connectionQualityIndicator.ts\nfunction setupConnectionQualityIndicator(participant) {\n  const className = prefixClass(\"connection-quality\");\n  const connectionQualityObserver = createConnectionQualityObserver(participant);\n  return { className, connectionQualityObserver };\n}\n\n// src/components/trackMutedIndicator.ts\n\nfunction setupTrackMutedIndicator(trackRef) {\n  let classForSource = \"track-muted-indicator-camera\";\n  switch (trackRef.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      classForSource = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      classForSource = \"track-muted-indicator-microphone\";\n      break;\n    default:\n      break;\n  }\n  const className = prefixClass(classForSource);\n  const mediaMutedObserver = mutedObserver(trackRef);\n  return { className, mediaMutedObserver };\n}\n\n// src/components/participantName.ts\nfunction setupParticipantName(participant) {\n  const infoObserver = participantInfoObserver(participant);\n  return { className: \"lk-participant-name\", infoObserver };\n}\n\n// src/components/participantTile.ts\nfunction setupParticipantTile() {\n  const className = prefixClass(\"participant-tile\");\n  return {\n    className\n  };\n}\n\n// src/components/chat.ts\n\n\n\n// src/observables/dataChannel.ts\n\nvar DataTopic = {\n  CHAT: \"lk-chat-topic\",\n  CHAT_UPDATE: \"lk-chat-update-topic\"\n};\nfunction sendMessage(_0, _1) {\n  return __async(this, arguments, function* (localParticipant, payload, options = {}) {\n    const { reliable, destinationIdentities, topic } = options;\n    yield localParticipant.publishData(payload, {\n      destinationIdentities,\n      topic,\n      reliable\n    });\n  });\n}\nfunction setupDataMessageHandler(room, topic, onMessage) {\n  const topics = Array.isArray(topic) ? topic : [topic];\n  const messageObservable = createDataObserver(room).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.filter)(\n      ([, , , messageTopic]) => topic === void 0 || messageTopic !== void 0 && topics.includes(messageTopic)\n    ),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([payload, participant, , messageTopic]) => {\n      const msg = {\n        payload,\n        topic: messageTopic,\n        from: participant\n      };\n      onMessage == null ? void 0 : onMessage(msg);\n      return msg;\n    })\n  );\n  let isSendingSubscriber;\n  const isSendingObservable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscriber) => {\n    isSendingSubscriber = subscriber;\n  });\n  const send = (_0, ..._1) => __async(this, [_0, ..._1], function* (payload, options = {}) {\n    isSendingSubscriber.next(true);\n    try {\n      yield sendMessage(room.localParticipant, payload, __spreadValues({ topic: topics[0] }, options));\n    } finally {\n      isSendingSubscriber.next(false);\n    }\n  });\n  return { messageObservable, isSendingObservable, send };\n}\nfunction setupChatMessageHandler(room) {\n  const chatObservable = createChatObserver(room);\n  const send = (text) => __async(this, null, function* () {\n    const msg = yield room.localParticipant.sendChatMessage(text);\n    return msg;\n  });\n  const edit = (text, originalMsg) => __async(this, null, function* () {\n    const msg = yield room.localParticipant.editChatMessage(text, originalMsg);\n    return msg;\n  });\n  return { chatObservable, send, edit };\n}\n\n// src/components/chat.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar topicSubjectMap = /* @__PURE__ */ new Map();\nvar encode = (message) => encoder.encode(JSON.stringify(message));\nvar decode = (message) => JSON.parse(decoder.decode(message));\nfunction setupChat(room, options) {\n  var _a, _b;\n  const onDestroyObservable = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  const serverSupportsChatApi = () => {\n    var _a2, _b2, _c;\n    return ((_a2 = room.serverInfo) == null ? void 0 : _a2.edition) === 1 || !!((_b2 = room.serverInfo) == null ? void 0 : _b2.version) && (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.compareVersions)((_c = room.serverInfo) == null ? void 0 : _c.version, \"1.17.2\") > 0;\n  };\n  const { messageDecoder, messageEncoder, channelTopic, updateChannelTopic } = options != null ? options : {};\n  const topic = channelTopic != null ? channelTopic : DataTopic.CHAT;\n  const updateTopic = updateChannelTopic != null ? updateChannelTopic : DataTopic.CHAT_UPDATE;\n  let needsSetup = false;\n  if (!topicSubjectMap.has(room)) {\n    needsSetup = true;\n  }\n  const topicMap = (_a = topicSubjectMap.get(room)) != null ? _a : /* @__PURE__ */ new Map();\n  const messageSubject = (_b = topicMap.get(topic)) != null ? _b : new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();\n  topicMap.set(topic, messageSubject);\n  topicSubjectMap.set(room, topicMap);\n  if (needsSetup) {\n    const { messageObservable } = setupDataMessageHandler(room, [topic, updateTopic]);\n    messageObservable.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_12__.takeUntil)(onDestroyObservable)).subscribe(messageSubject);\n  }\n  const { chatObservable, send: sendChatMessage } = setupChatMessageHandler(room);\n  const finalMessageDecoder = messageDecoder != null ? messageDecoder : decode;\n  const messagesObservable = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.merge)(\n    messageSubject.pipe(\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((msg) => {\n        const parsedMessage = finalMessageDecoder(msg.payload);\n        const newMessage = __spreadProps(__spreadValues({}, parsedMessage), { from: msg.from });\n        if (isIgnorableChatMessage(newMessage)) {\n          return void 0;\n        }\n        return newMessage;\n      })\n    ),\n    chatObservable.pipe(\n      (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([msg, participant]) => {\n        return __spreadProps(__spreadValues({}, msg), { from: participant });\n      })\n    )\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.scan)((acc, value) => {\n      var _a2;\n      if (!value) {\n        return acc;\n      }\n      if (\"id\" in value && acc.find((msg) => {\n        var _a3, _b2;\n        return ((_a3 = msg.from) == null ? void 0 : _a3.identity) === ((_b2 = value.from) == null ? void 0 : _b2.identity) && msg.id === value.id;\n      })) {\n        const replaceIndex = acc.findIndex((msg) => msg.id === value.id);\n        if (replaceIndex > -1) {\n          const originalMsg = acc[replaceIndex];\n          acc[replaceIndex] = __spreadProps(__spreadValues({}, value), {\n            timestamp: originalMsg.timestamp,\n            editTimestamp: (_a2 = value.editTimestamp) != null ? _a2 : value.timestamp\n          });\n        }\n        return [...acc];\n      }\n      return [...acc, value];\n    }, []),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.takeUntil)(onDestroyObservable)\n  );\n  const isSending$ = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(false);\n  const finalMessageEncoder = messageEncoder != null ? messageEncoder : encode;\n  const send = (message) => __async(this, null, function* () {\n    isSending$.next(true);\n    try {\n      const chatMessage = yield sendChatMessage(message);\n      const encodedLegacyMsg = finalMessageEncoder(__spreadProps(__spreadValues({}, chatMessage), {\n        ignore: serverSupportsChatApi()\n      }));\n      yield sendMessage(room.localParticipant, encodedLegacyMsg, {\n        reliable: true,\n        topic\n      });\n      return chatMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  const update = (message, originalMessageOrId) => __async(this, null, function* () {\n    const timestamp = Date.now();\n    const originalMessage = typeof originalMessageOrId === \"string\" ? { id: originalMessageOrId, message: \"\", timestamp } : originalMessageOrId;\n    isSending$.next(true);\n    try {\n      const editedMessage = yield room.localParticipant.editChatMessage(message, originalMessage);\n      const encodedLegacyMessage = finalMessageEncoder(editedMessage);\n      yield sendMessage(room.localParticipant, encodedLegacyMessage, {\n        topic: updateTopic,\n        reliable: true\n      });\n      return editedMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  function destroy() {\n    onDestroyObservable.next();\n    onDestroyObservable.complete();\n    topicSubjectMap.delete(room);\n  }\n  room.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, destroy);\n  return {\n    messageObservable: messagesObservable,\n    isSendingObservable: isSending$,\n    send,\n    update\n  };\n}\nfunction isIgnorableChatMessage(msg) {\n  return msg.ignore == true;\n}\n\n// src/components/startAudio.ts\nfunction setupStartAudio() {\n  const handleStartAudioPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Audio for room: \", room);\n    yield room.startAudio();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback };\n}\n\n// src/components/startVideo.ts\nfunction setupStartVideo() {\n  const handleStartVideoPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Video for room: \", room);\n    yield room.startVideo();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback };\n}\n\n// src/components/chatToggle.ts\nfunction setupChatToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"chat-toggle\")].join(\" \");\n  return { className };\n}\n\n// src/components/focusToggle.ts\nfunction setupFocusToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"focus-toggle-button\")].join(\" \");\n  return { className };\n}\n\n// src/components/clearPinButton.ts\nfunction setupClearPinButton() {\n  const className = \"lk-clear-pin-button lk-button\";\n  return { className };\n}\n\n// src/components/room.ts\nfunction setupLiveKitRoom() {\n  const className = \"lk-room-container\";\n  return { className };\n}\n\n// src/observables/track.ts\n\n\nfunction trackObservable(track) {\n  const trackObserver = observeTrackEvents(\n    track,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Muted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Subscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.Unsubscribed\n  );\n  return trackObserver;\n}\nfunction observeTrackEvents(track, ...events) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const onTrackUpdate = () => {\n      subscribe.next(track);\n    };\n    events.forEach((evt) => {\n      track.on(evt, onTrackUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        track.off(evt, onTrackUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(track));\n  return observable;\n}\nfunction getTrackReferences(room, sources, onlySubscribedTracks = true) {\n  const localParticipant = room.localParticipant;\n  const allParticipants = [localParticipant, ...Array.from(room.remoteParticipants.values())];\n  const trackReferences = [];\n  allParticipants.forEach((participant) => {\n    sources.forEach((source) => {\n      const sourceReferences = Array.from(\n        participant.trackPublications.values()\n      ).filter(\n        (track) => track.source === source && // either return all or only the ones that are subscribed\n        (!onlySubscribedTracks || track.track)\n      ).map((track) => {\n        return {\n          participant,\n          publication: track,\n          source: track.source\n        };\n      });\n      trackReferences.push(...sourceReferences);\n    });\n  });\n  return { trackReferences, participants: allParticipants };\n}\nfunction getParticipantTrackRefs(participant, identifier, onlySubscribedTracks = false) {\n  const { sources, kind, name } = identifier;\n  const sourceReferences = Array.from(participant.trackPublications.values()).filter(\n    (pub) => (!sources || sources.includes(pub.source)) && (!kind || pub.kind === kind) && (!name || pub.trackName === name) && // either return all or only the ones that are subscribed\n    (!onlySubscribedTracks || pub.track)\n  ).map((track) => {\n    return {\n      participant,\n      publication: track,\n      source: track.source\n    };\n  });\n  return sourceReferences;\n}\nfunction trackReferencesObservable(room, sources, options) {\n  var _a, _b;\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const onlySubscribedTracks = (_b = options.onlySubscribed) != null ? _b : true;\n  const roomEvents = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...additionalRoomEvents\n    ])).values()\n  );\n  const observable = observeRoomEvents(room, ...roomEvents).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((room2) => {\n      const data = getTrackReferences(room2, sources, onlySubscribedTracks);\n      log.debug(`TrackReference[] was updated. (length ${data.trackReferences.length})`, data);\n      return data;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getTrackReferences(room, sources, onlySubscribedTracks))\n  );\n  return observable;\n}\nfunction participantTracksObservable(participant, trackIdentifier) {\n  const observable = observeParticipantEvents(participant, ...participantTrackEvents).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)((participant2) => {\n      const data = getParticipantTrackRefs(participant2, trackIdentifier);\n      log.debug(`TrackReference[] was updated. (length ${data.length})`, data);\n      return data;\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.startWith)(getParticipantTrackRefs(participant, trackIdentifier))\n  );\n  return observable;\n}\nfunction trackEventSelector(publication, event) {\n  const observable = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    publication.on(event, update);\n    const unsubscribe = () => {\n      publication.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction trackTranscriptionObserver(publication) {\n  return trackEventSelector(publication, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TranscriptionReceived);\n}\nfunction trackSyncTimeObserver(track) {\n  return trackEventSelector(track, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TimeSyncUpdate).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(([timeUpdate]) => timeUpdate)\n  );\n}\n\n// src/observables/dom-event.ts\n\nfunction createInteractingObservable(htmlElement, inactiveAfter = 1e3) {\n  if (htmlElement === null) return (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)(false);\n  const move$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.fromEvent)(htmlElement, \"mousemove\", { passive: true }).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.map)(() => true));\n  const moveAndStop$ = move$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.timeout)({\n      each: inactiveAfter,\n      with: () => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.concat)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)(false), moveAndStop$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.skipUntil)(move$)))\n    }),\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.distinctUntilChanged)()\n  );\n  return moveAndStop$;\n}\n\n// src/persistent-storage/local-storage-helpers.ts\nfunction saveToLocalStorage(key, value) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (value) {\n      const nonEmptySettings = Object.fromEntries(\n        Object.entries(value).filter(([, value2]) => value2 !== \"\")\n      );\n      localStorage.setItem(key, JSON.stringify(nonEmptySettings));\n    }\n  } catch (error) {\n    log.error(`Error setting item to local storage: ${error}`);\n  }\n}\nfunction loadFromLocalStorage(key) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return void 0;\n  }\n  try {\n    const item = localStorage.getItem(key);\n    if (!item) {\n      log.warn(`Item with key ${key} does not exist in local storage.`);\n      return void 0;\n    }\n    return JSON.parse(item);\n  } catch (error) {\n    log.error(`Error getting item from local storage: ${error}`);\n    return void 0;\n  }\n}\nfunction createLocalStorageInterface(key) {\n  return {\n    load: () => loadFromLocalStorage(key),\n    save: (value) => saveToLocalStorage(key, value)\n  };\n}\n\n// src/persistent-storage/user-choices.ts\nvar USER_CHOICES_KEY = `${cssPrefix}-user-choices`;\nvar defaultUserChoices = {\n  videoEnabled: true,\n  audioEnabled: true,\n  videoDeviceId: \"\",\n  audioDeviceId: \"\",\n  username: \"\"\n};\nvar { load, save } = createLocalStorageInterface(USER_CHOICES_KEY);\nfunction saveUserChoices(userChoices, preventSave = false) {\n  if (preventSave === true) {\n    return;\n  }\n  save(userChoices);\n}\nfunction loadUserChoices(defaults, preventLoad = false) {\n  var _a, _b, _c, _d, _e;\n  const fallback = {\n    videoEnabled: (_a = defaults == null ? void 0 : defaults.videoEnabled) != null ? _a : defaultUserChoices.videoEnabled,\n    audioEnabled: (_b = defaults == null ? void 0 : defaults.audioEnabled) != null ? _b : defaultUserChoices.audioEnabled,\n    videoDeviceId: (_c = defaults == null ? void 0 : defaults.videoDeviceId) != null ? _c : defaultUserChoices.videoDeviceId,\n    audioDeviceId: (_d = defaults == null ? void 0 : defaults.audioDeviceId) != null ? _d : defaultUserChoices.audioDeviceId,\n    username: (_e = defaults == null ? void 0 : defaults.username) != null ? _e : defaultUserChoices.username\n  };\n  if (preventLoad) {\n    return fallback;\n  } else {\n    const maybeLoadedObject = load();\n    const result = __spreadValues(__spreadValues({}, fallback), maybeLoadedObject != null ? maybeLoadedObject : {});\n    return result;\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFPLElBQU0sWUFBWTs7O0FDQzJCOzs7QUMwQjdDLFNBQVMsaUJBQWlCLGdCQUEyRDtBQUMxRixNQUFJLE9BQU8sbUJBQW1CLGFBQWE7QUFDekMsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUNFLDJCQUEyQixjQUFnQyxLQUMzRCwwQkFBMEIsY0FBZ0M7QUFFOUQ7QUFFQSxTQUFTLDJCQUEyQixnQkFBdUQ7QUFyQzNGO0FBc0NFLE1BQUksQ0FBQyxnQkFBZ0I7QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUNFLGVBQWUsZUFBZSxhQUFhLEtBQzNDLGVBQWUsZUFBZSxRQUFRLEtBQ3RDLGVBQWUsZUFBZSxPQUFPLEtBQ3JDLFNBQU8sb0JBQWUsZ0JBQWYsbUJBQTRCLFdBQVU7QUFFakQ7QUFFQSxTQUFTLDBCQUEwQixnQkFBdUQ7QUFDeEYsTUFBSSxDQUFDLGdCQUFnQjtBQUNuQixXQUFPO0FBQUEsRUFDVDtBQUNBLFNBQ0UsZUFBZSxlQUFlLGFBQWEsS0FDM0MsZUFBZSxlQUFlLFFBQVEsS0FDdEMsZUFBZSxlQUFlLGFBQWEsS0FDM0MsT0FBTyxlQUFlLGdCQUFnQjtBQUUxQztBQUVPLFNBQVMsNEJBQ2QsZ0JBQzZDO0FBQzdDLE1BQUksQ0FBQyxnQkFBZ0I7QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUNFLGVBQWUsZUFBZSxhQUFhLEtBQzNDLGVBQWUsZUFBZSxRQUFRLEtBQ3RDLE9BQU8sZUFBZSxnQkFBZ0I7QUFFMUM7OztBQzVETyxTQUFTLG9CQUFvQixnQkFBc0Q7QUFDeEYsTUFBSSxPQUFPLG1CQUFtQixZQUFZLE9BQU8sbUJBQW1CLFVBQVU7QUFDNUUsV0FBTyxHQUFHLGNBQWM7QUFBQSxFQUMxQixXQUFXLDRCQUE0QixjQUFjLEdBQUc7QUFDdEQsV0FBTyxHQUFHLGVBQWUsWUFBWSxRQUFRLElBQUksZUFBZSxNQUFNO0FBQUEsRUFDeEUsV0FBVyxpQkFBaUIsY0FBYyxHQUFHO0FBQzNDLFdBQU8sR0FBRyxlQUFlLFlBQVksUUFBUSxJQUFJLGVBQWUsWUFBWSxNQUFNLElBQUksZUFBZSxZQUFZLFFBQVE7QUFBQSxFQUMzSCxPQUFPO0FBQ0wsVUFBTSxJQUFJLE1BQU0sc0RBQXNELGNBQWMsRUFBRTtBQUFBLEVBQ3hGO0FBQ0Y7QUFLTyxTQUFTLHdCQUF3QixnQkFBMkQ7QUFDakcsTUFBSSxpQkFBaUIsY0FBYyxHQUFHO0FBQ3BDLFdBQU8sZUFBZSxZQUFZO0FBQUEsRUFDcEMsT0FBTztBQUNMLFdBQU8sZUFBZTtBQUFBLEVBQ3hCO0FBQ0Y7QUFFTyxTQUFTLGdCQUNkLEdBQ0EsR0FDUztBQUNULE1BQUksTUFBTSxVQUFhLE1BQU0sUUFBVztBQUN0QyxXQUFPO0FBQUEsRUFDVDtBQUNBLE1BQUksaUJBQWlCLENBQUMsS0FBSyxpQkFBaUIsQ0FBQyxHQUFHO0FBQzlDLFdBQU8sRUFBRSxZQUFZLGFBQWEsRUFBRSxZQUFZO0FBQUEsRUFDbEQsT0FBTztBQUNMLFdBQU8sb0JBQW9CLENBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUFBLEVBQ3pEO0FBQ0Y7QUFLTyxTQUFTLHVCQUNkLGdCQUNBLFVBQ1M7QUFDVCxNQUFJLE9BQU8sYUFBYSxhQUFhO0FBQ25DLFdBQU87QUFBQSxFQUNUO0FBQ0EsTUFBSSxpQkFBaUIsY0FBYyxHQUFHO0FBQ3BDLFdBQU8sU0FBUztBQUFBLE1BQ2QsQ0FBQyx5QkFDQyxxQkFBcUIsWUFBWSxhQUFhLGVBQWUsWUFBWSxZQUN6RSxpQkFBaUIsb0JBQW9CLEtBQ3JDLHFCQUFxQixZQUFZLGFBQWEsZUFBZSxZQUFZO0FBQUEsSUFDN0U7QUFBQSxFQUNGLFdBQVcsNEJBQTRCLGNBQWMsR0FBRztBQUN0RCxXQUFPLFNBQVM7QUFBQSxNQUNkLENBQUMseUJBQ0MscUJBQXFCLFlBQVksYUFBYSxlQUFlLFlBQVksWUFDekUsNEJBQTRCLG9CQUFvQixLQUNoRCxxQkFBcUIsV0FBVyxlQUFlO0FBQUEsSUFDbkQ7QUFBQSxFQUNGLE9BQU87QUFDTCxXQUFPO0FBQUEsRUFDVDtBQUNGO0FBT08sU0FBUyx5QkFDZCxpQkFDQSxjQUNBO0FBSUEsU0FDRSw0QkFBNEIsZUFBZSxLQUMzQyxpQkFBaUIsWUFBWSxLQUM3QixhQUFhLFlBQVksYUFBYSxnQkFBZ0IsWUFBWSxZQUNsRSxhQUFhLFdBQVcsZ0JBQWdCO0FBRTVDOzs7QUZ6Rk8sU0FBUyxRQUFRLEdBQWdCO0FBQ3RDLFNBQU8sYUFBYSw0REFBZ0I7QUFDdEM7QUFFTyxTQUFTLFNBQVMsR0FBZ0I7QUFDdkMsU0FBTyxhQUFhLDZEQUFpQjtBQUN2QztBQUVPLElBQU0scUJBQXFCLENBQ2hDLGFBQ0EsWUFDRztBQUNILE1BQUksQ0FBQyxZQUFhO0FBQ2xCLFFBQU0sRUFBRSxjQUFjLE1BQU0sSUFBSTtBQUNoQyxNQUFJLFdBQVcsT0FBTztBQUNwQixRQUFJLGNBQWM7QUFDaEIsWUFBTSxPQUFPLE9BQU87QUFBQSxJQUN0QixPQUFPO0FBQ0wsWUFBTSxPQUFPLE9BQU87QUFBQSxJQUN0QjtBQUFBLEVBQ0Y7QUFDRjtBQUtPLFNBQVMsa0NBQ2QsVUFDQSxVQUNTO0FBQ1QsTUFBSSxhQUFhLFFBQVc7QUFDMUIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLFNBQVMsS0FBSyxDQUFDLG1CQUFtQixnQkFBZ0IsZ0JBQWdCLFFBQVEsQ0FBQztBQUNwRjtBQU9PLFNBQVMsb0JBQW9CO0FBQ2xDLFFBQU0sUUFBUSxTQUFTLGNBQWMsR0FBRztBQUN4QyxRQUFNLE1BQU0sUUFBUTtBQUNwQixRQUFNLE1BQU0sU0FBUztBQUVyQixRQUFNLFFBQVEsU0FBUyxjQUFjLEtBQUs7QUFDMUMsUUFBTSxNQUFNLFdBQVc7QUFDdkIsUUFBTSxNQUFNLE1BQU07QUFDbEIsUUFBTSxNQUFNLE9BQU87QUFDbkIsUUFBTSxNQUFNLGFBQWE7QUFDekIsUUFBTSxNQUFNLFFBQVE7QUFDcEIsUUFBTSxNQUFNLFNBQVM7QUFDckIsUUFBTSxNQUFNLFdBQVc7QUFDdkIsUUFBTSxZQUFZLEtBQUs7QUFFdkIsV0FBUyxLQUFLLFlBQVksS0FBSztBQUMvQixRQUFNLEtBQUssTUFBTTtBQUNqQixRQUFNLE1BQU0sV0FBVztBQUN2QixNQUFJLEtBQUssTUFBTTtBQUNmLE1BQUksT0FBTyxJQUFJO0FBQ2IsU0FBSyxNQUFNO0FBQUEsRUFDYjtBQUNBLFdBQVMsS0FBSyxZQUFZLEtBQUs7QUFDL0IsUUFBTSxpQkFBaUIsS0FBSztBQUM1QixTQUFPO0FBQ1Q7OztBR3ZFTyxTQUFTLFFBQWlCO0FBQy9CLFNBQU8sT0FBTyxhQUFhO0FBQzdCO0FBV08sU0FBUyxrQkFBMkI7QUFDekMsU0FBTyxNQUFNLElBQUksUUFBUSxLQUFLLE9BQU8sVUFBVSxTQUFTLElBQUk7QUFDOUQ7OztBQ1lPLFNBQVMsZ0JBQWdCLFNBQXVCO0FBQ3JELFlBQVUsbUJBQ0w7QUFHTCxRQUFNLFdBQVc7QUFDakIsUUFBTSxPQUFPO0FBQ2IsUUFBTSxLQUFLLElBQUk7QUFBQSxJQUNiO0FBQUEsSUFDQTtBQUFBLEVBQ0YsRUFBRTtBQUNGLFFBQU0sT0FBTztBQUNiLFFBQU0sU0FBUztBQUNmLFFBQU0sTUFBTTtBQUNaLFFBQU0sT0FBTztBQUNiLFFBQU0sT0FBTztBQUNiLFFBQU1BLFNBQVEsTUFBTSxRQUFRLFdBQVcsSUFBSSxnQkFBZ0IsRUFBRSxJQUFJLElBQUksR0FBRyxNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksR0FBRyxJQUFJO0FBRW5HLFNBQU8sUUFBUSxRQUFRLElBQUksT0FBTyxPQUFPQSxNQUFLLE1BQU0sR0FBRyxJQUFJLElBQUksT0FBT0EsUUFBTyxJQUFJO0FBQ25GOzs7QUMvQ0EsSUFBTSxRQUFRO0FBRWQsU0FBUyxrQkFBa0IsRUFBRSxNQUFNLElBQXlCLENBQUMsR0FBRztBQUM5RCxTQUFPLFFBQVEsSUFBSSxPQUFPLElBQUksS0FBSyxHQUFHLElBQUksSUFBSSxPQUFPLE9BQU8sR0FBRztBQUNqRTs7O0FDTnFEO0FBRXJELFNBQXNCLG9CQUNwQixRQUNBLE1BQ21DO0FBQUE7QUFDbkMsVUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLE1BQU0saUVBQWUsQ0FBQyxRQUFRLE1BQU07QUFBQSxNQUNuRCxXQUFXO0FBQUEsTUFDWCxZQUFZLENBQUMsd0RBQU0sQ0FBQyxDQUFDLEdBQUcsc0RBQUksQ0FBQyxHQUFHLHVEQUFLLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO0FBQUEsSUFDdkQsQ0FBQztBQUNELFdBQU8sRUFBRSxHQUFHLEVBQUU7QUFBQSxFQUNoQjtBQUFBO0FBRU8sU0FBUyxnQkFBZ0IsZUFBNEIsT0FBNEI7QUFDdEYsUUFBTSxZQUFZLENBQUMsY0FBYyxTQUFTLE1BQU0sTUFBYztBQUM5RCxTQUFPO0FBQ1Q7OztBQ1hPLElBQU0sdUJBQXVCLE1BQU07QUFDeEMsU0FBTztBQUFBLElBQ0wsT0FBTyxrQkFBa0I7QUFBQSxJQUN6QixLQUFLLGdCQUFnQixDQUFDLENBQUM7QUFBQSxFQUN6QjtBQUNGO0FBRU8sU0FBUyxTQUFvQyxPQUFlLFNBQVk7QUFDN0UsUUFBTSxVQUFVLE9BQU8sUUFBUSxPQUFPLEVBQ25DO0FBQUEsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsV0FDaEIsTUFBTSxLQUFLLE1BQU0sU0FBUyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxPQUFPLEdBQUcsUUFBUSxPQUFPO0FBQUEsTUFDN0Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsT0FBTyx3QkFBUztBQUFBLElBQ2xCLEVBQUU7QUFBQSxFQUNKLEVBQ0MsS0FBSyxFQUNMLEtBQUssQ0FBQyxHQUFHLE1BQU07QUFDZCxVQUFNLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDdEIsV0FBTyxNQUFNLElBQUksSUFBSSxFQUFFLFNBQVMsRUFBRTtBQUFBLEVBQ3BDLENBQUMsRUFDQSxPQUFPLENBQUMsRUFBRSxNQUFNLEdBQUcsR0FBRyxRQUFRO0FBQzdCLFFBQUksTUFBTSxFQUFHLFFBQU87QUFDcEIsVUFBTSxPQUFPLElBQUksSUFBSSxDQUFDO0FBQ3RCLFdBQU8sS0FBSyxRQUFRLEtBQUssUUFBUSxVQUFVO0FBQUEsRUFDN0MsQ0FBQztBQUVILFFBQU0sU0FBUyxDQUFDO0FBQ2hCLE1BQUksTUFBTTtBQUNWLGFBQVcsRUFBRSxNQUFNLFNBQVMsTUFBTSxLQUFLLFNBQVM7QUFDOUMsUUFBSSxRQUFRLElBQUssUUFBTyxLQUFLLE1BQU0sVUFBVSxLQUFLLEtBQUssQ0FBQztBQUN4RCxXQUFPLEtBQUssRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM3QixVQUFNLFFBQVEsUUFBUTtBQUFBLEVBQ3hCO0FBQ0EsTUFBSSxNQUFNLFNBQVMsSUFBSyxRQUFPLEtBQUssTUFBTSxVQUFVLEdBQUcsQ0FBQztBQUN4RCxTQUFPO0FBQ1Q7OztBQzFDNEM7QUFFckMsSUFBTSxpQ0FBaUM7QUFBQSxFQUM1QyxxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFFVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFFVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFFVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQUEsRUFDVixxREFBUyxDQUFDO0FBQ1o7QUFFTyxJQUFNLDJCQUEyQjtBQUFBLEVBQ3RDLEdBQUc7QUFBQSxFQUNILHFEQUFTLENBQUM7QUFBQSxFQUNWLHFEQUFTLENBQUM7QUFDWjtBQUVPLElBQU0seUJBQXlCO0FBQUEsRUFDcEMsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUNuQjtBQUVPLElBQU0sNkJBQTZCO0FBQUEsRUFDeEMsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUVqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQUEsRUFDakIsNERBQWdCLENBQUM7QUFBQSxFQUNqQiw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQ25CO0FBRU8sSUFBTSx1QkFBdUI7QUFBQSxFQUNsQyxHQUFHO0FBQUEsRUFDSCw0REFBZ0IsQ0FBQztBQUFBLEVBQ2pCLDREQUFnQixDQUFDO0FBQ25COzs7QUM5RE87QUFDYztBQUVkLElBQU0sTUFBTSwrQ0FBa0IsQ0FBQyxrQkFBa0I7QUFDeEQsSUFBSSxnQkFBZ0IsTUFBTTtBQVluQixTQUFTLFlBQVksT0FBaUIsVUFBOEIsQ0FBQyxHQUFTO0FBcEJyRjtBQXFCRSxNQUFJLFNBQVMsS0FBSztBQUNsQiw2REFBb0IsRUFBQyxhQUFRLDBCQUFSLFlBQWlDLEtBQUs7QUFDN0Q7QUFZTyxTQUFTLGdCQUFnQixXQUF5QixVQUFrQyxDQUFDLEdBQUc7QUFuQy9GO0FBb0NFLFFBQU0sa0JBQWtCLElBQUk7QUFFNUIsTUFBSSxnQkFBZ0IsQ0FBQyxZQUFZLGFBQWEsZUFBZTtBQUMzRCxVQUFNLFlBQVksZ0JBQWdCLFlBQVksYUFBYSxVQUFVO0FBRXJFLFVBQU0sV0FBVyxvREFBWSxDQUFDLFVBQVU7QUFDeEMsVUFBTSxVQUFVLFlBQVksZUFBZSxXQUFXLG9EQUFZLENBQUM7QUFFbkUsV0FBTyxDQUFDLEtBQUssWUFBNkM7QUFDeEQsVUFBSSxRQUFTLFdBQVUsS0FBSyxPQUFPO0FBQUEsVUFDOUIsV0FBVSxHQUFHO0FBQ2xCLFVBQUksU0FBUztBQUNYLGtCQUFVLFVBQVUsS0FBSyxPQUFPO0FBQUEsTUFDbEM7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNBLE1BQUksU0FBUyxJQUFJLFNBQVMsQ0FBQztBQUMzQixpRUFBd0IsRUFBQyxhQUFRLDhCQUFSLFlBQXFDLFNBQVM7QUFDekU7OztBQ0hPLElBQU0sZUFBdUM7QUFBQSxFQUNsRDtBQUFBLElBQ0UsU0FBUztBQUFBLElBQ1QsTUFBTTtBQUFBLEVBQ1I7QUFBQSxFQUNBO0FBQUEsSUFDRSxTQUFTO0FBQUEsSUFDVCxNQUFNO0FBQUEsSUFDTixhQUFhO0FBQUEsRUFDZjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFNBQVM7QUFBQSxJQUNULE1BQU07QUFBQSxJQUNOLGFBQWE7QUFBQSxFQUNmO0FBQUEsRUFDQTtBQUFBLElBQ0UsU0FBUztBQUFBLElBQ1QsTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLEVBQ1o7QUFBQSxFQUNBO0FBQUEsSUFDRSxTQUFTO0FBQUEsSUFDVCxNQUFNO0FBQUEsSUFDTixVQUFVO0FBQUEsRUFDWjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFNBQVM7QUFBQSxJQUNULE1BQU07QUFBQSxJQUNOLFVBQVU7QUFBQSxFQUNaO0FBQUEsRUFDQTtBQUFBLElBQ0UsU0FBUztBQUFBLElBQ1QsTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLEVBQ1o7QUFDRjtBQUVPLFNBQVMsaUJBQ2QsbUJBQ0Esa0JBQ0EsT0FDQSxRQUNnQjtBQUNoQixNQUFJLGtCQUFrQixTQUFTLEdBQUc7QUFDaEMsVUFBTSxJQUFJLE1BQU0sdURBQXVEO0FBQUEsRUFDekU7QUFDQSxRQUFNLFVBQVUsK0JBQStCLGlCQUFpQjtBQUNoRSxNQUFJLFNBQVMsS0FBSyxVQUFVLEdBQUc7QUFDN0IsV0FBTyxRQUFRLENBQUM7QUFBQSxFQUNsQjtBQUVBLE1BQUkscUJBQXFCO0FBQ3pCLFFBQU0sdUJBQXVCLFFBQVEsU0FBUyxJQUFJLGNBQWM7QUFDaEUsTUFBSSxTQUFTLFFBQVEsS0FBSyxDQUFDLFNBQVMsT0FBTyxlQUFlO0FBQ3hELHlCQUFxQjtBQUNyQixVQUFNLDBCQUNKLFdBQVcsVUFBVSxDQUFDLEdBQUcsTUFBTTtBQUM3QixZQUFNLGtCQUFrQixDQUFDLEVBQUUsZUFBZSxFQUFFLGdCQUFnQjtBQUM1RCxZQUFNLDRCQUE0QixJQUFJO0FBQ3RDLFlBQU0scUNBQXFDLEVBQUUsYUFBYSxRQUFRO0FBQ2xFLGFBQU8sNkJBQTZCLHNDQUFzQztBQUFBLElBQzVFLENBQUMsTUFBTTtBQUNULFdBQU8sUUFBUSxZQUFZLG9CQUFvQixDQUFDO0FBQUEsRUFDbEQsQ0FBQztBQUNELE1BQUksV0FBVyxRQUFXO0FBQ3hCLGFBQVMsUUFBUSxRQUFRLFNBQVMsQ0FBQztBQUNuQyxRQUFJLFFBQVE7QUFDVixVQUFJO0FBQUEsUUFDRiwwQ0FBMEMsZ0JBQWdCLG1CQUFtQixLQUFLLElBQUksTUFBTSwwQ0FBMEMsTUFBTTtBQUFBLE1BQzlJO0FBQUEsSUFDRixPQUFPO0FBQ0wsWUFBTSxJQUFJLE1BQU0scUNBQXFDO0FBQUEsSUFDdkQ7QUFBQSxFQUNGO0FBR0EsTUFBSSxRQUFRLE9BQU8sWUFBWSxTQUFTLE9BQU8sV0FBVztBQUV4RCxRQUFJLHFCQUFxQixHQUFHO0FBQzFCLFlBQU0sZ0JBQWdCLFFBQVEscUJBQXFCLENBQUM7QUFDcEQsZUFBUztBQUFBLFFBQ1AsUUFBUSxNQUFNLEdBQUcsa0JBQWtCO0FBQUEsUUFDbkMsY0FBYztBQUFBLFFBQ2Q7QUFBQSxRQUNBO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0EsU0FBTztBQUNUO0FBS08sU0FBUywrQkFBK0IsU0FBbUQ7QUFDaEcsU0FBTyxDQUFDLEdBQUcsT0FBTyxFQUNmLElBQUksQ0FBQyxXQUFXO0FBbkpyQjtBQW9KTSxXQUFPO0FBQUEsTUFDTCxNQUFNLEdBQUcsT0FBTyxPQUFPLElBQUksT0FBTyxJQUFJO0FBQUEsTUFDdEMsU0FBUyxPQUFPO0FBQUEsTUFDaEIsTUFBTSxPQUFPO0FBQUEsTUFDYixVQUFVLE9BQU8sVUFBVSxPQUFPO0FBQUEsTUFDbEMsV0FBVSxZQUFPLGFBQVAsWUFBbUI7QUFBQSxNQUM3QixZQUFXLFlBQU8sY0FBUCxZQUFvQjtBQUFBLE1BQy9CLGFBQWEsT0FBTztBQUFBLElBQ3RCO0FBQUEsRUFDRixDQUFDLEVBQ0EsS0FBSyxDQUFDLEdBQUcsTUFBTTtBQUNkLFFBQUksRUFBRSxhQUFhLEVBQUUsVUFBVTtBQUM3QixhQUFPLEVBQUUsV0FBVyxFQUFFO0FBQUEsSUFDeEIsV0FBVyxFQUFFLGFBQWEsS0FBSyxFQUFFLGFBQWEsR0FBRztBQUMvQyxhQUFPLEVBQUUsV0FBVyxFQUFFO0FBQUEsSUFDeEIsV0FBVyxFQUFFLGNBQWMsS0FBSyxFQUFFLGNBQWMsR0FBRztBQUNqRCxhQUFPLEVBQUUsWUFBWSxFQUFFO0FBQUEsSUFDekIsT0FBTztBQUNMLGFBQU87QUFBQSxJQUNUO0FBQUEsRUFDRixDQUFDO0FBQ0w7OztBQ3pLTyxTQUFTLGNBQWlCLE1BQWMsTUFBc0I7QUFDbkUsUUFBTSxjQUFjLElBQUksSUFBSSxJQUFJO0FBQ2hDLGFBQVcsUUFBUSxNQUFNO0FBQ3ZCLGdCQUFZLE9BQU8sSUFBSTtBQUFBLEVBQ3pCO0FBQ0EsU0FBTztBQUNUOzs7QUNITyxTQUFTLHdCQUFpQztBQUMvQyxTQUNFLE9BQU8sY0FBYyxlQUNyQixVQUFVLGdCQUNWLENBQUMsQ0FBQyxVQUFVLGFBQWE7QUFFN0I7OztBQ0ZPLFNBQVMsK0JBQ2QsVUFDQSxXQUNBLFNBQVMsR0FDVDtBQUNBLFNBQU8sU0FBUyxPQUFPLENBQUMsWUFBWTtBQVp0QztBQWFJLFVBQU0sZUFBZSxDQUFDLENBQUMsVUFBVTtBQUNqQyxVQUFNLG9CQUFtQixlQUFVLGlCQUFWLFlBQTBCLFlBQVksYUFBYSxZQUFZLElBQUk7QUFFNUYsVUFBTSxtQkFBbUIsZUFDckIsS0FBSyxJQUFJLFFBQVEsMEJBQTBCLFFBQVEsU0FBUyxJQUM1RCxRQUFRO0FBRVosVUFBTSxrQkFBa0IsU0FBUyxRQUFRLFVBQVUsUUFBUTtBQUMzRCxXQUNFLG9CQUFvQixvQkFBb0Isb0JBQW9CLG1CQUFtQjtBQUFBLEVBRW5GLENBQUM7QUFDSDtBQUVPLFNBQVMsaUNBQ2QsU0FDQSxZQUM4QjtBQTlCaEM7QUErQkUsU0FBTyxpQ0FDRixVQURFO0FBQUEsSUFFTCwyQkFBMEIsZ0JBQVcsaUJBQVgsWUFBMkI7QUFBQSxJQUNyRCxZQUFZLFdBQVc7QUFBQSxFQUN6QjtBQUNGO0FBS08sU0FBUyxlQUNkLGNBQ0EsYUFDQSxZQUNBO0FBQ0EsU0FBTyxDQUFDLEdBQUcsY0FBYyxHQUFHLFdBQVcsRUFDcEMsWUFBWSxDQUFDLEtBQUssWUFBWTtBQUM3QixRQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLE9BQU8sUUFBUSxFQUFFLEdBQUc7QUFDN0MsVUFBSSxRQUFRLE9BQU87QUFBQSxJQUNyQjtBQUNBLFdBQU87QUFBQSxFQUNULEdBQUcsQ0FBQyxDQUFhLEVBQ2hCLE1BQU0sSUFBSSxVQUFVO0FBQ3pCO0FBRU8sU0FBUyx3QkFDZCxZQUNBLFdBQ0E7QUFDQSxNQUFJLFVBQVUsV0FBVyxXQUFXLFFBQVE7QUFDMUMsV0FBTztBQUFBLEVBQ1Q7QUFDQSxTQUFPLENBQUMsVUFBVSxNQUFNLENBQUMsZUFBZTtBQUN0QyxXQUFPLFdBQVc7QUFBQSxNQUNoQixDQUFDLGdCQUNDLFlBQVksT0FBTyxXQUFXLE1BQzlCLFlBQVksU0FBUyxXQUFXLFFBQ2hDLFlBQVksVUFBVSxXQUFXLFNBQ2pDLFlBQVksYUFBYSxXQUFXLFlBQ3BDLFlBQVksY0FBYyxXQUFXLGFBQ3JDLFlBQVksWUFBWSxXQUFXO0FBQUEsSUFDdkM7QUFBQSxFQUNGLENBQUM7QUFDSDs7O0FDcEVPLElBQU0sb0JBQThCLENBQUM7QUFTckMsSUFBTSx1QkFBb0M7QUFBQSxFQUMvQyxVQUFVO0FBQUEsRUFDVixnQkFBZ0I7QUFBQSxFQUNoQixjQUFjO0FBQ2hCO0FBUU8sU0FBUyxtQkFBbUIsUUFBZ0U7QUFDakcsU0FBTyxPQUFPLFdBQVc7QUFDM0I7QUFFTyxTQUFTLHFCQUFxQixTQUE0RDtBQUMvRixTQUNFLE1BQU0sUUFBUSxPQUFPLEtBQ3BCLFFBQXFDLE9BQU8sa0JBQWtCLEVBQUUsU0FBUztBQUU5RTs7O0FDcENzQjs7O0FDQ0E7QUFJZixTQUFTLDZCQUNkLEdBQ0EsR0FDUTtBQUNSLFNBQU8sRUFBRSxhQUFhLEVBQUU7QUFDMUI7QUFFTyxTQUFTLDZCQUNkLEdBQ0EsR0FDUTtBQUNSLE1BQUksRUFBRSxlQUFlLEVBQUUsWUFBWTtBQUNqQyxXQUFPO0FBQUEsRUFDVCxPQUFPO0FBQ0wsV0FBTyxFQUFFLGFBQWEsS0FBSztBQUFBLEVBQzdCO0FBQ0Y7QUFFTyxTQUFTLCtCQUNkLEdBQ0EsR0FDUTtBQTFCVjtBQTJCRSxNQUFJLEVBQUUsZ0JBQWdCLFVBQWEsRUFBRSxnQkFBZ0IsUUFBVztBQUM5RCxhQUFRLGFBQUUsZ0JBQUYsbUJBQWUsY0FBZixZQUE0QixPQUFNLGFBQUUsZ0JBQUYsbUJBQWUsY0FBZixZQUE0QjtBQUFBLEVBQ3hFLE9BQU87QUFDTCxXQUFPO0FBQUEsRUFDVDtBQUNGO0FBRU8sU0FBUywyQkFDZCxHQUNBLEdBQ0E7QUFyQ0Y7QUFzQ0UsV0FBUSxhQUFFLGFBQUYsbUJBQVksY0FBWixZQUF5QixPQUFNLGFBQUUsYUFBRixtQkFBWSxjQUFaLFlBQXlCO0FBQ2xFO0FBRU8sU0FBUywwQkFDZCxHQUNBLEdBQ0E7QUFDQSxNQUFJLGlCQUFpQixDQUFDLEdBQUc7QUFDdkIsUUFBSSxpQkFBaUIsQ0FBQyxHQUFHO0FBQ3ZCLGFBQU87QUFBQSxJQUNULE9BQU87QUFDTCxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0YsV0FBVyxpQkFBaUIsQ0FBQyxHQUFHO0FBQzlCLFdBQU87QUFBQSxFQUNULE9BQU87QUFDTCxXQUFPO0FBQUEsRUFDVDtBQUNGO0FBNEJPLFNBQVMsK0JBQ2QsR0FDQSxHQUNBO0FBQ0EsUUFBTSxTQUFTLEVBQUUsWUFBWTtBQUM3QixRQUFNLFNBQVMsRUFBRSxZQUFZO0FBRTdCLE1BQUksV0FBVyxRQUFRO0FBQ3JCLFFBQUksUUFBUTtBQUNWLGFBQU87QUFBQSxJQUNULE9BQU87QUFDTCxhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0YsT0FBTztBQUNMLFdBQU87QUFBQSxFQUNUO0FBQ0Y7OztBRDlFTyxTQUFTLG9CQUNkLFFBQytCO0FBQy9CLFFBQU0sY0FBNkMsQ0FBQztBQUNwRCxRQUFNLG9CQUFtRCxDQUFDO0FBQzFELFFBQU0sZUFBOEMsQ0FBQztBQUNyRCxRQUFNLGtCQUFpRCxDQUFDO0FBRXhELFNBQU8sUUFBUSxDQUFDLGFBQWE7QUFDM0IsUUFBSSxTQUFTLFlBQVksV0FBVyxTQUFTLFdBQVdFLGlEQUFBRCxDQUFNLE9BQU8sUUFBUTtBQUMzRSxrQkFBWSxLQUFLLFFBQVE7QUFBQSxJQUMzQixXQUFXLFNBQVMsV0FBV0MsaURBQUFELENBQU0sT0FBTyxhQUFhO0FBQ3ZELHdCQUFrQixLQUFLLFFBQVE7QUFBQSxJQUNqQyxXQUFXLFNBQVMsV0FBV0MsaURBQUFELENBQU0sT0FBTyxRQUFRO0FBQ2xELG1CQUFhLEtBQUssUUFBUTtBQUFBLElBQzVCLE9BQU87QUFDTCxzQkFBZ0IsS0FBSyxRQUFRO0FBQUEsSUFDL0I7QUFBQSxFQUNGLENBQUM7QUFFRCxRQUFNLDBCQUEwQixzQkFBc0IsaUJBQWlCO0FBQ3ZFLFFBQU0scUJBQXFCLGlCQUFpQixZQUFZO0FBRXhELFNBQU8sQ0FBQyxHQUFHLGFBQWEsR0FBRyx5QkFBeUIsR0FBRyxvQkFBb0IsR0FBRyxlQUFlO0FBQy9GO0FBU0EsU0FBUyxzQkFDUCxtQkFDK0I7QUFDL0IsUUFBTSxvQkFBbUQsQ0FBQztBQUMxRCxRQUFNLHFCQUFvRCxDQUFDO0FBRTNELG9CQUFrQixRQUFRLENBQUMsYUFBYTtBQUN0QyxRQUFJLFNBQVMsWUFBWSxTQUFTO0FBQ2hDLHdCQUFrQixLQUFLLFFBQVE7QUFBQSxJQUNqQyxPQUFPO0FBQ0wseUJBQW1CLEtBQUssUUFBUTtBQUFBLElBQ2xDO0FBQUEsRUFDRixDQUFDO0FBRUQsb0JBQWtCLEtBQUssQ0FBQyxHQUFHLE1BQU0sMkJBQTJCLEVBQUUsYUFBYSxFQUFFLFdBQVcsQ0FBQztBQUN6RixxQkFBbUIsS0FBSyxDQUFDLEdBQUcsTUFBTSwyQkFBMkIsRUFBRSxhQUFhLEVBQUUsV0FBVyxDQUFDO0FBRTFGLFFBQU0sNkJBQTZCLENBQUMsR0FBRyxvQkFBb0IsR0FBRyxpQkFBaUI7QUFDL0UsU0FBTztBQUNUO0FBRUEsU0FBUyxpQkFDUCx1QkFDK0I7QUFDL0IsUUFBTSxvQkFBbUQsQ0FBQztBQUMxRCxRQUFNLHFCQUFvRCxDQUFDO0FBRTNELHdCQUFzQixRQUFRLENBQUMsYUFBYTtBQUMxQyxRQUFJLFNBQVMsWUFBWSxTQUFTO0FBQ2hDLHdCQUFrQixLQUFLLFFBQVE7QUFBQSxJQUNqQyxPQUFPO0FBQ0wseUJBQW1CLEtBQUssUUFBUTtBQUFBLElBQ2xDO0FBQUEsRUFDRixDQUFDO0FBRUQscUJBQW1CLEtBQUssQ0FBQyxHQUFHLE1BQU07QUFFaEMsUUFBSSxFQUFFLFlBQVksY0FBYyxFQUFFLFlBQVksWUFBWTtBQUN4RCxhQUFPLDZCQUE2QixFQUFFLGFBQWEsRUFBRSxXQUFXO0FBQUEsSUFDbEU7QUFHQSxRQUFJLEVBQUUsWUFBWSxlQUFlLEVBQUUsWUFBWSxZQUFZO0FBQ3pELGFBQU8sNkJBQTZCLEVBQUUsYUFBYSxFQUFFLFdBQVc7QUFBQSxJQUNsRTtBQUdBLFFBQUksRUFBRSxZQUFZLGdCQUFnQixFQUFFLFlBQVksYUFBYTtBQUMzRCxhQUFPLCtCQUErQixFQUFFLGFBQWEsRUFBRSxXQUFXO0FBQUEsSUFDcEU7QUFHQSxRQUFJLGlCQUFpQixDQUFDLE1BQU0saUJBQWlCLENBQUMsR0FBRztBQUMvQyxhQUFPLDBCQUEwQixHQUFHLENBQUM7QUFBQSxJQUN2QztBQUdBLFFBQUksRUFBRSxZQUFZLG9CQUFvQixFQUFFLFlBQVksaUJBQWlCO0FBQ25FLGFBQU8sK0JBQStCLEdBQUcsQ0FBQztBQUFBLElBQzVDO0FBR0EsV0FBTywyQkFBMkIsRUFBRSxhQUFhLEVBQUUsV0FBVztBQUFBLEVBQ2hFLENBQUM7QUFFRCxTQUFPLENBQUMsR0FBRyxtQkFBbUIsR0FBRyxrQkFBa0I7QUFDckQ7OztBRXhIaUM7QUFnQjFCLFNBQVMsaUJBQWlCLGNBQTRDO0FBQzNFLFFBQU0scUJBQXFCLENBQUMsR0FBRyxZQUFZO0FBQzNDLHFCQUFtQixLQUFLLENBQUMsR0FBRyxNQUFNO0FBRWhDLFFBQUksRUFBRSxjQUFjLEVBQUUsWUFBWTtBQUNoQyxhQUFPLDZCQUE2QixHQUFHLENBQUM7QUFBQSxJQUMxQztBQUdBLFFBQUksRUFBRSxlQUFlLEVBQUUsWUFBWTtBQUNqQyxhQUFPLDZCQUE2QixHQUFHLENBQUM7QUFBQSxJQUMxQztBQUdBLFFBQUksRUFBRSxnQkFBZ0IsRUFBRSxhQUFhO0FBQ25DLGFBQU8sK0JBQStCLEdBQUcsQ0FBQztBQUFBLElBQzVDO0FBR0EsVUFBTSxTQUFTLEVBQUUsdUJBQXVCLE9BQU87QUFDL0MsVUFBTSxTQUFTLEVBQUUsdUJBQXVCLE9BQU87QUFDL0MsUUFBSSxXQUFXLFFBQVE7QUFDckIsVUFBSSxRQUFRO0FBQ1YsZUFBTztBQUFBLE1BQ1QsT0FBTztBQUNMLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUdBLFdBQU8sMkJBQTJCLEdBQUcsQ0FBQztBQUFBLEVBQ3hDLENBQUM7QUFDRCxRQUFNLG1CQUFtQixtQkFBbUIsS0FBSyxDQUFDLE1BQU0sYUFBYUcsNERBQWdCO0FBQ3JGLE1BQUksa0JBQWtCO0FBQ3BCLFVBQU0sV0FBVyxtQkFBbUIsUUFBUSxnQkFBZ0I7QUFDNUQsUUFBSSxZQUFZLEdBQUc7QUFDakIseUJBQW1CLE9BQU8sVUFBVSxDQUFDO0FBQ3JDLFVBQUksbUJBQW1CLFNBQVMsR0FBRztBQUNqQywyQkFBbUIsT0FBTyxHQUFHLEdBQUcsZ0JBQWdCO0FBQUEsTUFDbEQsT0FBTztBQUNMLDJCQUFtQixLQUFLLGdCQUFnQjtBQUFBLE1BQzFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQ1Q7OztBQzlETyxTQUFTLE1BQVMsT0FBaUIsTUFBYztBQUN0RCxTQUFPLE1BQU07QUFBQSxJQUNYLENBQUMsS0FBSyxNQUFNLFFBQVE7QUFDbEIsYUFBTyxNQUFNLFNBQVMsSUFDbEIsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFDZixDQUFDLEdBQUcsSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLE1BQU0sRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxJQUN2RDtBQUFBLElBQ0EsQ0FBQztBQUFBLEVBQ0g7QUFDRjtBQUVPLFNBQVMsSUFBVSxJQUFjLElBQWM7QUFDcEQsUUFBTSxlQUFlLEtBQUssSUFBSSxHQUFHLFFBQVEsR0FBRyxNQUFNO0FBQ2xELFNBQU8sSUFBSSxNQUFNLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9FO0FBRU8sU0FBUyxhQUFnQixJQUFjLElBQWMsSUFBd0I7QUFDbEYsU0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMvRDs7O0FDWnFEO0FBNkU5QyxTQUFTLHdCQUFpRCxNQUFxQjtBQUNwRixTQUFPLEtBQUssSUFBSSxDQUFDLFNBQVM7QUFDeEIsUUFBSSxPQUFPLFNBQVMsWUFBWSxPQUFPLFNBQVMsVUFBVTtBQUN4RCxhQUFPLEdBQUcsSUFBSTtBQUFBLElBQ2hCLE9BQU87QUFDTCxhQUFPLG9CQUFvQixJQUFJO0FBQUEsSUFDakM7QUFBQSxFQUNGLENBQUM7QUFDSDs7O0FDeEVPLFNBQVMsaUJBQTBDLE9BQVksTUFBNkI7QUFDakcsU0FBTztBQUFBLElBQ0wsU0FBUyxhQUFhLE9BQU8sTUFBTSxtQkFBbUI7QUFBQSxJQUN0RCxPQUFPLGFBQWEsTUFBTSxPQUFPLG1CQUFtQjtBQUFBLEVBQ3REO0FBQ0Y7QUFFQSxTQUFTLGtCQUFxQixTQUFvQztBQUNoRSxTQUFPLFFBQVEsTUFBTSxXQUFXLEtBQUssUUFBUSxRQUFRLFdBQVc7QUFDbEU7QUFFTyxTQUFTLFVBQ2QsZ0JBQ0EsaUJBQ1E7QUFDUixRQUFNLGlCQUFpQixnQkFBZ0I7QUFBQSxJQUNyQyxDQUFDLG9CQUNDLG9CQUFvQixlQUFlLE1BQU0sb0JBQW9CLGNBQWM7QUFBQSxFQUMvRTtBQUNBLE1BQUksbUJBQW1CLElBQUk7QUFDekIsVUFBTSxJQUFJO0FBQUEsTUFDUixrQ0FBa0M7QUFBQSxRQUNoQztBQUFBLE1BQ0YsQ0FBQyxXQUFXLHdCQUF3QixlQUFlLENBQUM7QUFBQSxJQUN0RDtBQUFBLEVBQ0Y7QUFDQSxTQUFPO0FBQ1Q7QUFHTyxTQUFTLFVBQ2QsYUFDQSxVQUNBLGlCQUNLO0FBQ0wsUUFBTSxpQkFBaUIsVUFBVSxhQUFhLGVBQWU7QUFDN0QsUUFBTSxtQkFBbUIsVUFBVSxVQUFVLGVBQWU7QUFFNUQsa0JBQWdCLE9BQU8sZ0JBQWdCLEdBQUcsUUFBUTtBQUNsRCxrQkFBZ0IsT0FBTyxrQkFBa0IsR0FBRyxXQUFXO0FBRXZELFNBQU87QUFDVDtBQUVPLFNBQVMsU0FBa0MsWUFBZSxNQUFnQjtBQUMvRSxRQUFNLHVCQUF1QixVQUFVLFlBQVksSUFBSTtBQUV2RCxPQUFLLE9BQU8sc0JBQXNCLENBQUM7QUFDbkMsU0FBTztBQUNUO0FBRUEsU0FBUyxRQUFpQyxXQUFjLE1BQWdCO0FBQ3RFLFNBQU8sQ0FBQyxHQUFHLE1BQU0sU0FBUztBQUM1QjtBQUVPLFNBQVMsZ0JBQW1CLE1BQVcsbUJBQXVDO0FBQ25GLFFBQU0sUUFBUSxNQUFNLE1BQU0saUJBQWlCO0FBQzNDLFNBQU87QUFDVDtBQUdPLFNBQVMsWUFDZCxhQUNBLFVBQ0EsZ0JBQ0s7QUFDTCxNQUFJLGNBQW1CLFlBQVksYUFBYSxRQUFRO0FBRXhELE1BQUksWUFBWSxTQUFTLFNBQVMsUUFBUTtBQUV4QyxVQUFNLGFBQWEsYUFBYSxVQUFVLGFBQWEsbUJBQW1CO0FBQzFFLGtCQUFjLENBQUMsR0FBRyxhQUFhLEdBQUcsVUFBVTtBQUFBLEVBQzlDO0FBQ0EsUUFBTSxlQUFlLGdCQUFnQixhQUFhLGNBQWM7QUFDaEUsUUFBTSxZQUFZLGdCQUFnQixVQUFVLGNBQWM7QUFFMUQsTUFBSSxjQUFjLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxhQUFhLFFBQVEsR0FBRyxjQUFjO0FBQzNFLFFBQUksZUFBZSxVQUFVO0FBRTNCLFlBQU0sY0FBYyxnQkFBZ0IsYUFBYSxjQUFjLEVBQUUsU0FBUztBQUMxRSxZQUFNLFVBQVUsaUJBQWlCLGFBQWEsUUFBUTtBQUV0RCxVQUFJLGtCQUFrQixPQUFPLEdBQUc7QUFDOUIsWUFBSTtBQUFBLFVBQ0Ysb0NBQW9DLFNBQVMsY0FBYztBQUFBLFlBQ3pEO0FBQUEsVUFDRixDQUFDLFdBQVcsd0JBQXdCLFFBQVEsQ0FBQztBQUFBLFVBQzdDLEVBQUUsUUFBUTtBQUFBLFFBQ1o7QUFFQSxZQUFJLFFBQVEsTUFBTSxXQUFXLFFBQVEsUUFBUSxRQUFRO0FBQ25ELGNBQUksUUFBUSxPQUFPLFFBQVEsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLE9BQU8sT0FBTyxNQUFNO0FBQ2hFLGdCQUFJLFNBQVMsU0FBUztBQUNwQiw0QkFBYyxVQUFhLE9BQU8sU0FBUyxXQUFXO0FBQUEsWUFDeEQsT0FBTztBQUNMLG9CQUFNLElBQUk7QUFBQSxnQkFDUixzRUFBc0UsS0FBSyxLQUFLLE9BQU87QUFBQSxjQUN6RjtBQUFBLFlBQ0Y7QUFBQSxVQUNGLENBQUM7QUFBQSxRQUNIO0FBRUEsWUFBSSxRQUFRLE1BQU0sV0FBVyxLQUFLLFFBQVEsUUFBUSxTQUFTLEdBQUc7QUFDNUQsa0JBQVEsUUFBUSxRQUFRLENBQUMsU0FBUztBQUNoQywwQkFBYyxTQUFZLE1BQU0sV0FBVztBQUFBLFVBQzdDLENBQUM7QUFBQSxRQUNIO0FBRUEsWUFBSSxRQUFRLE1BQU0sU0FBUyxLQUFLLFFBQVEsUUFBUSxXQUFXLEdBQUc7QUFDNUQsa0JBQVEsTUFBTSxRQUFRLENBQUMsU0FBUztBQUM5QiwwQkFBYyxRQUFXLE1BQU0sV0FBVztBQUFBLFVBQzVDLENBQUM7QUFBQSxRQUNIO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFFRCxNQUFJLFlBQVksU0FBUyxTQUFTLFFBQVE7QUFFeEMsVUFBTSxlQUFlLGFBQWEsYUFBYSxVQUFVLG1CQUFtQjtBQUM1RSxrQkFBYyxZQUFZO0FBQUEsTUFDeEIsQ0FBQyxTQUFTLENBQUMsYUFBYSxJQUFJLG1CQUFtQixFQUFFLFNBQVMsb0JBQW9CLElBQUksQ0FBQztBQUFBLElBQ3JGO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFDVDtBQVNBLFNBQVMsWUFBcUMsYUFBa0IsVUFBb0I7QUFDbEYsU0FBTyxZQUFZLElBQUksQ0FBQyxnQkFBZ0I7QUFDdEMsVUFBTSx1QkFBdUIsU0FBUztBQUFBLE1BQ3BDLENBQUM7QUFBQTtBQUFBLFFBRUMsb0JBQW9CLFdBQVcsTUFBTSxvQkFBb0IsUUFBUTtBQUFBLFFBRWhFLE9BQU8sZ0JBQWdCLFlBQ3RCLDRCQUE0QixXQUFXLEtBQ3ZDLGlCQUFpQixRQUFRLEtBQ3pCLHlCQUF5QixhQUFhLFFBQVE7QUFBQTtBQUFBLElBQ3BEO0FBQ0EsV0FBTyxzREFBd0I7QUFBQSxFQUNqQyxDQUFDO0FBQ0g7OztBQ2hLc0I7QUFFa0I7OztBQ1JXO0FBSUc7OztBQ05oQztBQUNTOzs7QUNVeEIsU0FBUyxZQUE0QyxxQkFBd0I7QUFDbEYsU0FBTyxHQUFHLFNBQVMsSUFBSSxtQkFBbUI7QUFDNUM7OztBRE5PLFNBQVMsZ0JBQWdCLGlCQUFrQztBQUNoRSxRQUFNLGFBQWEscUJBQXFCLGVBQWU7QUFDdkQsUUFBTSxnQkFBZ0Isd0JBQXdCLGdCQUFnQixXQUFXLEVBQUU7QUFBQSxJQUN6RSx5Q0FBRyxDQUFDLE1BQU07QUFDUixhQUFPLHFCQUFxQixlQUFlO0FBQUEsSUFDN0MsQ0FBQztBQUFBLElBQ0QsK0NBQVMsQ0FBQyxVQUFVO0FBQUEsRUFDdEI7QUFDQSxRQUFNLFlBQW9CO0FBQUEsSUFDeEIsZ0JBQWdCLFdBQVdhLGlEQUFBaEIsQ0FBTSxPQUFPLFVBQ3RDLGdCQUFnQixXQUFXZ0IsaURBQUFoQixDQUFNLE9BQU8sY0FDdEMsNEJBQ0E7QUFBQSxFQUNOO0FBQ0EsU0FBTyxFQUFFLFdBQVcsY0FBYztBQUNwQztBQUVPLFNBQVMscUJBQXFCLFNBQTBCO0FBQzdELE1BQUksaUJBQWlCLE9BQU8sR0FBRztBQUM3QixXQUFPLFFBQVE7QUFBQSxFQUNqQixPQUFPO0FBQ0wsVUFBTSxFQUFFLFFBQVEsTUFBTSxZQUFZLElBQUk7QUFDdEMsUUFBSSxVQUFVLE1BQU07QUFDbEIsYUFBTyxZQUNKLHFCQUFxQixFQUNyQixLQUFLLENBQUMsUUFBUSxJQUFJLFdBQVcsVUFBVSxJQUFJLGNBQWMsSUFBSTtBQUFBLElBQ2xFLFdBQVcsTUFBTTtBQUNmLGFBQU8sWUFBWSwwQkFBMEIsSUFBSTtBQUFBLElBQ25ELFdBQVcsUUFBUTtBQUNqQixhQUFPLFlBQVksb0JBQW9CLE1BQU07QUFBQSxJQUMvQyxPQUFPO0FBQ0wsWUFBTSxJQUFJLE1BQU0scURBQXFEO0FBQUEsSUFDdkU7QUFBQSxFQUNGO0FBQ0Y7OztBRXhDOEU7QUFFckI7QUFJbEQsU0FBUyxrQkFBa0IsU0FBZSxRQUF1QztBQUN0RixRQUFNLGFBQWEsSUFBSSw0Q0FBVSxDQUFPLENBQUMsY0FBYztBQUNyRCxVQUFNLGVBQWUsTUFBTTtBQUN6QixnQkFBVSxLQUFLLElBQUk7QUFBQSxJQUNyQjtBQUVBLFdBQU8sUUFBUSxDQUFDLFFBQVE7QUFDdEIsV0FBSyxHQUFHLEtBQUssWUFBWTtBQUFBLElBQzNCLENBQUM7QUFFRCxVQUFNLGNBQWMsTUFBTTtBQUN4QixhQUFPLFFBQVEsQ0FBQyxRQUFRO0FBQ3RCLGFBQUssSUFBSSxLQUFLLFlBQVk7QUFBQSxNQUM1QixDQUFDO0FBQUEsSUFDSDtBQUNBLFdBQU87QUFBQSxFQUNULENBQUMsRUFBRSxLQUFLLCtDQUFBSSxDQUFVLElBQUksQ0FBQztBQUV2QixTQUFPO0FBQ1Q7QUFFTyxTQUFTLGtCQUF1QyxNQUFZLE9BQVU7QUFDM0UsUUFBTSxhQUFhLElBQUksNENBQVUsQ0FBb0MsQ0FBQyxjQUFjO0FBQ2xGLFVBQU0sU0FBUyxJQUFJLFdBQThDO0FBQy9ELGdCQUFVLEtBQUssTUFBTTtBQUFBLElBQ3ZCO0FBQ0EsU0FBSyxHQUFHLE9BQW1DLE1BQU07QUFFakQsVUFBTSxjQUFjLE1BQU07QUFDeEIsV0FBSyxJQUFJLE9BQW1DLE1BQU07QUFBQSxJQUNwRDtBQUNBLFdBQU87QUFBQSxFQUNULENBQUM7QUFFRCxTQUFPO0FBQ1Q7QUFFTyxTQUFTLGFBQWEsTUFBWTtBQUN2QyxRQUFNLGFBQWE7QUFBQSxJQUNqQjtBQUFBLElBQ0EscURBQUFFLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsSUFDVixxREFBQUEsQ0FBVTtBQUFBLElBQ1YscURBQUFBLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsSUFDVixxREFBQUEsQ0FBVTtBQUFBLElBQ1YscURBQUFBLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsSUFDVixxREFBQUEsQ0FBVTtBQUFBLEVBQ1osRUFBRSxLQUFLLCtDQUFBRixDQUFVLElBQUksQ0FBQztBQUV0QixTQUFPO0FBQ1Q7QUFFTyxTQUFTLHdCQUF3QixNQUFZO0FBQ2xELFNBQU8sa0JBQWtCLE1BQU0scURBQUFFLENBQVUsc0JBQXNCLEVBQUU7QUFBQSxJQUMvRCx5Q0FBQUgsQ0FBSSxDQUFDLENBQUMsZUFBZSxNQUFNLGVBQWU7QUFBQSxJQUMxQywrQ0FBQUMsQ0FBVSxLQUFLLEtBQUs7QUFBQSxFQUN0QjtBQUNGO0FBTU8sU0FBUyxvQkFBb0IsTUFBWTtBQUM5QyxNQUFJO0FBQ0osUUFBTSxZQUFpQyxDQUFDO0FBRXhDLFFBQU0sYUFBYSxJQUFJLDRDQUFVLENBQXNCLENBQUMsZUFBZTtBQUNyRSw0QkFBd0I7QUFDeEIsV0FBTyxNQUFNO0FBQ1gsZ0JBQVUsUUFBUSxDQUFDLGFBQWE7QUFDOUIsaUJBQVMsWUFBWTtBQUFBLE1BQ3ZCLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRixDQUFDO0FBQ0QsUUFBTSxvQkFBeUMsQ0FBQztBQUVoRCxRQUFNLFlBQVksQ0FBQyxhQUErQixnQkFBNkI7QUFDN0UsUUFDRSxZQUFZLFdBQVcsaURBQUFKLENBQU0sT0FBTyxlQUNwQyxZQUFZLFdBQVcsaURBQUFBLENBQU0sT0FBTyxrQkFDcEM7QUFDQTtBQUFBLElBQ0Y7QUFDQSxRQUFJLFdBQVcsa0JBQWtCLEtBQUssQ0FBQyxPQUFPLEdBQUcsWUFBWSxhQUFhLFlBQVksUUFBUTtBQUM5RixVQUFNLHVCQUF1QixDQUFDUSxpQkFBNkI7QUFDekQsYUFBT0EsYUFDSixxQkFBcUIsRUFDckI7QUFBQSxRQUNDLENBQUMsV0FDRSxNQUFNLFdBQVcsaURBQUFSLENBQU0sT0FBTyxlQUM3QixNQUFNLFdBQVcsaURBQUFBLENBQU0sT0FBTyxxQkFDaEMsTUFBTTtBQUFBLE1BQ1Y7QUFBQSxJQUNKO0FBQ0EsUUFBSSxDQUFDLFVBQVU7QUFDYixpQkFBVztBQUFBLFFBQ1Q7QUFBQSxRQUNBLFFBQVEscUJBQXFCLFdBQVc7QUFBQSxNQUMxQztBQUFBLElBQ0YsT0FBTztBQUNMLFlBQU0sUUFBUSxrQkFBa0IsUUFBUSxRQUFRO0FBQ2hELHdCQUFrQixPQUFPLE9BQU8sQ0FBQztBQUNqQyxlQUFTLFNBQVMscUJBQXFCLFdBQVc7QUFBQSxJQUNwRDtBQUNBLFFBQUksU0FBUyxPQUFPLFNBQVMsR0FBRztBQUM5Qix3QkFBa0IsS0FBSyxRQUFRO0FBQUEsSUFDakM7QUFFQSwwQkFBc0IsS0FBSyxpQkFBaUI7QUFBQSxFQUM5QztBQUNBLFlBQVU7QUFBQSxJQUNSLGtCQUFrQixNQUFNLHFEQUFBTSxDQUFVLGVBQWUsRUFBRTtBQUFBLE1BQVUsQ0FBQyxDQUFDLEVBQUssT0FBSSxNQUN0RSxVQUFVLEdBQUcsSUFBSTtBQUFBLElBQ25CO0FBQUEsRUFDRjtBQUNBLFlBQVU7QUFBQSxJQUNSLGtCQUFrQixNQUFNLHFEQUFBQSxDQUFVLGlCQUFpQixFQUFFO0FBQUEsTUFBVSxDQUFDLENBQUMsRUFBSyxPQUFJLE1BQ3hFLFVBQVUsR0FBRyxJQUFJO0FBQUEsSUFDbkI7QUFBQSxFQUNGO0FBQ0EsWUFBVTtBQUFBLElBQ1Isa0JBQWtCLE1BQU0scURBQUFBLENBQVUsbUJBQW1CLEVBQUUsVUFBVSxDQUFDLFNBQVMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUFBLEVBQy9GO0FBQ0EsWUFBVTtBQUFBLElBQ1Isa0JBQWtCLE1BQU0scURBQUFBLENBQVUscUJBQXFCLEVBQUUsVUFBVSxDQUFDLFNBQVM7QUFDM0UsZ0JBQVUsR0FBRyxJQUFJO0FBQUEsSUFDbkIsQ0FBQztBQUFBLEVBQ0g7QUFDQSxZQUFVO0FBQUEsSUFDUixrQkFBa0IsTUFBTSxxREFBQUEsQ0FBVSxVQUFVLEVBQUUsVUFBVSxDQUFDLFNBQVM7QUFDaEUsZ0JBQVUsR0FBRyxJQUFJO0FBQUEsSUFDbkIsQ0FBQztBQUFBLEVBQ0g7QUFDQSxZQUFVO0FBQUEsSUFDUixrQkFBa0IsTUFBTSxxREFBQUEsQ0FBVSxZQUFZLEVBQUUsVUFBVSxDQUFDLFNBQVM7QUFDbEUsZ0JBQVUsR0FBRyxJQUFJO0FBQUEsSUFDbkIsQ0FBQztBQUFBLEVBQ0g7QUFDQSxhQUFXLE1BQU07QUFFZixlQUFXLEtBQUssS0FBSyxtQkFBbUIsT0FBTyxHQUFHO0FBQ2hELFFBQUUscUJBQXFCLEVBQUUsUUFBUSxDQUFDLFVBQVU7QUFDMUMsa0JBQVUsT0FBTyxDQUFDO0FBQUEsTUFDcEIsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGLEdBQUcsQ0FBQztBQUVKLFNBQU87QUFDVDtBQUVPLFNBQVMsaUJBQWlCLE1BQVk7QUFDM0MsUUFBTSxXQUFXO0FBQUEsSUFDZjtBQUFBLElBQ0EscURBQUFBLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsRUFDWixFQUFFO0FBQUEsSUFDQSx5Q0FBQUgsQ0FBSSxDQUFDLE1BQU07QUFDVCxhQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxFQUFFLFNBQVM7QUFBQSxJQUM5QyxDQUFDO0FBQUEsRUFDSDtBQUNBLFNBQU87QUFDVDtBQUVPLFNBQVMsc0JBQXNCLE1BQVk7QUFDaEQsU0FBTyxrQkFBa0IsTUFBTSxxREFBQUcsQ0FBVSxxQkFBcUIsRUFBRTtBQUFBLElBQzlELHlDQUFBSCxDQUFJLENBQUMsQ0FBQyxRQUFRLE1BQU0sUUFBUTtBQUFBLEVBQzlCO0FBQ0Y7QUFFTyxTQUFTLDBCQUNkLE1BQ0EsU0FDQSxxQkFBcUIsTUFDckI7QUF2TEY7QUF3TEUsUUFBTSxpQkFBaUIsTUFBWTtBQUNqQyxRQUFJO0FBQ0YsWUFBTSxhQUFhLE1BQU0sZ0RBQUksQ0FBQyxnQkFBZ0IsTUFBTSxrQkFBa0I7QUFDdEUsb0JBQWMsS0FBSyxVQUFVO0FBQUEsSUFDL0IsU0FBUyxHQUFRO0FBQ2YseUNBQVU7QUFBQSxJQUNaO0FBQUEsRUFDRjtBQUNBLFFBQU0sZ0JBQWdCLElBQUkseUNBQU8sQ0FBb0I7QUFFckQsUUFBTSxhQUFhLGNBQWM7QUFBQSxJQUMvQiw4Q0FBUSxDQUFDLE1BQU07QUFuTW5CLFVBQUFNO0FBb01NLE9BQUFBLE1BQUEsdUNBQVcsaUJBQVgsZ0JBQUFBLElBQXlCLG9CQUFvQixnQkFBZ0I7QUFBQSxJQUMvRCxDQUFDO0FBQUEsRUFDSDtBQUVBLE1BQUksT0FBTyxXQUFXLGFBQWE7QUFDakMsUUFBSSxDQUFDLE9BQU8saUJBQWlCO0FBQzNCLFlBQU0sSUFBSTtBQUFBLFFBQ1I7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUNBLGlEQUFXLGlCQUFYLG1CQUF5QixpQkFBaUIsZ0JBQWdCO0FBQUEsRUFDNUQ7QUFFQSxTQUFPLDRDQUFNO0FBQU4sSUFDTCxnREFBSSxDQUFDLGdCQUFnQixNQUFNLGtCQUFrQixFQUFFLE1BQU0sQ0FBQyxNQUFNO0FBQzFELHlDQUFVO0FBQ1YsYUFBTyxDQUFDO0FBQUEsSUFDVixDQUFDO0FBQUEsSUFDRDtBQUFBLEVBQ0Y7QUFDRjtBQUVPLFNBQVMsbUJBQW1CLE1BQVk7QUFDN0MsU0FBTyxrQkFBa0IsTUFBTSxxREFBQUgsQ0FBVSxZQUFZO0FBQ3ZEO0FBRU8sU0FBUyxtQkFBbUIsTUFBWTtBQUM3QyxTQUFPLGtCQUFrQixNQUFNLHFEQUFBQSxDQUFVLFdBQVc7QUFDdEQ7QUFFTyxTQUFTLG1DQUFtQyxNQUFZO0FBQzdELFFBQU0sYUFBYSxrQkFBa0IsTUFBTSxxREFBQUEsQ0FBVSwwQkFBMEIsRUFBRTtBQUFBLElBQy9FLHlDQUFBSCxDQUFJLENBQUNPLFVBQVM7QUFDWixhQUFPLEVBQUUsY0FBY0EsTUFBSyxpQkFBaUI7QUFBQSxJQUMvQyxDQUFDO0FBQUEsRUFDSDtBQUNBLFNBQU87QUFDVDtBQUVPLFNBQVMsbUNBQW1DLE1BQVk7QUFDN0QsUUFBTSxhQUFhLGtCQUFrQixNQUFNLHFEQUFBSixDQUFVLDBCQUEwQixFQUFFO0FBQUEsSUFDL0UseUNBQUFILENBQUksQ0FBQ08sVUFBUztBQUNaLGFBQU8sRUFBRSxjQUFjQSxNQUFLLGlCQUFpQjtBQUFBLElBQy9DLENBQUM7QUFBQSxFQUNIO0FBQ0EsU0FBTztBQUNUO0FBRU8sU0FBUyw2QkFBNkIsTUFBWSxNQUF1QjtBQUM5RSxTQUFPLGtCQUFrQixNQUFNLHFEQUFBSixDQUFVLG1CQUFtQixFQUFFO0FBQUEsSUFDNUQsNENBQU0sQ0FBQyxDQUFDLENBQUMsWUFBWSxNQUFNLGlCQUFpQixJQUFJO0FBQUEsSUFDaEQseUNBQUFILENBQUksQ0FBQyxDQUFDUSxPQUFNLFFBQVEsTUFBTTtBQUN4QixVQUFJLE1BQU0sMERBQTBELEVBQUUsTUFBQUEsT0FBTSxTQUFTLENBQUM7QUFDdEYsYUFBTztBQUFBLElBQ1QsQ0FBQztBQUFBLElBQ0QsK0NBQUFQLENBQVUsS0FBSyxnQkFBZ0IsSUFBSSxDQUFDO0FBQUEsRUFDdEM7QUFDRjtBQUVPLFNBQVMsMkJBQTJCLE1BQVksYUFBc0M7QUFDM0YsU0FBTyxrQkFBa0IsTUFBTSxxREFBQUUsQ0FBVSxrQ0FBa0MsRUFBRTtBQUFBLElBQzNFLDRDQUFNO0FBQU4sTUFDRSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQ0gsMkNBQWEsZUFBYSx1QkFBRyxhQUM1QixDQUFDLE1BQUssMkNBQWEsY0FBYSxLQUFLLGlCQUFpQjtBQUFBLElBQzNEO0FBQUEsSUFDQSx5Q0FBQUgsQ0FBSSxDQUFDLENBQUMsU0FBUyxNQUFNLFNBQVM7QUFBQSxJQUM5QiwrQ0FBQUM7QUFBQSxNQUNFLHVCQUF1Qiw0REFBQUgsR0FDbkIsWUFBWSxnQkFDWixDQUFDLEVBQUMsMkNBQWE7QUFBQSxJQUNyQjtBQUFBLEVBQ0Y7QUFDRjtBQUVPLFNBQVMsMEJBQTBCLE1BQVk7QUFDcEQsU0FBTyxrQkFBa0IsTUFBTSxxREFBQUssQ0FBVSxzQkFBc0IsRUFBRTtBQUFBLElBQy9ELHlDQUFBSCxDQUFJLENBQUMsQ0FBQyxTQUFTLE1BQU0sU0FBUztBQUFBLElBQzlCLCtDQUFBQyxDQUFVLEtBQUssV0FBVztBQUFBLEVBQzVCO0FBQ0Y7OztBSHZRTyxTQUFTLHlCQUNkLGdCQUNHLFFBQ0g7QUFDQSxRQUFNLGFBQWEsSUFBSSw0Q0FBQUcsQ0FBYyxDQUFDLGNBQWM7QUFDbEQsVUFBTSxzQkFBc0IsTUFBTTtBQUNoQyxnQkFBVSxLQUFLLFdBQVc7QUFBQSxJQUM1QjtBQUVBLFdBQU8sUUFBUSxDQUFDLFFBQVE7QUFDdEIsa0JBQVksR0FBRyxLQUF3QyxtQkFBbUI7QUFBQSxJQUM1RSxDQUFDO0FBRUQsVUFBTSxjQUFjLE1BQU07QUFDeEIsYUFBTyxRQUFRLENBQUMsUUFBUTtBQUN0QixvQkFBWSxJQUFJLEtBQXdDLG1CQUFtQjtBQUFBLE1BQzdFLENBQUM7QUFBQSxJQUNIO0FBQ0EsV0FBTztBQUFBLEVBQ1QsQ0FBQyxFQUFFLEtBQUssK0NBQUFILENBQVUsV0FBVyxDQUFDO0FBRTlCLFNBQU87QUFDVDtBQVdPLFNBQVMsd0JBQStDLGFBQWdCO0FBQzdFLFFBQU0sc0JBQXNCO0FBQUEsSUFDMUI7QUFBQSxJQUNBLDREQUFBQyxDQUFpQjtBQUFBLElBQ2pCLDREQUFBQSxDQUFpQjtBQUFBLElBQ2pCLDREQUFBQSxDQUFpQjtBQUFBO0FBQUEsSUFFakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUE7QUFBQSxFQUVuQixFQUFFO0FBQUEsSUFDQSx5Q0FBQUYsQ0FBSSxDQUFDLE1BQU07QUFDVCxZQUFNLEVBQUUscUJBQXFCLGlCQUFpQixxQkFBcUIsSUFBSTtBQUN2RSxZQUFNLGtCQUFrQixFQUFFLG9CQUFvQixpREFBQUgsQ0FBTSxPQUFPLFVBQVU7QUFDckUsWUFBTSxjQUFjLEVBQUUsb0JBQW9CLGlEQUFBQSxDQUFNLE9BQU8sTUFBTTtBQUM3RCxZQUFNLG1CQUF3QztBQUFBLFFBQzVDO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0EsYUFBYTtBQUFBLE1BQ2Y7QUFDQSxhQUFPO0FBQUEsSUFDVCxDQUFDO0FBQUEsRUFDSDtBQUVBLFNBQU87QUFDVDtBQUVPLFNBQVMsb0JBQW9CLGFBQTBCLFNBQTBCO0FBQ3RGLFNBQU8sd0JBQXdCLFdBQVcsRUFBRTtBQUFBLElBQzFDLHlDQUFBRyxDQUFJLE1BQU07QUFDUixhQUFPLEVBQUUsYUFBYSxxQkFBcUIsT0FBTyxFQUFFO0FBQUEsSUFDdEQsQ0FBQztBQUFBLEVBQ0g7QUFDRjtBQUVPLFNBQVMsd0JBQXdCLGFBQTJCO0FBQ2pFLE1BQUksQ0FBQyxhQUFhO0FBQ2hCLFdBQU87QUFBQSxFQUNUO0FBQ0EsUUFBTSxXQUFXO0FBQUEsSUFDZjtBQUFBLElBQ0EsNERBQUFFLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsRUFDbkIsRUFBRTtBQUFBLElBQ0EseUNBQUFGLENBQUksQ0FBQyxFQUFFLE1BQU0sVUFBVSxTQUFTLE1BQU07QUFDcEMsYUFBTztBQUFBLFFBQ0w7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFBQSxJQUNELCtDQUFBQyxDQUFVO0FBQUEsTUFDUixNQUFNLFlBQVk7QUFBQSxNQUNsQixVQUFVLFlBQVk7QUFBQSxNQUN0QixVQUFVLFlBQVk7QUFBQSxJQUN4QixDQUFDO0FBQUEsRUFDSDtBQUNBLFNBQU87QUFDVDtBQUVPLFNBQVMsZ0NBQWdDLGFBQTBCO0FBQ3hFLFFBQU0sV0FBVztBQUFBLElBQ2Y7QUFBQSxJQUNBLDREQUFBQyxDQUFpQjtBQUFBLEVBQ25CLEVBQUU7QUFBQSxJQUNBLHlDQUFBRixDQUFJLENBQUMsQ0FBQyxPQUFPLE1BQU0sT0FBTztBQUFBLElBQzFCLCtDQUFBQyxDQUFVLFlBQVksaUJBQWlCO0FBQUEsRUFDekM7QUFDQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLHlCQUNkLGFBQ0EsT0FDQTtBQUNBLFFBQU0sYUFBYSxJQUFJLDRDQUFBRyxDQUVyQixDQUFDLGNBQWM7QUFDZixVQUFNLFNBQVMsSUFDVixXQUNBO0FBQ0gsZ0JBQVUsS0FBSyxNQUFNO0FBQUEsSUFDdkI7QUFFQSxnQkFBWSxHQUFHLE9BQU8sTUFBTTtBQUU1QixVQUFNLGNBQWMsTUFBTTtBQUV4QixrQkFBWSxJQUFJLE9BQU8sTUFBTTtBQUFBLElBQy9CO0FBQ0EsV0FBTztBQUFBLEVBQ1QsQ0FBQztBQUVELFNBQU87QUFDVDtBQUVPLFNBQVMsY0FBYyxVQUF1QztBQXJKckU7QUFzSkUsU0FBTztBQUFBLElBQ0wsU0FBUztBQUFBLElBQ1QsNERBQUFGLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsSUFDakIsNERBQUFBLENBQWlCO0FBQUEsRUFDbkIsRUFBRTtBQUFBLElBQ0EseUNBQUFGLENBQUksQ0FBQyxnQkFBZ0I7QUEvSnpCLFVBQUFNLEtBQUFHO0FBZ0tNLFlBQU0sT0FBTUgsTUFBQSxTQUFTLGdCQUFULE9BQUFBLE1BQXdCLFlBQVksb0JBQW9CLFNBQVMsTUFBTTtBQUNuRixjQUFPRyxNQUFBLDJCQUFLLFlBQUwsT0FBQUEsTUFBZ0I7QUFBQSxJQUN6QixDQUFDO0FBQUEsSUFDRCwrQ0FBQVI7QUFBQSxPQUNFLDBCQUFTLGdCQUFULG1CQUFzQixZQUF0QixhQUNFLGNBQVMsWUFBWSxvQkFBb0IsU0FBUyxNQUFNLE1BQXhELG1CQUEyRCxZQUQ3RCxZQUVFO0FBQUEsSUFDSjtBQUFBLEVBQ0Y7QUFDRjtBQUVPLFNBQVMseUJBQXlCLGFBQTBCO0FBQ2pFLFNBQU8seUJBQXlCLGFBQWEsNERBQUFDLENBQWlCLGlCQUFpQixFQUFFO0FBQUEsSUFDL0UseUNBQUFGLENBQUksQ0FBQyxDQUFDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEM7QUFDRjtBQU1PLFNBQVMsOEJBQ2QsTUFDQSxVQUFnRCxDQUFDLEdBQ2pEO0FBeExGO0FBeUxFLE1BQUk7QUFFSixRQUFNLGFBQWEsSUFBSSw0Q0FBQUksQ0FBZ0MsQ0FBQyxRQUFRO0FBQzlELGlCQUFhO0FBQ2IsV0FBTyxNQUFNLFNBQVMsWUFBWTtBQUFBLEVBQ3BDLENBQUMsRUFBRSxLQUFLLCtDQUFBSCxDQUFVLE1BQU0sS0FBSyxLQUFLLG1CQUFtQixPQUFPLENBQUMsQ0FBQyxDQUFDO0FBRS9ELFFBQU0sd0JBQXVCLGFBQVEseUJBQVIsWUFBZ0M7QUFFN0QsUUFBTSxhQUFhLE1BQU07QUFBQSxJQUN2QixvQkFBSSxJQUFJO0FBQUEsTUFDTixxREFBQUUsQ0FBVTtBQUFBLE1BQ1YscURBQUFBLENBQVU7QUFBQSxNQUNWLHFEQUFBQSxDQUFVO0FBQUEsTUFDVixHQUFHO0FBQUEsSUFDTCxDQUFDO0FBQUEsRUFDSDtBQUVBLFFBQU0sV0FBVyxrQkFBa0IsTUFBTSxHQUFHLFVBQVUsRUFBRTtBQUFBLElBQVUsQ0FBQyxNQUNqRSx5Q0FBWSxLQUFLLE1BQU0sS0FBSyxFQUFFLG1CQUFtQixPQUFPLENBQUM7QUFBQSxFQUMzRDtBQUNBLE1BQUksS0FBSyxtQkFBbUIsT0FBTyxHQUFHO0FBQ3BDLDZDQUFZLEtBQUssTUFBTSxLQUFLLEtBQUssbUJBQW1CLE9BQU8sQ0FBQztBQUFBLEVBQzlEO0FBQ0EsU0FBTztBQUNUO0FBTU8sU0FBUyw2QkFDZCxNQUNBLFVBQ0EsVUFBK0MsQ0FBQyxHQUNoRDtBQTVORjtBQTZORSxRQUFNLG9CQUFtQixhQUFRLHFCQUFSLFlBQTRCO0FBQ3JELFFBQU0sYUFBYTtBQUFBLElBQ2pCO0FBQUEsSUFDQSxxREFBQUEsQ0FBVTtBQUFBLElBQ1YscURBQUFBLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsRUFDWixFQUFFO0FBQUEsSUFDQSxnREFBUyxDQUFDLENBQUMsTUFBTTtBQUNmLFlBQU0sY0FBYyxFQUFFLHlCQUF5QixRQUFRO0FBQ3ZELFVBQUksYUFBYTtBQUNmLGVBQU8seUJBQXlCLGFBQWEsR0FBRyxnQkFBZ0I7QUFBQSxNQUNsRSxPQUFPO0FBQ0wsZUFBTyxJQUFJLDRDQUFBQyxDQUFzQixDQUFDLGNBQWMsVUFBVSxLQUFLLE1BQVMsQ0FBQztBQUFBLE1BQzNFO0FBQUEsSUFDRixDQUFDO0FBQUEsSUFDRCwrQ0FBQUgsQ0FBVSxLQUFLLHlCQUF5QixRQUFRLENBQWtDO0FBQUEsRUFDcEY7QUFFQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLDhCQUNkLGFBQytDO0FBQy9DLFFBQU0sV0FBVztBQUFBLElBQ2Y7QUFBQSxJQUNBLDREQUFBQyxDQUFpQjtBQUFBLEVBQ25CLEVBQUU7QUFBQSxJQUNBLHlDQUFBRixDQUFJLE1BQU0sWUFBWSxXQUFXO0FBQUEsSUFDakMsK0NBQUFDLENBQVUsWUFBWSxXQUFXO0FBQUEsRUFDbkM7QUFDQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLGdDQUNkLE1BQ0EsRUFBRSxNQUFNLFNBQVMsR0FDakIsVUFBK0MsQ0FBQyxHQUNMO0FBblE3QztBQW9RRSxRQUFNLG9CQUFtQixhQUFRLHFCQUFSLFlBQTRCO0FBQ3JELFFBQU0sb0JBQW9CLENBQUMsZ0JBQW1DO0FBQzVELFFBQUksVUFBVTtBQUNkLFFBQUksTUFBTTtBQUNSLGdCQUFVLFdBQVcsWUFBWSxTQUFTO0FBQUEsSUFDNUM7QUFDQSxRQUFJLFVBQVU7QUFDWixnQkFBVSxXQUFXLFlBQVksYUFBYTtBQUFBLElBQ2hEO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFDQSxRQUFNLGFBQWE7QUFBQSxJQUNqQjtBQUFBLElBQ0EscURBQUFFLENBQVU7QUFBQSxJQUNWLHFEQUFBQSxDQUFVO0FBQUEsSUFDVixxREFBQUEsQ0FBVTtBQUFBLEVBQ1osRUFBRTtBQUFBLElBQ0EsZ0RBQVMsQ0FBQyxDQUFDLE1BQU07QUFDZixZQUFNLGNBQWMsTUFBTSxLQUFLLEVBQUUsbUJBQW1CLE9BQU8sQ0FBQyxFQUFFO0FBQUEsUUFBSyxDQUFDLE1BQ2xFLGtCQUFrQixDQUFDO0FBQUEsTUFDckI7QUFDQSxVQUFJLGFBQWE7QUFDZixlQUFPLHlCQUF5QixhQUFhLEdBQUcsZ0JBQWdCO0FBQUEsTUFDbEUsT0FBTztBQUNMLGVBQU8sSUFBSSw0Q0FBQUMsQ0FBc0IsQ0FBQyxjQUFjLFVBQVUsS0FBSyxNQUFTLENBQUM7QUFBQSxNQUMzRTtBQUFBLElBQ0YsQ0FBQztBQUFBLElBQ0QsK0NBQUFILENBQVUsTUFBTSxLQUFLLEtBQUssbUJBQW1CLE9BQU8sQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNLGtCQUFrQixDQUFDLENBQUMsQ0FBQztBQUFBLEVBQzFGO0FBRUEsU0FBTztBQUNUO0FBVU8sU0FBUyw4QkFBOEIsYUFBc0M7QUFDbEYsTUFBSSxPQUFPLGdCQUFnQixhQUFhO0FBQ3RDLFdBQU8sSUFBSSw0Q0FBQUcsQ0FBMEQ7QUFBQSxFQUN2RTtBQUNBLFNBQU8seUJBQXlCLGFBQWEsNERBQUFGLENBQWlCLGlCQUFpQixFQUFFO0FBQUEsSUFDL0UseUNBQUFGLENBQUksQ0FBQyxDQUFDLGlCQUFpQixNQUFNO0FBQzNCLGFBQU87QUFBQSxRQUNMLFNBQVM7QUFBQSxRQUNULFlBQVksWUFBWTtBQUFBLE1BQzFCO0FBQUEsSUFDRixDQUFDO0FBQUEsSUFDRCwrQ0FBQUMsQ0FBVSxFQUFFLFNBQVMsWUFBWSxZQUFZLFlBQVksWUFBWSxXQUFXLENBQUM7QUFBQSxFQUNuRjtBQUNGOzs7QURyUk8sU0FBUyxpQkFDZCxRQUNBLE1BQ0EsU0FDQSxnQkFDQSxTQUNvQjtBQUNwQixRQUFNLEVBQUUsaUJBQWlCLElBQUk7QUFFN0IsUUFBTSxtQkFBbUIsQ0FBQ1MsU0FBc0JDLHNCQUF1QztBQUNyRixRQUFJLFlBQVk7QUFDaEIsWUFBUUQsU0FBUTtBQUFBLE1BQ2QsS0FBSyxpREFBQWIsQ0FBTSxPQUFPO0FBQ2hCLG9CQUFZYyxrQkFBaUI7QUFDN0I7QUFBQSxNQUNGLEtBQUssaURBQUFkLENBQU0sT0FBTztBQUNoQixvQkFBWWMsa0JBQWlCO0FBQzdCO0FBQUEsTUFDRixLQUFLLGlEQUFBZCxDQUFNLE9BQU87QUFDaEIsb0JBQVljLGtCQUFpQjtBQUM3QjtBQUFBLE1BQ0Y7QUFDRTtBQUFBLElBQ0o7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sa0JBQWtCLHdCQUF3QixnQkFBZ0IsRUFBRTtBQUFBLElBQ2hFLHlDQUFBWCxDQUFJLENBQUMsVUFBVTtBQUNiLGFBQU8saUJBQWlCLFFBQVEsTUFBTSxXQUErQjtBQUFBLElBQ3ZFLENBQUM7QUFBQSxJQUNELCtDQUFBQyxDQUFVLGlCQUFpQixRQUFRLGdCQUFnQixDQUFDO0FBQUEsRUFDdEQ7QUFFQSxRQUFNLGlCQUFpQixJQUFJLHlDQUFBRixDQUFpQjtBQUM1QyxRQUFNLFNBQVMsQ0FBTyxZQUFzQixtQkFBK0M7QUFDekYsUUFBSTtBQUNGLGlFQUFtQjtBQUVuQixxQkFBZSxLQUFLLElBQUk7QUFDeEIsY0FBUSxRQUFRO0FBQUEsUUFDZCxLQUFLLGlEQUFBRixDQUFNLE9BQU87QUFDaEIsZ0JBQU0saUJBQWlCO0FBQUEsWUFDckIsa0NBQWMsQ0FBQyxpQkFBaUI7QUFBQSxZQUNoQztBQUFBLFlBQ0E7QUFBQSxVQUNGO0FBQ0EsaUJBQU8saUJBQWlCO0FBQUEsUUFDMUIsS0FBSyxpREFBQUEsQ0FBTSxPQUFPO0FBQ2hCLGdCQUFNLGlCQUFpQjtBQUFBLFlBQ3JCLGtDQUFjLENBQUMsaUJBQWlCO0FBQUEsWUFDaEM7QUFBQSxZQUNBO0FBQUEsVUFDRjtBQUNBLGlCQUFPLGlCQUFpQjtBQUFBLFFBQzFCLEtBQUssaURBQUFBLENBQU0sT0FBTztBQUNoQixnQkFBTSxpQkFBaUI7QUFBQSxZQUNyQixrQ0FBYyxDQUFDLGlCQUFpQjtBQUFBLFlBQ2hDO0FBQUEsWUFDQTtBQUFBLFVBQ0Y7QUFDQSxpQkFBTyxpQkFBaUI7QUFBQSxRQUMxQjtBQUNFLGdCQUFNLElBQUksVUFBVSxvQ0FBb0M7QUFBQSxNQUM1RDtBQUFBLElBQ0YsU0FBUyxHQUFHO0FBQ1YsVUFBSSxXQUFXLGFBQWEsT0FBTztBQUNqQywyQ0FBVTtBQUNWLGVBQU87QUFBQSxNQUNULE9BQU87QUFDTCxjQUFNO0FBQUEsTUFDUjtBQUFBLElBQ0YsVUFBRTtBQUNBLHFCQUFlLEtBQUssS0FBSztBQUFBLElBRTNCO0FBQUEsRUFDRjtBQUVBLFFBQU0sWUFBb0IsWUFBWSxRQUFRO0FBQzlDLFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBLGlCQUFpQixlQUFlLGFBQWE7QUFBQSxFQUMvQztBQUNGO0FBRU8sU0FBUyxvQkFBb0I7QUFDbEMsTUFBSSxRQUFRO0FBRVosUUFBTSxpQkFBaUIsSUFBSSx5Q0FBQUUsQ0FBaUI7QUFFNUMsUUFBTSxpQkFBaUIsSUFBSSx5Q0FBQUEsQ0FBaUI7QUFFNUMsUUFBTSxTQUFTLENBQU8sZUFBeUI7QUFDN0MsbUJBQWUsS0FBSyxJQUFJO0FBQ3hCLFlBQVEsa0NBQWMsQ0FBQztBQUN2QixtQkFBZSxLQUFLLEtBQUs7QUFDekIsbUJBQWUsS0FBSyxLQUFLO0FBQUEsRUFDM0I7QUFDQSxRQUFNLFlBQW9CLFlBQVksUUFBUTtBQUM5QyxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBLGlCQUFpQixlQUFlLGFBQWE7QUFBQSxJQUM3QyxpQkFBaUIsZUFBZSxhQUFhO0FBQUEsRUFDL0M7QUFDRjs7O0FLMUlPO0FBQ3lCO0FBYXpCLFNBQVMsb0JBQ2QsTUFDQSxNQUNBLFlBQ0E7QUFDQSxRQUFNLHNCQUFzQixJQUFJLGtEQUFlLENBQXFCLE1BQVM7QUFFN0UsUUFBTSx5QkFBeUIsT0FDM0IsNkJBQTZCLE1BQU0sSUFBSSxJQUN2QyxvQkFBb0IsYUFBYTtBQUVyQyxRQUFNLHVCQUF1QixDQUFPLE9BQW9ELHNCQUFwRCxJQUFvRCxtQkFBcEQsSUFBWSxVQUFpQyxDQUFDLEdBQU07QUEvQjFGO0FBZ0NJLFFBQUksTUFBTTtBQUNSLFVBQUksTUFBTSxvQ0FBb0MsSUFBSSxhQUFhLEVBQUUsR0FBRztBQUNwRSxZQUFNLEtBQUssbUJBQW1CLE1BQU0sSUFBSSxRQUFRLEtBQUs7QUFDckQsWUFBTSxrQkFBcUMsVUFBSyxnQkFBZ0IsSUFBSSxNQUF6QixZQUE4QjtBQUN6RSxVQUFJLG1CQUFtQixNQUFNLE9BQU8sV0FBVztBQUM3QyxZQUFJO0FBQUEsVUFDRiwwQ0FBMEMsRUFBRSw0REFBNEQsY0FBYztBQUFBLFFBQ3hIO0FBQUEsTUFDRjtBQUNBLFVBQUksY0FBc0M7QUFDMUMsVUFBSSxTQUFTO0FBQ1gsdUJBQWMsVUFBSyxpQkFBaUIsb0JBQW9CLGlEQUFBRixDQUFNLE9BQU8sVUFBVSxNQUFqRSxtQkFBb0U7QUFBQSxlQUMzRSxTQUFTLGNBQWM7QUFDOUIsdUJBQWMsVUFBSyxpQkFBaUIsb0JBQW9CLGlEQUFBQSxDQUFNLE9BQU8sTUFBTSxNQUE3RCxtQkFBZ0U7QUFBQSxNQUNoRjtBQUNBLFlBQU0sYUFDSCxPQUFPLGFBQWEsQ0FBQyxlQUNyQixPQUFPLGNBQWEsMkNBQWEsaUJBQWlCLE1BQU0sV0FBVztBQUN0RSwwQkFBb0IsS0FBSyxhQUFhLEtBQUssY0FBYztBQUFBLElBQzNELFdBQVcsWUFBWTtBQUNyQixZQUFNLFdBQVcsWUFBWSxRQUFRLFFBQVEsRUFBRSxPQUFPLEdBQUcsSUFBSSxFQUFFO0FBQy9ELFlBQU0sV0FBVyxNQUFNLFdBQVcsWUFBWTtBQUM5QywwQkFBb0I7QUFBQSxRQUNsQixPQUFPLGFBQWEsV0FBVyxpQkFBaUIsTUFBTSxXQUFXLFNBQVMsSUFBSSxLQUFLO0FBQUEsTUFDckY7QUFBQSxJQUNGLFdBQVcsb0JBQW9CLFVBQVUsSUFBSTtBQUMzQyxVQUFJO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFDQSwwQkFBb0IsS0FBSyxFQUFFO0FBQUEsSUFDN0I7QUFBQSxFQUNGO0FBQ0EsUUFBTSxZQUFvQixZQUFZLHFCQUFxQjtBQUMzRCxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGOzs7QUNuRU8sU0FBUyxzQkFBc0IsTUFBWTtBQUNoRCxRQUFNLGFBQWEsQ0FBQyxlQUF5QjtBQUMzQyxTQUFLLFdBQVcsVUFBVTtBQUFBLEVBQzVCO0FBQ0EsUUFBTSxZQUFvQixZQUFZLG1CQUFtQjtBQUN6RCxTQUFPLEVBQUUsV0FBVyxXQUFXO0FBQ2pDOzs7QUNMTyxTQUFTLGdDQUFnQyxhQUEwQjtBQUN4RSxRQUFNLFlBQVksWUFBWSxvQkFBb0I7QUFDbEQsUUFBTSw0QkFBNEIsZ0NBQWdDLFdBQVc7QUFDN0UsU0FBTyxFQUFFLFdBQVcsMEJBQTBCO0FBQ2hEOzs7QUNOc0I7QUFLZixTQUFTLHlCQUF5QixVQUF1QztBQUM5RSxNQUFJLGlCQUErQjtBQUNuQyxVQUFRLFNBQVMsUUFBUTtBQUFBLElBQ3ZCLEtBQUssaURBQUFBLENBQU0sT0FBTztBQUNoQix1QkFBaUI7QUFDakI7QUFBQSxJQUNGLEtBQUssaURBQUFBLENBQU0sT0FBTztBQUNoQix1QkFBaUI7QUFDakI7QUFBQSxJQUVGO0FBQ0U7QUFBQSxFQUNKO0FBQ0EsUUFBTSxZQUFvQixZQUFZLGNBQWM7QUFDcEQsUUFBTSxxQkFBcUIsY0FBYyxRQUFRO0FBRWpELFNBQU8sRUFBRSxXQUFXLG1CQUFtQjtBQUN6Qzs7O0FDckJPLFNBQVMscUJBQXFCLGFBQTBCO0FBQzdELFFBQU0sZUFBZSx3QkFBd0IsV0FBVztBQUN4RCxTQUFPLEVBQUUsV0FBVyx1QkFBdUIsYUFBYTtBQUMxRDs7O0FDSk8sU0FBUyx1QkFBdUI7QUFDckMsUUFBTSxZQUFvQixZQUFZLGtCQUFrQjtBQUN4RCxTQUFPO0FBQUEsSUFDTDtBQUFBLEVBQ0Y7QUFDRjs7O0FDTDJDO0FBQzJCOzs7QUNLOUI7QUFHakMsSUFBTSxZQUFZO0FBQUEsRUFDdkIsTUFBTTtBQUFBLEVBQ04sYUFBYTtBQUNmO0FBR0EsU0FBc0IsWUFDcEIsSUFDQSxJQUVBO0FBQUEsNkNBSEEsa0JBQ0EsU0FDQSxVQUE4QixDQUFDLEdBQy9CO0FBQ0EsVUFBTSxFQUFFLFVBQVUsdUJBQXVCLE1BQU0sSUFBSTtBQUVuRCxVQUFNLGlCQUFpQixZQUFZLFNBQVM7QUFBQSxNQUMxQztBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBWU8sU0FBUyx3QkFDZCxNQUNBLE9BQ0EsV0FDQTtBQUNBLFFBQU0sU0FBUyxNQUFNLFFBQVEsS0FBSyxJQUFJLFFBQVEsQ0FBQyxLQUFLO0FBRXBELFFBQU0sb0JBQW9CLG1CQUFtQixJQUFJLEVBQUU7QUFBQSxJQUNqRCw0Q0FBQWdCO0FBQUEsTUFDRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsWUFBWSxNQUNsQixVQUFVLFVBQWMsaUJBQWlCLFVBQWEsT0FBTyxTQUFTLFlBQWlCO0FBQUEsSUFDM0Y7QUFBQSxJQUNBLHlDQUFBYixDQUFJLENBQUMsQ0FBQyxTQUFTLGFBQWEsRUFBRSxZQUFZLE1BQU07QUFDOUMsWUFBTSxNQUFNO0FBQUEsUUFDVjtBQUFBLFFBQ0EsT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLE1BQ1I7QUFDQSw2Q0FBWTtBQUNaLGFBQU87QUFBQSxJQUNULENBQUM7QUFBQSxFQUNIO0FBRUEsTUFBSTtBQUNKLFFBQU0sc0JBQXNCLElBQUksNENBQUFJLENBQW9CLENBQUMsZUFBZTtBQUNsRSwwQkFBc0I7QUFBQSxFQUN4QixDQUFDO0FBRUQsUUFBTSxPQUFPLENBQU8sT0FBMEQsc0JBQTFELElBQTBELG1CQUExRCxTQUFxQixVQUE4QixDQUFDLEdBQU07QUFDNUUsd0JBQW9CLEtBQUssSUFBSTtBQUM3QixRQUFJO0FBQ0YsWUFBTSxZQUFZLEtBQUssa0JBQWtCLFNBQVMsaUJBQUUsT0FBTyxPQUFPLENBQUMsS0FBTSxRQUFTO0FBQUEsSUFDcEYsVUFBRTtBQUNBLDBCQUFvQixLQUFLLEtBQUs7QUFBQSxJQUNoQztBQUFBLEVBQ0Y7QUFFQSxTQUFPLEVBQUUsbUJBQW1CLHFCQUFxQixLQUFLO0FBQ3hEO0FBRU8sU0FBUyx3QkFBd0IsTUFBWTtBQUNsRCxRQUFNLGlCQUFpQixtQkFBbUIsSUFBSTtBQUU5QyxRQUFNLE9BQU8sQ0FBTyxTQUFpQjtBQUNuQyxVQUFNLE1BQU0sTUFBTSxLQUFLLGlCQUFpQixnQkFBZ0IsSUFBSTtBQUM1RCxXQUFPO0FBQUEsRUFDVDtBQUVBLFFBQU0sT0FBTyxDQUFPLE1BQWMsZ0JBQTZCO0FBQzdELFVBQU0sTUFBTSxNQUFNLEtBQUssaUJBQWlCLGdCQUFnQixNQUFNLFdBQVc7QUFDekUsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLEVBQUUsZ0JBQWdCLE1BQU0sS0FBSztBQUN0Qzs7O0FEeENBLElBQU0sVUFBVSxJQUFJLFlBQVk7QUFDaEMsSUFBTSxVQUFVLElBQUksWUFBWTtBQUVoQyxJQUFNLGtCQUErRCxvQkFBSSxJQUFJO0FBRTdFLElBQU0sU0FBUyxDQUFDLFlBQXVDLFFBQVEsT0FBTyxLQUFLLFVBQVUsT0FBTyxDQUFDO0FBRTdGLElBQU0sU0FBUyxDQUFDLFlBQ2QsS0FBSyxNQUFNLFFBQVEsT0FBTyxPQUFPLENBQUM7QUFFN0IsU0FBUyxVQUFVLE1BQVksU0FBdUI7QUFqRTdEO0FBa0VFLFFBQU0sc0JBQXNCLElBQUkseUNBQUFMLENBQWM7QUFFOUMsUUFBTSx3QkFBd0IsTUFBRztBQXBFbkMsUUFBQU8sS0FBQUcsS0FBQTtBQXFFSSxhQUFBSCxNQUFBLEtBQUssZUFBTCxnQkFBQUEsSUFBaUIsYUFBWSxLQUM1QixDQUFDLEdBQUNHLE1BQUEsS0FBSyxlQUFMLGdCQUFBQSxJQUFpQixZQUFXLCtEQUFlLEVBQUMsVUFBSyxlQUFMLG1CQUFpQixTQUFTLFFBQVEsSUFBSTtBQUFBO0FBRXZGLFFBQU0sRUFBRSxnQkFBZ0IsZ0JBQWdCLGNBQWMsbUJBQW1CLElBQUksNEJBQVcsQ0FBQztBQUV6RixRQUFNLFFBQVEsc0NBQWdCLFVBQVU7QUFFeEMsUUFBTSxjQUFjLGtEQUFzQixVQUFVO0FBRXBELE1BQUksYUFBYTtBQUNqQixNQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxHQUFHO0FBQzlCLGlCQUFhO0FBQUEsRUFDZjtBQUNBLFFBQU0sWUFBVyxxQkFBZ0IsSUFBSSxJQUFJLE1BQXhCLFlBQTZCLG9CQUFJLElBQWlDO0FBQ25GLFFBQU0sa0JBQWlCLGNBQVMsSUFBSSxLQUFLLE1BQWxCLFlBQXVCLElBQUkseUNBQUFWLENBQW9CO0FBQ3RFLFdBQVMsSUFBSSxPQUFPLGNBQWM7QUFDbEMsa0JBQWdCLElBQUksTUFBTSxRQUFRO0FBRWxDLE1BQUksWUFBWTtBQUVkLFVBQU0sRUFBRSxrQkFBa0IsSUFBSSx3QkFBd0IsTUFBTSxDQUFDLE9BQU8sV0FBVyxDQUFDO0FBQ2hGLHNCQUFrQixLQUFLLGdEQUFTLENBQUMsbUJBQW1CLENBQUMsRUFBRSxVQUFVLGNBQWM7QUFBQSxFQUNqRjtBQUNBLFFBQU0sRUFBRSxnQkFBZ0IsTUFBTSxnQkFBZ0IsSUFBSSx3QkFBd0IsSUFBSTtBQUU5RSxRQUFNLHNCQUFzQiwwQ0FBa0I7QUFHOUMsUUFBTSxxQkFBcUIsNENBQUs7QUFBTCxJQUN6QixlQUFlO0FBQUEsTUFDYix5Q0FBQUMsQ0FBSSxDQUFDLFFBQVE7QUFDWCxjQUFNLGdCQUFnQixvQkFBb0IsSUFBSSxPQUFPO0FBQ3JELGNBQU0sYUFBYSxpQ0FBSyxnQkFBTCxFQUFvQixNQUFNLElBQUksS0FBSztBQUN0RCxZQUFJLHVCQUF1QixVQUFVLEdBQUc7QUFDdEMsaUJBQU87QUFBQSxRQUNUO0FBQ0EsZUFBTztBQUFBLE1BQ1QsQ0FBQztBQUFBLElBQ0g7QUFBQSxJQUNBLGVBQWU7QUFBQSxNQUNiLHlDQUFBQSxDQUFJLENBQUMsQ0FBQyxLQUFLLFdBQVcsTUFBTTtBQUMxQixlQUFPLGlDQUFLLE1BQUwsRUFBVSxNQUFNLFlBQVk7QUFBQSxNQUNyQyxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0YsRUFBRTtBQUFBLElBQ0EsMkNBQUksQ0FBeUQsQ0FBQyxLQUFLLFVBQVU7QUFsSGpGLFVBQUFNO0FBb0hNLFVBQUksQ0FBQyxPQUFPO0FBQ1YsZUFBTztBQUFBLE1BQ1Q7QUFFQSxVQUNFLFFBQVEsU0FDUixJQUFJLEtBQUssQ0FBQyxRQUFLO0FBMUh2QixZQUFBQSxLQUFBRztBQTBIMEIsaUJBQUFILE1BQUEsSUFBSSxTQUFKLGdCQUFBQSxJQUFVLGdCQUFhRyxNQUFBLE1BQU0sU0FBTixnQkFBQUEsSUFBWSxhQUFZLElBQUksT0FBTyxNQUFNO0FBQUEsT0FBRSxHQUNwRjtBQUNBLGNBQU0sZUFBZSxJQUFJLFVBQVUsQ0FBQyxRQUFRLElBQUksT0FBTyxNQUFNLEVBQUU7QUFDL0QsWUFBSSxlQUFlLElBQUk7QUFDckIsZ0JBQU0sY0FBYyxJQUFJLFlBQVk7QUFDcEMsY0FBSSxZQUFZLElBQUksaUNBQ2YsUUFEZTtBQUFBLFlBRWxCLFdBQVcsWUFBWTtBQUFBLFlBQ3ZCLGdCQUFlSCxNQUFBLE1BQU0sa0JBQU4sT0FBQUEsTUFBdUIsTUFBTTtBQUFBLFVBQzlDO0FBQUEsUUFDRjtBQUVBLGVBQU8sQ0FBQyxHQUFHLEdBQUc7QUFBQSxNQUNoQjtBQUNBLGFBQU8sQ0FBQyxHQUFHLEtBQUssS0FBSztBQUFBLElBQ3ZCLEdBQUcsQ0FBQyxDQUFDO0FBQUEsSUFDTCxnREFBUyxDQUFDLG1CQUFtQjtBQUFBLEVBQy9CO0FBRUEsUUFBTSxhQUFhLElBQUksa0RBQUFNLENBQXlCLEtBQUs7QUFFckQsUUFBTSxzQkFBc0IsMENBQWtCO0FBRTlDLFFBQU0sT0FBTyxDQUFPLFlBQW9CO0FBQ3RDLGVBQVcsS0FBSyxJQUFJO0FBQ3BCLFFBQUk7QUFDRixZQUFNLGNBQWMsTUFBTSxnQkFBZ0IsT0FBTztBQUNqRCxZQUFNLG1CQUFtQixvQkFBb0IsaUNBQ3hDLGNBRHdDO0FBQUEsUUFFM0MsUUFBUSxzQkFBc0I7QUFBQSxNQUNoQyxFQUFDO0FBQ0QsWUFBTSxZQUFZLEtBQUssa0JBQWtCLGtCQUFrQjtBQUFBLFFBQ3pELFVBQVU7QUFBQSxRQUNWO0FBQUEsTUFDRixDQUFDO0FBQ0QsYUFBTztBQUFBLElBQ1QsVUFBRTtBQUNBLGlCQUFXLEtBQUssS0FBSztBQUFBLElBQ3ZCO0FBQUEsRUFDRjtBQUVBLFFBQU0sU0FBUyxDQUFPLFNBQWlCLHdCQUE4QztBQUNuRixVQUFNLFlBQVksS0FBSyxJQUFJO0FBQzNCLFVBQU0sa0JBQ0osT0FBTyx3QkFBd0IsV0FDM0IsRUFBRSxJQUFJLHFCQUFxQixTQUFTLElBQUksVUFBVSxJQUNsRDtBQUNOLGVBQVcsS0FBSyxJQUFJO0FBQ3BCLFFBQUk7QUFDRixZQUFNLGdCQUFnQixNQUFNLEtBQUssaUJBQWlCLGdCQUFnQixTQUFTLGVBQWU7QUFDMUYsWUFBTSx1QkFBdUIsb0JBQW9CLGFBQWE7QUFDOUQsWUFBTSxZQUFZLEtBQUssa0JBQWtCLHNCQUFzQjtBQUFBLFFBQzdELE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxNQUNaLENBQUM7QUFDRCxhQUFPO0FBQUEsSUFDVCxVQUFFO0FBQ0EsaUJBQVcsS0FBSyxLQUFLO0FBQUEsSUFDdkI7QUFBQSxFQUNGO0FBRUEsV0FBUyxVQUFVO0FBQ2pCLHdCQUFvQixLQUFLO0FBQ3pCLHdCQUFvQixTQUFTO0FBQzdCLG9CQUFnQixPQUFPLElBQUk7QUFBQSxFQUM3QjtBQUNBLE9BQUssS0FBSyxxREFBQVQsQ0FBVSxjQUFjLE9BQU87QUFFekMsU0FBTztBQUFBLElBQ0wsbUJBQW1CO0FBQUEsSUFDbkIscUJBQXFCO0FBQUEsSUFDckI7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGO0FBRUEsU0FBUyx1QkFDUCxLQUM0QjtBQUM1QixTQUFRLElBQTBCLFVBQVU7QUFDOUM7OztBRXJNTyxTQUFTLGtCQUFrQjtBQUNoQyxRQUFNLDJCQUEyQixDQUFPLFNBQWU7QUFDckQsUUFBSSxLQUFLLDBCQUEwQixJQUFJO0FBQ3ZDLFVBQU0sS0FBSyxXQUFXO0FBQUEsRUFDeEI7QUFDQSxRQUFNLFlBQW9CLFlBQVksb0JBQW9CO0FBQzFELFNBQU8sRUFBRSxXQUFXLG9DQUFvQyx5QkFBeUI7QUFDbkY7OztBQ1BPLFNBQVMsa0JBQWtCO0FBQ2hDLFFBQU0sMkJBQTJCLENBQU8sU0FBZTtBQUNyRCxRQUFJLEtBQUssMEJBQTBCLElBQUk7QUFDdkMsVUFBTSxLQUFLLFdBQVc7QUFBQSxFQUN4QjtBQUNBLFFBQU0sWUFBb0IsWUFBWSxvQkFBb0I7QUFDMUQsU0FBTyxFQUFFLFdBQVcsb0NBQW9DLHlCQUF5QjtBQUNuRjs7O0FDVk8sU0FBUyxrQkFBa0I7QUFDaEMsUUFBTSxZQUFvQixDQUFDLFlBQVksUUFBUSxHQUFHLFlBQVksYUFBYSxDQUFDLEVBQUUsS0FBSyxHQUFHO0FBQ3RGLFNBQU8sRUFBRSxVQUFVO0FBQ3JCOzs7QUNITyxTQUFTLG1CQUFtQjtBQUNqQyxRQUFNLFlBQW9CLENBQUMsWUFBWSxRQUFRLEdBQUcsWUFBWSxxQkFBcUIsQ0FBQyxFQUFFLEtBQUssR0FBRztBQUM5RixTQUFPLEVBQUUsVUFBVTtBQUNyQjs7O0FDSE8sU0FBUyxzQkFBc0I7QUFFcEMsUUFBTSxZQUFZO0FBQ2xCLFNBQU8sRUFBRSxVQUFVO0FBQ3JCOzs7QUNOTyxTQUFTLG1CQUFtQjtBQUNqQyxRQUFNLFlBQVk7QUFDbEIsU0FBTyxFQUFFLFVBQVU7QUFDckI7OztBQ0tzQztBQUNLO0FBVXBDLFNBQVMsZ0JBQWdCLE9BQXlCO0FBQ3ZELFFBQU0sZ0JBQWdCO0FBQUEsSUFDcEI7QUFBQSxJQUNBLHNEQUFVLENBQUM7QUFBQSxJQUNYLHNEQUFVLENBQUM7QUFBQSxJQUNYLHNEQUFVLENBQUM7QUFBQSxJQUNYLHNEQUFVLENBQUM7QUFBQSxFQUNiO0FBRUEsU0FBTztBQUNUO0FBRU8sU0FBUyxtQkFBbUIsVUFBNEIsUUFBc0I7QUFDbkYsUUFBTSxhQUFhLElBQUksNENBQUFDLENBQTZCLENBQUMsY0FBYztBQUNqRSxVQUFNLGdCQUFnQixNQUFNO0FBQzFCLGdCQUFVLEtBQUssS0FBSztBQUFBLElBQ3RCO0FBRUEsV0FBTyxRQUFRLENBQUMsUUFBUTtBQUV0QixZQUFNLEdBQUcsS0FBSyxhQUFhO0FBQUEsSUFDN0IsQ0FBQztBQUVELFVBQU0sY0FBYyxNQUFNO0FBQ3hCLGFBQU8sUUFBUSxDQUFDLFFBQVE7QUFFdEIsY0FBTSxJQUFJLEtBQUssYUFBYTtBQUFBLE1BQzlCLENBQUM7QUFBQSxJQUNIO0FBQ0EsV0FBTztBQUFBLEVBQ1QsQ0FBQyxFQUFFLEtBQUssK0NBQUFILENBQVUsS0FBSyxDQUFDO0FBRXhCLFNBQU87QUFDVDtBQUtBLFNBQVMsbUJBQ1AsTUFDQSxTQUNBLHVCQUF1QixNQUM2QztBQUNwRSxRQUFNLG1CQUFtQixLQUFLO0FBQzlCLFFBQU0sa0JBQWtCLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxLQUFLLEtBQUssbUJBQW1CLE9BQU8sQ0FBQyxDQUFDO0FBQzFGLFFBQU0sa0JBQW9DLENBQUM7QUFFM0Msa0JBQWdCLFFBQVEsQ0FBQyxnQkFBZ0I7QUFDdkMsWUFBUSxRQUFRLENBQUMsV0FBVztBQUMxQixZQUFNLG1CQUFtQixNQUFNO0FBQUEsUUFDN0IsWUFBWSxrQkFBa0IsT0FBTztBQUFBLE1BQ3ZDLEVBQ0c7QUFBQSxRQUNDLENBQUMsVUFDQyxNQUFNLFdBQVc7QUFBQSxTQUVoQixDQUFDLHdCQUF3QixNQUFNO0FBQUEsTUFDcEMsRUFDQyxJQUFJLENBQUMsVUFBMEI7QUFDOUIsZUFBTztBQUFBLFVBQ0w7QUFBQSxVQUNBLGFBQWE7QUFBQSxVQUNiLFFBQVEsTUFBTTtBQUFBLFFBQ2hCO0FBQUEsTUFDRixDQUFDO0FBRUgsc0JBQWdCLEtBQUssR0FBRyxnQkFBZ0I7QUFBQSxJQUMxQyxDQUFDO0FBQUEsRUFDSCxDQUFDO0FBRUQsU0FBTyxFQUFFLGlCQUFpQixjQUFjLGdCQUFnQjtBQUMxRDtBQUtBLFNBQVMsd0JBQ1AsYUFDQSxZQUNBLHVCQUF1QixPQUNMO0FBQ2xCLFFBQU0sRUFBRSxTQUFTLE1BQU0sS0FBSyxJQUFJO0FBQ2hDLFFBQU0sbUJBQW1CLE1BQU0sS0FBSyxZQUFZLGtCQUFrQixPQUFPLENBQUMsRUFDdkU7QUFBQSxJQUNDLENBQUMsU0FDRSxDQUFDLFdBQVcsUUFBUSxTQUFTLElBQUksTUFBTSxPQUN2QyxDQUFDLFFBQVEsSUFBSSxTQUFTLFVBQ3RCLENBQUMsUUFBUSxJQUFJLGNBQWM7QUFBQSxLQUUzQixDQUFDLHdCQUF3QixJQUFJO0FBQUEsRUFDbEMsRUFDQyxJQUFJLENBQUMsVUFBMEI7QUFDOUIsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBLGFBQWE7QUFBQSxNQUNiLFFBQVEsTUFBTTtBQUFBLElBQ2hCO0FBQUEsRUFDRixDQUFDO0FBRUgsU0FBTztBQUNUO0FBT08sU0FBUywwQkFDZCxNQUNBLFNBQ0EsU0FDZ0Y7QUFsSWxGO0FBbUlFLFFBQU0sd0JBQXVCLGFBQVEseUJBQVIsWUFBZ0M7QUFDN0QsUUFBTSx3QkFBZ0MsYUFBUSxtQkFBUixZQUEwQjtBQUNoRSxRQUFNLGFBQWEsTUFBTTtBQUFBLEtBQ3ZCLG9CQUFJLElBQUk7QUFBQSxNQUNOLHFEQUFBRSxDQUFVO0FBQUEsTUFDVixxREFBQUEsQ0FBVTtBQUFBLE1BQ1YscURBQUFBLENBQVU7QUFBQSxNQUNWLHFEQUFBQSxDQUFVO0FBQUEsTUFDVixxREFBQUEsQ0FBVTtBQUFBLE1BQ1YscURBQUFBLENBQVU7QUFBQSxNQUNWLHFEQUFBQSxDQUFVO0FBQUEsTUFDVixxREFBQUEsQ0FBVTtBQUFBLE1BQ1YsR0FBRztBQUFBLElBQ0wsQ0FBQyxHQUFFLE9BQU87QUFBQSxFQUNaO0FBRUEsUUFBTSxhQUFhLGtCQUFrQixNQUFNLEdBQUcsVUFBVSxFQUFFO0FBQUEsSUFDeEQseUNBQUFILENBQUksQ0FBQ08sVUFBUztBQUNaLFlBQU0sT0FBTyxtQkFBbUJBLE9BQU0sU0FBUyxvQkFBb0I7QUFDbkUsVUFBSSxNQUFNLHlDQUF5QyxLQUFLLGdCQUFnQixNQUFNLEtBQUssSUFBSTtBQUN2RixhQUFPO0FBQUEsSUFDVCxDQUFDO0FBQUEsSUFDRCwrQ0FBQU4sQ0FBVSxtQkFBbUIsTUFBTSxTQUFTLG9CQUFvQixDQUFDO0FBQUEsRUFDbkU7QUFFQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLDRCQUNkLGFBQ0EsaUJBQzhCO0FBQzlCLFFBQU0sYUFBYSx5QkFBeUIsYUFBYSxHQUFHLHNCQUFzQixFQUFFO0FBQUEsSUFDbEYseUNBQUFELENBQUksQ0FBQ0ssaUJBQWdCO0FBQ25CLFlBQU0sT0FBTyx3QkFBd0JBLGNBQWEsZUFBZTtBQUNqRSxVQUFJLE1BQU0seUNBQXlDLEtBQUssTUFBTSxLQUFLLElBQUk7QUFDdkUsYUFBTztBQUFBLElBQ1QsQ0FBQztBQUFBLElBQ0QsK0NBQUFKLENBQVUsd0JBQXdCLGFBQWEsZUFBZSxDQUFDO0FBQUEsRUFDakU7QUFFQSxTQUFPO0FBQ1Q7QUFFTyxTQUFTLG1CQUNkLGFBQ0EsT0FDQTtBQUNBLFFBQU0sYUFBYSxJQUFJLDRDQUFBRyxDQUVyQixDQUFDLGNBQWM7QUFDZixVQUFNLFNBQVMsSUFDVixXQUNBO0FBQ0gsZ0JBQVUsS0FBSyxNQUFNO0FBQUEsSUFDdkI7QUFFQSxnQkFBWSxHQUFHLE9BQU8sTUFBTTtBQUU1QixVQUFNLGNBQWMsTUFBTTtBQUV4QixrQkFBWSxJQUFJLE9BQU8sTUFBTTtBQUFBLElBQy9CO0FBQ0EsV0FBTztBQUFBLEVBQ1QsQ0FBQztBQUVELFNBQU87QUFDVDtBQUVPLFNBQVMsMkJBQTJCLGFBQStCO0FBQ3hFLFNBQU8sbUJBQW1CLGFBQWEsc0RBQVUsQ0FBQyxxQkFBcUI7QUFDekU7QUFFTyxTQUFTLHNCQUFzQixPQUFjO0FBQ2xELFNBQU8sbUJBQW1CLE9BQU8sc0RBQVUsQ0FBQyxjQUFjLEVBQUU7QUFBQSxJQUMxRCx5Q0FBQUosQ0FBSSxDQUFDLENBQUMsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUNsQztBQUNGOzs7QUMvTXFGO0FBUTlFLFNBQVMsNEJBQTRCLGFBQWlDLGdCQUFnQixLQUFNO0FBQ2pHLE1BQUksZ0JBQWdCLEtBQU0sUUFBTyx5Q0FBRSxDQUFDLEtBQUs7QUFDekMsUUFBTSxRQUFRLGdEQUFTLENBQUMsYUFBYSxhQUFhLEVBQUUsU0FBUyxLQUFLLENBQUMsRUFBRSxLQUFLLHlDQUFBQSxDQUFJLE1BQU0sSUFBSSxDQUFDO0FBQ3pGLFFBQU0sZUFBb0MsTUFBTTtBQUFBLElBQzlDLDhDQUFPLENBQUM7QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLE1BQU0sTUFBTSw0Q0FBQWMsQ0FBTyx5Q0FBRSxDQUFDLEtBQUssR0FBRyxhQUFhLEtBQUssZ0RBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUFBLElBQ25FLENBQUM7QUFBQSxJQUNELDJEQUFvQixDQUFDO0FBQUEsRUFDdkI7QUFDQSxTQUFPO0FBQ1Q7OztBQ1RBLFNBQVMsbUJBQXdDLEtBQWEsT0FBZ0I7QUFDNUUsTUFBSSxPQUFPLGlCQUFpQixhQUFhO0FBQ3ZDLFFBQUksTUFBTSxpQ0FBaUM7QUFDM0M7QUFBQSxFQUNGO0FBRUEsTUFBSTtBQUNGLFFBQUksT0FBTztBQUNULFlBQU0sbUJBQW1CLE9BQU87QUFBQSxRQUM5QixPQUFPLFFBQVEsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLE1BQUssTUFBTUEsV0FBVSxFQUFFO0FBQUEsTUFDMUQ7QUFDQSxtQkFBYSxRQUFRLEtBQUssS0FBSyxVQUFVLGdCQUFnQixDQUFDO0FBQUEsSUFDNUQ7QUFBQSxFQUNGLFNBQVMsT0FBTztBQUNkLFFBQUksTUFBTSx3Q0FBd0MsS0FBSyxFQUFFO0FBQUEsRUFDM0Q7QUFDRjtBQU1BLFNBQVMscUJBQTBDLEtBQTRCO0FBQzdFLE1BQUksT0FBTyxpQkFBaUIsYUFBYTtBQUN2QyxRQUFJLE1BQU0saUNBQWlDO0FBQzNDLFdBQU87QUFBQSxFQUNUO0FBRUEsTUFBSTtBQUNGLFVBQU0sT0FBTyxhQUFhLFFBQVEsR0FBRztBQUNyQyxRQUFJLENBQUMsTUFBTTtBQUNULFVBQUksS0FBSyxpQkFBaUIsR0FBRyxtQ0FBbUM7QUFDaEUsYUFBTztBQUFBLElBQ1Q7QUFDQSxXQUFPLEtBQUssTUFBTSxJQUFJO0FBQUEsRUFDeEIsU0FBUyxPQUFPO0FBQ2QsUUFBSSxNQUFNLDBDQUEwQyxLQUFLLEVBQUU7QUFDM0QsV0FBTztBQUFBLEVBQ1Q7QUFDRjtBQU1PLFNBQVMsNEJBQ2QsS0FDeUQ7QUFDekQsU0FBTztBQUFBLElBQ0wsTUFBTSxNQUFNLHFCQUF3QixHQUFHO0FBQUEsSUFDdkMsTUFBTSxDQUFDLFVBQWEsbUJBQXNCLEtBQUssS0FBSztBQUFBLEVBQ3REO0FBQ0Y7OztBQzVEQSxJQUFNLG1CQUFtQixHQUFHLFNBQVM7QUFtQzlCLElBQU0scUJBQXVDO0FBQUEsRUFDbEQsY0FBYztBQUFBLEVBQ2QsY0FBYztBQUFBLEVBQ2QsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsVUFBVTtBQUNaO0FBU0EsSUFBTSxFQUFFLE1BQU0sS0FBSyxJQUFJLDRCQUE2QyxnQkFBZ0I7QUFNN0UsU0FBUyxnQkFDZCxhQUlBLGNBQXVCLE9BQ2pCO0FBQ04sTUFBSSxnQkFBZ0IsTUFBTTtBQUN4QjtBQUFBLEVBQ0Y7QUFDQSxPQUFLLFdBQVc7QUFDbEI7QUFTTyxTQUFTLGdCQUNkLFVBS0EsY0FBdUIsT0FDTDtBQXRGcEI7QUF1RkUsUUFBTSxXQUE2QjtBQUFBLElBQ2pDLGVBQWMsMENBQVUsaUJBQVYsWUFBMEIsbUJBQW1CO0FBQUEsSUFDM0QsZUFBYywwQ0FBVSxpQkFBVixZQUEwQixtQkFBbUI7QUFBQSxJQUMzRCxnQkFBZSwwQ0FBVSxrQkFBVixZQUEyQixtQkFBbUI7QUFBQSxJQUM3RCxnQkFBZSwwQ0FBVSxrQkFBVixZQUEyQixtQkFBbUI7QUFBQSxJQUM3RCxXQUFVLDBDQUFVLGFBQVYsWUFBc0IsbUJBQW1CO0FBQUEsRUFDckQ7QUFFQSxNQUFJLGFBQWE7QUFDZixXQUFPO0FBQUEsRUFDVCxPQUFPO0FBQ0wsVUFBTSxvQkFBb0IsS0FBSztBQUMvQixVQUFNLFNBQVMsa0NBQUssV0FBYyxnREFBcUIsQ0FBQztBQUN4RCxXQUFPO0FBQUEsRUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29uc3RhbnRzLnRzPzMwOGQiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvdXRpbHMudHM/ZDkwMyIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy90cmFjay1yZWZlcmVuY2UvdHJhY2stcmVmZXJlbmNlLnR5cGVzLnRzPzE4MjgiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvdHJhY2stcmVmZXJlbmNlL3RyYWNrLXJlZmVyZW5jZS51dGlscy50cz8zNTI1Iiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2hlbHBlci9kZXRlY3RNb2JpbGVCcm93c2VyLnRzP2I3ZTUiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvaGVscGVyL3VybC1yZWdleC50cz9iMGMyIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2hlbHBlci9lbWFpbFJlZ2V4LnRzP2E3ZmUiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvaGVscGVyL2Zsb2F0aW5nLW1lbnUudHM/NGU1YSIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9oZWxwZXIvdG9rZW5pemVyLnRzPzg3YjkiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvaGVscGVyL2V2ZW50R3JvdXBzLnRzPzBlMTgiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvbG9nZ2VyLnRzPzZkY2EiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvaGVscGVyL2dyaWQtbGF5b3V0cy50cz9hOWUwIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2hlbHBlci9zZXQtaGVscGVyLnRzPzFiMjMiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvaGVscGVyL2ZlYXR1cmVEZXRlY3Rpb24udHM/ZDlkZSIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9oZWxwZXIvdHJhbnNjcmlwdGlvbnMudHM/ZDNlYyIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy90eXBlcy50cz81NzU2Iiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL3NvcnRpbmcvc29ydC10cmFjay1idW5kbGVzLnRzPzZiMDMiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvc29ydGluZy9iYXNlLXNvcnQtZnVuY3Rpb25zLnRzP2RhOTEiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvc29ydGluZy9zb3J0LXBhcnRpY2lwYW50cy50cz8xMTc5Iiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2hlbHBlci9hcnJheS1oZWxwZXIudHM/ZWYxYyIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy90cmFjay1yZWZlcmVuY2UvdGVzdC11dGlscy50cz80ZjNjIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL3NvcnRpbmcvdGlsZS1hcnJheS11cGRhdGUudHM/MDViMSIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL21lZGlhVG9nZ2xlLnRzPzFhMGUiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQudHM/NTg3ZiIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL21lZGlhVHJhY2sudHM/MTZmMiIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9zdHlsZXMtaW50ZXJmYWNlL2NsYXNzLXByZWZpeGVyLnRzP2ZmNGQiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvb2JzZXJ2YWJsZXMvcm9vbS50cz83YjVmIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2NvbXBvbmVudHMvbWVkaWFEZXZpY2VTZWxlY3QudHM/Y2E5NCIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL2Rpc2Nvbm5lY3RCdXR0b24udHM/NDlmMCIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL2Nvbm5lY3Rpb25RdWFsaXR5SW5kaWNhdG9yLnRzPzVlNmEiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy90cmFja011dGVkSW5kaWNhdG9yLnRzPzE1MDkiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy9wYXJ0aWNpcGFudE5hbWUudHM/ZjY2YSIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL3BhcnRpY2lwYW50VGlsZS50cz9mZGFiIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2NvbXBvbmVudHMvY2hhdC50cz9hN2IxIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL29ic2VydmFibGVzL2RhdGFDaGFubmVsLnRzP2U3OGUiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy9zdGFydEF1ZGlvLnRzPzFmZGEiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy9zdGFydFZpZGVvLnRzPzQxYTgiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy9jaGF0VG9nZ2xlLnRzPzQ0NjUiLCJ3ZWJwYWNrOi8vbGl2ZWtpdC1tZWV0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtY29yZUAwLjExLjlfbGl2ZWtpdC1jbGllbnRAMi41LjlfdHNsaWJAMi43LjAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtY29yZS9zcmMvY29tcG9uZW50cy9mb2N1c1RvZ2dsZS50cz9lMzFlIiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL2NvbXBvbmVudHMvY2xlYXJQaW5CdXR0b24udHM/ZmE1MiIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9jb21wb25lbnRzL3Jvb20udHM/NjFkMyIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9vYnNlcnZhYmxlcy90cmFjay50cz83ZTQ4Iiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL29ic2VydmFibGVzL2RvbS1ldmVudC50cz85MTA2Iiwid2VicGFjazovL2xpdmVraXQtbWVldC8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLWNvcmVAMC4xMS45X2xpdmVraXQtY2xpZW50QDIuNS45X3RzbGliQDIuNy4wL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLWNvcmUvc3JjL3BlcnNpc3RlbnQtc3RvcmFnZS9sb2NhbC1zdG9yYWdlLWhlbHBlcnMudHM/Nzg3NCIsIndlYnBhY2s6Ly9saXZla2l0LW1lZXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1jb3JlQDAuMTEuOV9saXZla2l0LWNsaWVudEAyLjUuOV90c2xpYkAyLjcuMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1jb3JlL3NyYy9wZXJzaXN0ZW50LXN0b3JhZ2UvdXNlci1jaG9pY2VzLnRzPzlkMDQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNzc1ByZWZpeCA9ICdsayc7XG4iLCJpbXBvcnQgdHlwZSB7IFBhcnRpY2lwYW50LCBUcmFja1B1YmxpY2F0aW9uIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHsgTG9jYWxQYXJ0aWNpcGFudCwgUmVtb3RlUGFydGljaXBhbnQgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5cbmltcG9ydCB0eXBlIHsgUGluU3RhdGUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgVHJhY2tSZWZlcmVuY2UgfSBmcm9tICcuL3RyYWNrLXJlZmVyZW5jZSc7XG5pbXBvcnQgeyBpc0VxdWFsVHJhY2tSZWYgfSBmcm9tICcuL3RyYWNrLXJlZmVyZW5jZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xvY2FsKHA6IFBhcnRpY2lwYW50KSB7XG4gIHJldHVybiBwIGluc3RhbmNlb2YgTG9jYWxQYXJ0aWNpcGFudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVtb3RlKHA6IFBhcnRpY2lwYW50KSB7XG4gIHJldHVybiBwIGluc3RhbmNlb2YgUmVtb3RlUGFydGljaXBhbnQ7XG59XG5cbmV4cG9ydCBjb25zdCBhdHRhY2hJZlN1YnNjcmliZWQgPSAoXG4gIHB1YmxpY2F0aW9uOiBUcmFja1B1YmxpY2F0aW9uIHwgdW5kZWZpbmVkLFxuICBlbGVtZW50OiBIVE1MTWVkaWFFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCxcbikgPT4ge1xuICBpZiAoIXB1YmxpY2F0aW9uKSByZXR1cm47XG4gIGNvbnN0IHsgaXNTdWJzY3JpYmVkLCB0cmFjayB9ID0gcHVibGljYXRpb247XG4gIGlmIChlbGVtZW50ICYmIHRyYWNrKSB7XG4gICAgaWYgKGlzU3Vic2NyaWJlZCkge1xuICAgICAgdHJhY2suYXR0YWNoKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFjay5kZXRhY2goZWxlbWVudCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXJ0aWNpcGFudCB0cmFjayByZWZlcmVuY2UgaXMgcGlubmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXJ0aWNpcGFudFRyYWNrUmVmZXJlbmNlUGlubmVkKFxuICB0cmFja1JlZjogVHJhY2tSZWZlcmVuY2UsXG4gIHBpblN0YXRlOiBQaW5TdGF0ZSB8IHVuZGVmaW5lZCxcbik6IGJvb2xlYW4ge1xuICBpZiAocGluU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBwaW5TdGF0ZS5zb21lKChwaW5uZWRUcmFja1JlZikgPT4gaXNFcXVhbFRyYWNrUmVmKHBpbm5lZFRyYWNrUmVmLCB0cmFja1JlZikpO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNjcm9sbGJhciB3aWR0aCBieSBjcmVhdGluZyB0d28gSFRNTCBlbGVtZW50c1xuICogYW5kIG1lc3NhZ2luZyB0aGUgZGlmZmVyZW5jZS5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyV2lkdGgoKSB7XG4gIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBpbm5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgaW5uZXIuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4JztcblxuICBjb25zdCBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBvdXRlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIG91dGVyLnN0eWxlLnRvcCA9ICcwcHgnO1xuICBvdXRlci5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gIG91dGVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgb3V0ZXIuc3R5bGUud2lkdGggPSAnMjAwcHgnO1xuICBvdXRlci5zdHlsZS5oZWlnaHQgPSAnMTUwcHgnO1xuICBvdXRlci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG4gIGNvbnN0IHcxID0gaW5uZXIub2Zmc2V0V2lkdGg7XG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gIGxldCB3MiA9IGlubmVyLm9mZnNldFdpZHRoO1xuICBpZiAodzEgPT09IHcyKSB7XG4gICAgdzIgPSBvdXRlci5jbGllbnRXaWR0aDtcbiAgfVxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcbiAgY29uc3Qgc2Nyb2xsQmFyV2lkdGggPSB3MSAtIHcyO1xuICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG59XG4iLCIvKipcbiAqIFRoZSBUcmFja1JlZmVyZW5jZSB0eXBlIGlzIGEgbG9naWNhbCBncm91cGluZyBvZiBwYXJ0aWNpcGFudCBwdWJsaWNhdGlvbiBhbmQvb3Igc3Vic2NyaWJlZCB0cmFjay5cbiAqXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCwgVHJhY2ssIFRyYWNrUHVibGljYXRpb24gfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG4vLyAjIyBUcmFja1JlZmVyZW5jZSBUeXBlc1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlciA9IHtcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50O1xuICBwdWJsaWNhdGlvbj86IG5ldmVyO1xuICBzb3VyY2U6IFRyYWNrLlNvdXJjZTtcbn07XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBUcmFja1JlZmVyZW5jZSA9IHtcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50O1xuICBwdWJsaWNhdGlvbjogVHJhY2tQdWJsaWNhdGlvbjtcbiAgc291cmNlOiBUcmFjay5Tb3VyY2U7XG59O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyID0gVHJhY2tSZWZlcmVuY2UgfCBUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyO1xuXG4vLyAjIyMgVHJhY2tSZWZlcmVuY2UgVHlwZSBQcmVkaWNhdGVzXG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gaXNUcmFja1JlZmVyZW5jZSh0cmFja1JlZmVyZW5jZTogdW5rbm93bik6IHRyYWNrUmVmZXJlbmNlIGlzIFRyYWNrUmVmZXJlbmNlIHtcbiAgaWYgKHR5cGVvZiB0cmFja1JlZmVyZW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICBpc1RyYWNrUmVmZXJlbmNlU3Vic2NyaWJlZCh0cmFja1JlZmVyZW5jZSBhcyBUcmFja1JlZmVyZW5jZSkgfHxcbiAgICBpc1RyYWNrUmVmZXJlbmNlUHVibGlzaGVkKHRyYWNrUmVmZXJlbmNlIGFzIFRyYWNrUmVmZXJlbmNlKVxuICApO1xufVxuXG5mdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlU3Vic2NyaWJlZCh0cmFja1JlZmVyZW5jZT86IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcik6IGJvb2xlYW4ge1xuICBpZiAoIXRyYWNrUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoJ3BhcnRpY2lwYW50JykgJiZcbiAgICB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eSgnc291cmNlJykgJiZcbiAgICB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eSgndHJhY2snKSAmJlxuICAgIHR5cGVvZiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbj8udHJhY2sgIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzVHJhY2tSZWZlcmVuY2VQdWJsaXNoZWQodHJhY2tSZWZlcmVuY2U/OiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIpOiBib29sZWFuIHtcbiAgaWYgKCF0cmFja1JlZmVyZW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KCdwYXJ0aWNpcGFudCcpICYmXG4gICAgdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoJ3NvdXJjZScpICYmXG4gICAgdHJhY2tSZWZlcmVuY2UuaGFzT3duUHJvcGVydHkoJ3B1YmxpY2F0aW9uJykgJiZcbiAgICB0eXBlb2YgdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24gIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIoXG4gIHRyYWNrUmVmZXJlbmNlPzogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyLFxuKTogdHJhY2tSZWZlcmVuY2UgaXMgVHJhY2tSZWZlcmVuY2VQbGFjZWhvbGRlciB7XG4gIGlmICghdHJhY2tSZWZlcmVuY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0cmFja1JlZmVyZW5jZS5oYXNPd25Qcm9wZXJ0eSgncGFydGljaXBhbnQnKSAmJlxuICAgIHRyYWNrUmVmZXJlbmNlLmhhc093blByb3BlcnR5KCdzb3VyY2UnKSAmJlxuICAgIHR5cGVvZiB0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cbiIsImltcG9ydCB0eXBlIHsgVHJhY2sgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgdHlwZSB7IFBpblN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIgfSBmcm9tICcuL3RyYWNrLXJlZmVyZW5jZS50eXBlcyc7XG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlLCBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIgfSBmcm9tICcuL3RyYWNrLXJlZmVyZW5jZS50eXBlcyc7XG5cbi8qKlxuICogUmV0dXJucyBhIGlkIHRvIGlkZW50aWZ5IHRoZSBgVHJhY2tSZWZlcmVuY2VgIG9yIGBUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyYCBiYXNlZCBvblxuICogcGFydGljaXBhbnQsIHRyYWNrIHNvdXJjZSBhbmQgdHJhY2tTaWQuXG4gKiBAcmVtYXJrc1xuICogVGhlIGlkIHBhdHRlcm4gaXM6IGAke3BhcnRpY2lwYW50SWRlbnRpdHl9XyR7dHJhY2tTb3VyY2V9XyR7dHJhY2tTaWR9YCBmb3IgYFRyYWNrUmVmZXJlbmNlYFxuICogYW5kIGAke3BhcnRpY2lwYW50SWRlbnRpdHl9XyR7dHJhY2tTb3VyY2V9X3BsYWNlaG9sZGVyYCBmb3IgYFRyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXJgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2tSZWZlcmVuY2VJZCh0cmFja1JlZmVyZW5jZTogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyIHwgbnVtYmVyKSB7XG4gIGlmICh0eXBlb2YgdHJhY2tSZWZlcmVuY2UgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0cmFja1JlZmVyZW5jZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gYCR7dHJhY2tSZWZlcmVuY2V9YDtcbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIGAke3RyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5fV8ke3RyYWNrUmVmZXJlbmNlLnNvdXJjZX1fcGxhY2Vob2xkZXJgO1xuICB9IGVsc2UgaWYgKGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIGAke3RyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5fV8ke3RyYWNrUmVmZXJlbmNlLnB1YmxpY2F0aW9uLnNvdXJjZX1fJHt0cmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFja1NpZH1gO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2VuZXJhdGUgYSBpZCBmb3IgdGhlIGdpdmVuIHRyYWNrIHJlZmVyZW5jZTogJHt0cmFja1JlZmVyZW5jZX1gKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBUcmFja1JlZmVyZW5jZUlkID0gUmV0dXJuVHlwZTx0eXBlb2YgZ2V0VHJhY2tSZWZlcmVuY2VJZD47XG5cbi8qKiBSZXR1cm5zIHRoZSBTb3VyY2Ugb2YgdGhlIFRyYWNrUmVmZXJlbmNlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNrUmVmZXJlbmNlU291cmNlKHRyYWNrUmVmZXJlbmNlOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIpOiBUcmFjay5Tb3VyY2Uge1xuICBpZiAoaXNUcmFja1JlZmVyZW5jZSh0cmFja1JlZmVyZW5jZSkpIHtcbiAgICByZXR1cm4gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24uc291cmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cmFja1JlZmVyZW5jZS5zb3VyY2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxUcmFja1JlZihcbiAgYT86IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcixcbiAgYj86IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcixcbik6IGJvb2xlYW4ge1xuICBpZiAoYSA9PT0gdW5kZWZpbmVkIHx8IGIgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoaXNUcmFja1JlZmVyZW5jZShhKSAmJiBpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgcmV0dXJuIGEucHVibGljYXRpb24udHJhY2tTaWQgPT09IGIucHVibGljYXRpb24udHJhY2tTaWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGdldFRyYWNrUmVmZXJlbmNlSWQoYSkgPT09IGdldFRyYWNrUmVmZXJlbmNlSWQoYik7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYFRyYWNrUmVmZXJlbmNlYCBpcyBwaW5uZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYWNrUmVmZXJlbmNlUGlubmVkKFxuICB0cmFja1JlZmVyZW5jZTogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyLFxuICBwaW5TdGF0ZTogUGluU3RhdGUgfCB1bmRlZmluZWQsXG4pOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiBwaW5TdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGlzVHJhY2tSZWZlcmVuY2UodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIHBpblN0YXRlLnNvbWUoXG4gICAgICAocGlubmVkVHJhY2tSZWZlcmVuY2UpID0+XG4gICAgICAgIHBpbm5lZFRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJlxuICAgICAgICBpc1RyYWNrUmVmZXJlbmNlKHBpbm5lZFRyYWNrUmVmZXJlbmNlKSAmJlxuICAgICAgICBwaW5uZWRUcmFja1JlZmVyZW5jZS5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gdHJhY2tSZWZlcmVuY2UucHVibGljYXRpb24udHJhY2tTaWQsXG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIodHJhY2tSZWZlcmVuY2UpKSB7XG4gICAgcmV0dXJuIHBpblN0YXRlLnNvbWUoXG4gICAgICAocGlubmVkVHJhY2tSZWZlcmVuY2UpID0+XG4gICAgICAgIHBpbm5lZFRyYWNrUmVmZXJlbmNlLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSB0cmFja1JlZmVyZW5jZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJlxuICAgICAgICBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIocGlubmVkVHJhY2tSZWZlcmVuY2UpICYmXG4gICAgICAgIHBpbm5lZFRyYWNrUmVmZXJlbmNlLnNvdXJjZSA9PT0gdHJhY2tSZWZlcmVuY2Uuc291cmNlLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgYGN1cnJlbnRUcmFja1JlZmAgaXMgdGhlIHBsYWNlaG9sZGVyIGZvciBuZXh0IGBuZXh0VHJhY2tSZWZgLlxuICogQmFzZWQgb24gdGhlIHBhcnRpY2lwYW50IGlkZW50aXR5IGFuZCB0aGUgc291cmNlLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWNlaG9sZGVyUmVwbGFjZW1lbnQoXG4gIGN1cnJlbnRUcmFja1JlZjogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyLFxuICBuZXh0VHJhY2tSZWY6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcixcbikge1xuICAvLyBpZiAodHlwZW9mIG5leHRUcmFja1JlZiA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGN1cnJlbnRUcmFja1JlZiA9PT0gJ251bWJlcicpIHtcbiAgLy8gICByZXR1cm4gZmFsc2U7XG4gIC8vIH1cbiAgcmV0dXJuIChcbiAgICBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIoY3VycmVudFRyYWNrUmVmKSAmJlxuICAgIGlzVHJhY2tSZWZlcmVuY2UobmV4dFRyYWNrUmVmKSAmJlxuICAgIG5leHRUcmFja1JlZi5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gY3VycmVudFRyYWNrUmVmLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmXG4gICAgbmV4dFRyYWNrUmVmLnNvdXJjZSA9PT0gY3VycmVudFRyYWNrUmVmLnNvdXJjZVxuICApO1xufVxuIiwiLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBNb2JpbGUgYnJvd3NlciBkZXRlY3Rpb24gYmFzZWQgb24gYG5hdmlnYXRvci51c2VyQWdlbnRgIHN0cmluZy5cbiAqIERlZmF1bHRzIHRvIHJldHVybmluZyBgZmFsc2VgIGlmIG5vdCBpbiBhIGJyb3dzZXIuXG4gKlxuICogQHJlbWFya3NcbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpZiBmZWF0dXJlIGRldGVjdGlvbiBvciBvdGhlciBtZXRob2RzIGRvIG5vdCB3b3JrIVxuICpcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9Ccm93c2VyX2RldGVjdGlvbl91c2luZ190aGVfdXNlcl9hZ2VudCNtb2JpbGVfZGV2aWNlX2RldGVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNNb2JpbGVCcm93c2VyKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNXZWIoKSA/IC9Nb2JpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgOiBmYWxzZTtcbn1cbiIsIi8vIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4vLyBDb3B5cmlnaHQgKGMpIEtldmluIE3DpXJ0ZW5zc29uIDxrZXZpbm1hcnRlbnNzb25AZ21haWwuY29tPiBhbmQgRGllZ28gUGVyaW5pXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuaW50ZXJmYWNlIFJlZ0V4T3B0aW9ucyB7XG4gIC8qKlxuXHRcdE9ubHkgbWF0Y2ggYW4gZXhhY3Qgc3RyaW5nLiBVc2VmdWwgd2l0aCBgUmVnRXhwI3Rlc3RgIHRvIGNoZWNrIGlmIGEgc3RyaW5nIGlzIGEgVVJMLlxuXHRcdEBkZWZhdWx0VmFsdWUgZmFsc2Vcblx0XHQqL1xuICByZWFkb25seSBleGFjdD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVcmxSZWdFeHAob3B0aW9uczogUmVnRXhPcHRpb25zKSB7XG4gIG9wdGlvbnMgPSB7XG4gICAgLi4ub3B0aW9ucyxcbiAgfTtcblxuICBjb25zdCBwcm90b2NvbCA9IGAoPzooPzpbYS16XSs6KT8vLyk/YDtcbiAgY29uc3QgYXV0aCA9ICcoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT8nO1xuICBjb25zdCBpcCA9IG5ldyBSZWdFeHAoXG4gICAgJyg/OjI1WzAtNV18MlswLTRdXFxcXGR8MVxcXFxkXFxcXGR8WzEtOV1cXFxcZHxcXFxcZCkoPzpcXFxcLig/OjI1WzAtNV18MlswLTRdXFxcXGR8MVxcXFxkXFxcXGR8WzEtOV1cXFxcZHxcXFxcZCkpezN9JyxcbiAgICAnZycsXG4gICkuc291cmNlO1xuICBjb25zdCBob3N0ID0gJyg/Oig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XVstX10qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSc7XG4gIGNvbnN0IGRvbWFpbiA9ICcoPzpcXFxcLig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XS0qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSonO1xuICBjb25zdCB0bGQgPSBgKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZl17Mix9KSlcXFxcLj9gO1xuICBjb25zdCBwb3J0ID0gJyg/OjpcXFxcZHsyLDV9KT8nO1xuICBjb25zdCBwYXRoID0gJyg/OlsvPyNdW15cXFxcc1wiXSopPyc7XG4gIGNvbnN0IHJlZ2V4ID0gYCg/OiR7cHJvdG9jb2x9fHd3d1xcXFwuKSR7YXV0aH0oPzpsb2NhbGhvc3R8JHtpcH18JHtob3N0fSR7ZG9tYWlufSR7dGxkfSkke3BvcnR9JHtwYXRofWA7XG5cbiAgcmV0dXJuIG9wdGlvbnMuZXhhY3QgPyBuZXcgUmVnRXhwKGAoPzpeJHtyZWdleH0kKWAsICdpJykgOiBuZXcgUmVnRXhwKHJlZ2V4LCAnaWcnKTtcbn1cbiIsIi8vIHNvdXJjZSBjb2RlIGFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2VtYWlsLXJlZ2V4IGR1ZSB0byBFU00gaW1wb3J0IGluY29tcGF0aWJpbGl0aWVzIHdoZW4gdHJ5aW5nIHRvIHNlcnZlIGEgQ0pTIHZlcnNpb24gb2YgY29tcG9uZW50c1xuXG5jb25zdCByZWdleCA9ICdbXlxcXFwuXFxcXHNAOl0oPzpbXlxcXFxzQDpdKlteXFxcXHNAOlxcXFwuXSk/QFteXFxcXC5cXFxcc0BdKyg/OlxcXFwuW15cXFxcLlxcXFxzQF0rKSonO1xuXG5mdW5jdGlvbiBjcmVhdGVFbWFpbFJlZ0V4cCh7IGV4YWN0IH06IHsgZXhhY3Q/OiBib29sZWFuIH0gPSB7fSkge1xuICByZXR1cm4gZXhhY3QgPyBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCkgOiBuZXcgUmVnRXhwKHJlZ2V4LCAnZycpO1xufVxuZXhwb3J0IHsgY3JlYXRlRW1haWxSZWdFeHAgfTtcbiIsImltcG9ydCB7IGNvbXB1dGVQb3NpdGlvbiwgZmxpcCwgb2Zmc2V0LCBzaGlmdCB9IGZyb20gJ0BmbG9hdGluZy11aS9kb20nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHV0ZU1lbnVQb3NpdGlvbihcbiAgYnV0dG9uOiBIVE1MRWxlbWVudCxcbiAgbWVudTogSFRNTEVsZW1lbnQsXG4pOiBQcm9taXNlPHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfT4ge1xuICBjb25zdCB7IHgsIHkgfSA9IGF3YWl0IGNvbXB1dGVQb3NpdGlvbihidXR0b24sIG1lbnUsIHtcbiAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgIG1pZGRsZXdhcmU6IFtvZmZzZXQoNiksIGZsaXAoKSwgc2hpZnQoeyBwYWRkaW5nOiA1IH0pXSxcbiAgfSk7XG4gIHJldHVybiB7IHgsIHkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdhc0NsaWNrT3V0c2lkZShpbnNpZGVFbGVtZW50OiBIVE1MRWxlbWVudCwgZXZlbnQ6IE1vdXNlRXZlbnQpOiBib29sZWFuIHtcbiAgY29uc3QgaXNPdXRzaWRlID0gIWluc2lkZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpO1xuICByZXR1cm4gaXNPdXRzaWRlO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlRW1haWxSZWdFeHAgfSBmcm9tICcuL2VtYWlsUmVnZXgnO1xuaW1wb3J0IHsgY3JlYXRlVXJsUmVnRXhwIH0gZnJvbSAnLi91cmwtcmVnZXgnO1xuXG5leHBvcnQgdHlwZSBUb2tlbml6ZUdyYW1tYXIgPSB7IFt0eXBlOiBzdHJpbmddOiBSZWdFeHAgfTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZURlZmF1bHRHcmFtbWFyID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGVtYWlsOiBjcmVhdGVFbWFpbFJlZ0V4cCgpLFxuICAgIHVybDogY3JlYXRlVXJsUmVnRXhwKHt9KSxcbiAgfSBzYXRpc2ZpZXMgVG9rZW5pemVHcmFtbWFyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuaXplPFQgZXh0ZW5kcyBUb2tlbml6ZUdyYW1tYXI+KGlucHV0OiBzdHJpbmcsIGdyYW1tYXI6IFQpIHtcbiAgY29uc3QgbWF0Y2hlcyA9IE9iamVjdC5lbnRyaWVzKGdyYW1tYXIpXG4gICAgLm1hcCgoW3R5cGUsIHJ4XSwgd2VpZ2h0KSA9PlxuICAgICAgQXJyYXkuZnJvbShpbnB1dC5tYXRjaEFsbChyeCkpLm1hcCgoeyBpbmRleCwgMDogY29udGVudCB9KSA9PiAoe1xuICAgICAgICB0eXBlOiB0eXBlIGFzIGtleW9mIFQsXG4gICAgICAgIHdlaWdodCxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgaW5kZXg6IGluZGV4ID8/IDAsXG4gICAgICB9KSksXG4gICAgKVxuICAgIC5mbGF0KClcbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZCA9IGEuaW5kZXggLSBiLmluZGV4O1xuICAgICAgcmV0dXJuIGQgIT09IDAgPyBkIDogYS53ZWlnaHQgLSBiLndlaWdodDtcbiAgICB9KVxuICAgIC5maWx0ZXIoKHsgaW5kZXggfSwgaSwgYXJyKSA9PiB7XG4gICAgICBpZiAoaSA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICBjb25zdCBwcmV2ID0gYXJyW2kgLSAxXTtcbiAgICAgIHJldHVybiBwcmV2LmluZGV4ICsgcHJldi5jb250ZW50Lmxlbmd0aCA8PSBpbmRleDtcbiAgICB9KTtcblxuICBjb25zdCB0b2tlbnMgPSBbXTtcbiAgbGV0IHBvcyA9IDA7XG4gIGZvciAoY29uc3QgeyB0eXBlLCBjb250ZW50LCBpbmRleCB9IG9mIG1hdGNoZXMpIHtcbiAgICBpZiAoaW5kZXggPiBwb3MpIHRva2Vucy5wdXNoKGlucHV0LnN1YnN0cmluZyhwb3MsIGluZGV4KSk7XG4gICAgdG9rZW5zLnB1c2goeyB0eXBlLCBjb250ZW50IH0pO1xuICAgIHBvcyA9IGluZGV4ICsgY29udGVudC5sZW5ndGg7XG4gIH1cbiAgaWYgKGlucHV0Lmxlbmd0aCA+IHBvcykgdG9rZW5zLnB1c2goaW5wdXQuc3Vic3RyaW5nKHBvcykpO1xuICByZXR1cm4gdG9rZW5zO1xufVxuIiwiaW1wb3J0IHsgUGFydGljaXBhbnRFdmVudCwgUm9vbUV2ZW50IH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuXG5leHBvcnQgY29uc3QgYWxsUmVtb3RlUGFydGljaXBhbnRSb29tRXZlbnRzID0gW1xuICBSb29tRXZlbnQuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LlJvb21NZXRhZGF0YUNoYW5nZWQsXG5cbiAgUm9vbUV2ZW50LkFjdGl2ZVNwZWFrZXJzQ2hhbmdlZCxcbiAgUm9vbUV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcblxuICBSb29tRXZlbnQuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gIFJvb21FdmVudC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgUm9vbUV2ZW50LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICBSb29tRXZlbnQuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gIFJvb21FdmVudC5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkLFxuICBSb29tRXZlbnQuUGFydGljaXBhbnRBdHRyaWJ1dGVzQ2hhbmdlZCxcblxuICBSb29tRXZlbnQuVHJhY2tNdXRlZCxcbiAgUm9vbUV2ZW50LlRyYWNrVW5tdXRlZCxcbiAgUm9vbUV2ZW50LlRyYWNrUHVibGlzaGVkLFxuICBSb29tRXZlbnQuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgUm9vbUV2ZW50LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICBSb29tRXZlbnQuVHJhY2tTdWJzY3JpcHRpb25GYWlsZWQsXG4gIFJvb21FdmVudC5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICBSb29tRXZlbnQuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkLFxuXTtcblxuZXhwb3J0IGNvbnN0IGFsbFBhcnRpY2lwYW50Um9vbUV2ZW50cyA9IFtcbiAgLi4uYWxsUmVtb3RlUGFydGljaXBhbnRSb29tRXZlbnRzLFxuICBSb29tRXZlbnQuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgUm9vbUV2ZW50LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbl07XG5cbmV4cG9ydCBjb25zdCBwYXJ0aWNpcGFudFRyYWNrRXZlbnRzID0gW1xuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrUHVibGlzaGVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5wdWJsaXNoZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tNdXRlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1VubXV0ZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdHJlYW1TdGF0ZUNoYW5nZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdWJzY3JpYmVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5zdWJzY3JpYmVkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uUGVybWlzc2lvbkNoYW5nZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdWJzY3JpcHRpb25GYWlsZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG5dO1xuXG5leHBvcnQgY29uc3QgYWxsUmVtb3RlUGFydGljaXBhbnRFdmVudHMgPSBbXG4gIFBhcnRpY2lwYW50RXZlbnQuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LklzU3BlYWtpbmdDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlBhcnRpY2lwYW50TWV0YWRhdGFDaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tNdXRlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1VubXV0ZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tQdWJsaXNoZWQsXG4gIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgUGFydGljaXBhbnRFdmVudC5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCxcbl07XG5cbmV4cG9ydCBjb25zdCBhbGxQYXJ0aWNpcGFudEV2ZW50cyA9IFtcbiAgLi4uYWxsUmVtb3RlUGFydGljaXBhbnRFdmVudHMsXG4gIFBhcnRpY2lwYW50RXZlbnQuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG5dO1xuIiwiaW1wb3J0IHtcbiAgc2V0TG9nTGV2ZWwgYXMgc2V0Q2xpZW50U2RrTG9nTGV2ZWwsXG4gIHNldExvZ0V4dGVuc2lvbiBhcyBzZXRDbGllbnRTZGtMb2dFeHRlbnNpb24sXG4gIExvZ0xldmVsIGFzIExvZ0xldmVsRW51bSxcbn0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IGxvZ2xldmVsIGZyb20gJ2xvZ2xldmVsJztcblxuZXhwb3J0IGNvbnN0IGxvZyA9IGxvZ2xldmVsLmdldExvZ2dlcignbGstY29tcG9uZW50cy1qcycpO1xubG9nLnNldERlZmF1bHRMZXZlbCgnV0FSTicpO1xuXG50eXBlIExvZ0xldmVsID0gUGFyYW1ldGVyczx0eXBlb2Ygc2V0Q2xpZW50U2RrTG9nTGV2ZWw+WzBdO1xudHlwZSBTZXRMb2dMZXZlbE9wdGlvbnMgPSB7XG4gIGxpdmVLaXRDbGllbnRMb2dMZXZlbD86IExvZ0xldmVsO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGxvZyBsZXZlbCBmb3IgYm90aCB0aGUgYEBsaXZla2l0L2NvbXBvbmVudHMtcmVhY3RgIHBhY2thZ2UgYW5kIHRoZSBgQGxpdmVraXQtY2xpZW50YCBwYWNrYWdlLlxuICogVG8gc2V0IHRoZSBgQGxpdmVraXQtY2xpZW50YCBsb2cgaW5kZXBlbmRlbnRseSwgdXNlIHRoZSBgbGl2ZUtpdENsaWVudExvZ0xldmVsYCBwcm9wIG9uIHRoZSBgb3B0aW9uc2Agb2JqZWN0LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWw6IExvZ0xldmVsLCBvcHRpb25zOiBTZXRMb2dMZXZlbE9wdGlvbnMgPSB7fSk6IHZvaWQge1xuICBsb2cuc2V0TGV2ZWwobGV2ZWwpO1xuICBzZXRDbGllbnRTZGtMb2dMZXZlbChvcHRpb25zLmxpdmVLaXRDbGllbnRMb2dMZXZlbCA/PyBsZXZlbCk7XG59XG5cbnR5cGUgTG9nRXh0ZW5zaW9uID0gKGxldmVsOiBMb2dMZXZlbCwgbXNnOiBzdHJpbmcsIGNvbnRleHQ/OiBvYmplY3QpID0+IHZvaWQ7XG50eXBlIFNldExvZ0V4dGVuc2lvbk9wdGlvbnMgPSB7XG4gIGxpdmVLaXRDbGllbnRMb2dFeHRlbnNpb24/OiBMb2dFeHRlbnNpb247XG59O1xuXG4vKipcbiAqIFNldCB0aGUgbG9nIGV4dGVuc2lvbiBmb3IgYm90aCB0aGUgYEBsaXZla2l0L2NvbXBvbmVudHMtcmVhY3RgIHBhY2thZ2UgYW5kIHRoZSBgQGxpdmVraXQtY2xpZW50YCBwYWNrYWdlLlxuICogVG8gc2V0IHRoZSBgQGxpdmVraXQtY2xpZW50YCBsb2cgZXh0ZW5zaW9uLCB1c2UgdGhlIGBsaXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uYCBwcm9wIG9uIHRoZSBgb3B0aW9uc2Agb2JqZWN0LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nRXh0ZW5zaW9uKGV4dGVuc2lvbjogTG9nRXh0ZW5zaW9uLCBvcHRpb25zOiBTZXRMb2dFeHRlbnNpb25PcHRpb25zID0ge30pIHtcbiAgY29uc3Qgb3JpZ2luYWxGYWN0b3J5ID0gbG9nLm1ldGhvZEZhY3Rvcnk7XG5cbiAgbG9nLm1ldGhvZEZhY3RvcnkgPSAobWV0aG9kTmFtZSwgY29uZmlnTGV2ZWwsIGxvZ2dlck5hbWUpID0+IHtcbiAgICBjb25zdCByYXdNZXRob2QgPSBvcmlnaW5hbEZhY3RvcnkobWV0aG9kTmFtZSwgY29uZmlnTGV2ZWwsIGxvZ2dlck5hbWUpO1xuXG4gICAgY29uc3QgbG9nTGV2ZWwgPSBMb2dMZXZlbEVudW1bbWV0aG9kTmFtZV07XG4gICAgY29uc3QgbmVlZExvZyA9IGxvZ0xldmVsID49IGNvbmZpZ0xldmVsICYmIGxvZ0xldmVsIDwgTG9nTGV2ZWxFbnVtLnNpbGVudDtcblxuICAgIHJldHVybiAobXNnLCBjb250ZXh0PzogW21zZzogc3RyaW5nLCBjb250ZXh0OiBvYmplY3RdKSA9PiB7XG4gICAgICBpZiAoY29udGV4dCkgcmF3TWV0aG9kKG1zZywgY29udGV4dCk7XG4gICAgICBlbHNlIHJhd01ldGhvZChtc2cpO1xuICAgICAgaWYgKG5lZWRMb2cpIHtcbiAgICAgICAgZXh0ZW5zaW9uKGxvZ0xldmVsLCBtc2csIGNvbnRleHQpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG4gIGxvZy5zZXRMZXZlbChsb2cuZ2V0TGV2ZWwoKSk7IC8vIEJlIHN1cmUgdG8gY2FsbCBzZXRMZXZlbCBtZXRob2QgaW4gb3JkZXIgdG8gYXBwbHkgcGx1Z2luXG4gIHNldENsaWVudFNka0xvZ0V4dGVuc2lvbihvcHRpb25zLmxpdmVLaXRDbGllbnRMb2dFeHRlbnNpb24gPz8gZXh0ZW5zaW9uKTtcbn1cbiIsImltcG9ydCB7IGxvZyB9IGZyb20gJy4uL2xvZ2dlcic7XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBHcmlkTGF5b3V0RGVmaW5pdGlvbiA9IHtcbiAgLyoqIENvbHVtbiBjb3VudCBvZiB0aGUgZ3JpZCBsYXlvdXQuICovXG4gIGNvbHVtbnM6IG51bWJlcjtcbiAgLyoqIFJvdyBjb3VudCBvZiB0aGUgZ3JpZCBsYXlvdXQuICovXG4gIHJvd3M6IG51bWJlcjtcbiAgLy8gIyBDb25zdHJhaW50cyB0aGF0IGhhdmUgdG8gYmUgbWVldCB0byB1c2UgdGhpcyBsYXlvdXQuXG4gIC8qKlxuICAgKiBNaW5pbXVtIGdyaWQgY29udGFpbmVyIHdpZHRoIHJlcXVpcmVkIHRvIHVzZSB0aGlzIGxheW91dC5cbiAgICogQHJlbWFya3NcbiAgICogSWYgdGhpcyBjb25zdHJhaW50IGlzIG5vdCBtZXQsIHdlIHRyeSB0byBzZWxlY3QgYSBsYXlvdXQgd2l0aCBmZXdlciB0aWxlc1xuICAgKiAoYHRpbGVzPWNvbHVtbnMqcm93c2ApIHRoYXQgaXMgd2l0aGluIHRoZSBjb25zdHJhaW50LlxuICAgKi9cbiAgbWluV2lkdGg/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBNaW5pbXVtIGdyaWQgY29udGFpbmVyIGhlaWdodCByZXF1aXJlZCB0byB1c2UgdGhpcyBsYXlvdXQuXG4gICAqIEByZW1hcmtzXG4gICAqIElmIHRoaXMgY29uc3RyYWludCBpcyBub3QgbWV0LCB3ZSB0cnkgdG8gc2VsZWN0IGEgbGF5b3V0IHdpdGggZmV3ZXIgdGlsZXNcbiAgICogKGB0aWxlcz1jb2x1bW5zKnJvd3NgKSB0aGF0IGlzIHdpdGhpbiB0aGUgY29uc3RyYWludC5cbiAgICovXG4gIG1pbkhlaWdodD86IG51bWJlcjtcbiAgLyoqXG4gICAqIEZvciB3aGljaCBvcmllbnRhdGlvbiB0aGUgbGF5b3V0IGRlZmluaXRpb24gc2hvdWxkIGJlIGFwcGxpZWQuXG4gICAqIFdpbGwgYmUgdXNlZCBmb3IgYm90aCBsYW5kc2NhcGUgYW5kIHBvcnRyYWl0IGlmIG5vIHZhbHVlIGlzIHNwZWNpZmllZC5cbiAgICovXG4gIG9yaWVudGF0aW9uPzogJ2xhbmRzY2FwZScgfCAncG9ydHJhaXQnO1xufTtcblxuZXhwb3J0IHR5cGUgR3JpZExheW91dEluZm8gPSB7XG4gIC8qKiBMYXlvdXQgbmFtZSAoY29udmVudGlvbiBgPGNvbHVtbl9jb3VudD54PHJvd19jb3VudD5gKS4gKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogQ29sdW1uIGNvdW50IG9mIHRoZSBsYXlvdXQuICovXG4gIGNvbHVtbnM6IG51bWJlcjtcbiAgLyoqIFJvdyBjb3VudCBvZiB0aGUgbGF5b3V0LiAqL1xuICByb3dzOiBudW1iZXI7XG4gIC8vICMgQ29uc3RyYWludHMgdGhhdCBoYXZlIHRvIGJlIG1lZXQgdG8gdXNlIHRoaXMgbGF5b3V0LlxuICAvLyAjIyAxLiBQYXJ0aWNpcGFudCByYW5nZTpcbiAgLyoqIE1heGltdW0gdGlsZXMgdGhhdCBmaXQgaW50byB0aGlzIGxheW91dC4gKi9cbiAgbWF4VGlsZXM6IG51bWJlcjtcbiAgLy8gIyMgMi4gU2NyZWVuIHNpemUgbGltaXRzOlxuICAvKiogTWluaW11bSB3aWR0aCByZXF1aXJlZCB0byB1c2UgdGhpcyBsYXlvdXQuICovXG4gIG1pbldpZHRoOiBudW1iZXI7XG4gIC8qKiBNaW5pbXVtIGhlaWdodCByZXF1aXJlZCB0byB1c2UgdGhpcyBsYXlvdXQuICovXG4gIG1pbkhlaWdodDogbnVtYmVyO1xuICBvcmllbnRhdGlvbj86ICdsYW5kc2NhcGUnIHwgJ3BvcnRyYWl0Jztcbn07XG5cbmV4cG9ydCBjb25zdCBHUklEX0xBWU9VVFM6IEdyaWRMYXlvdXREZWZpbml0aW9uW10gPSBbXG4gIHtcbiAgICBjb2x1bW5zOiAxLFxuICAgIHJvd3M6IDEsXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAxLFxuICAgIHJvd3M6IDIsXG4gICAgb3JpZW50YXRpb246ICdwb3J0cmFpdCcsXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAyLFxuICAgIHJvd3M6IDEsXG4gICAgb3JpZW50YXRpb246ICdsYW5kc2NhcGUnLFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAyLFxuICAgIG1pbldpZHRoOiA1NjAsXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAzLFxuICAgIHJvd3M6IDMsXG4gICAgbWluV2lkdGg6IDcwMCxcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDQsXG4gICAgcm93czogNCxcbiAgICBtaW5XaWR0aDogOTYwLFxuICB9LFxuICB7XG4gICAgY29sdW1uczogNSxcbiAgICByb3dzOiA1LFxuICAgIG1pbldpZHRoOiAxMTAwLFxuICB9LFxuXSBhcyBjb25zdDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEdyaWRMYXlvdXQoXG4gIGxheW91dERlZmluaXRpb25zOiBHcmlkTGF5b3V0RGVmaW5pdGlvbltdLFxuICBwYXJ0aWNpcGFudENvdW50OiBudW1iZXIsXG4gIHdpZHRoOiBudW1iZXIsXG4gIGhlaWdodDogbnVtYmVyLFxuKTogR3JpZExheW91dEluZm8ge1xuICBpZiAobGF5b3V0RGVmaW5pdGlvbnMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQXQgbGVhc3Qgb25lIGdyaWQgbGF5b3V0IGRlZmluaXRpb24gbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgfVxuICBjb25zdCBsYXlvdXRzID0gZXhwYW5kQW5kU29ydExheW91dERlZmluaXRpb25zKGxheW91dERlZmluaXRpb25zKTtcbiAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApIHtcbiAgICByZXR1cm4gbGF5b3V0c1swXTtcbiAgfVxuICAvLyBGaW5kIHRoZSBiZXN0IGxheW91dCB0byBmaXQgYWxsIHBhcnRpY2lwYW50cy5cbiAgbGV0IGN1cnJlbnRMYXlvdXRJbmRleCA9IDA7XG4gIGNvbnN0IGNvbnRhaW5lck9yaWVudGF0aW9uID0gd2lkdGggLyBoZWlnaHQgPiAxID8gJ2xhbmRzY2FwZScgOiAncG9ydHJhaXQnO1xuICBsZXQgbGF5b3V0ID0gbGF5b3V0cy5maW5kKChsYXlvdXRfLCBpbmRleCwgYWxsTGF5b3V0cykgPT4ge1xuICAgIGN1cnJlbnRMYXlvdXRJbmRleCA9IGluZGV4O1xuICAgIGNvbnN0IGlzQmlnZ2VyTGF5b3V0QXZhaWxhYmxlID1cbiAgICAgIGFsbExheW91dHMuZmluZEluZGV4KChsLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpdHNPcmllbnRhdGlvbiA9ICFsLm9yaWVudGF0aW9uIHx8IGwub3JpZW50YXRpb24gPT09IGNvbnRhaW5lck9yaWVudGF0aW9uO1xuICAgICAgICBjb25zdCBsYXlvdXRJc0JpZ2dlclRoYW5DdXJyZW50ID0gaSA+IGluZGV4O1xuICAgICAgICBjb25zdCBsYXlvdXRGaXRzU2FtZUFtb3VudE9mUGFydGljaXBhbnRzID0gbC5tYXhUaWxlcyA9PT0gbGF5b3V0Xy5tYXhUaWxlcztcbiAgICAgICAgcmV0dXJuIGxheW91dElzQmlnZ2VyVGhhbkN1cnJlbnQgJiYgbGF5b3V0Rml0c1NhbWVBbW91bnRPZlBhcnRpY2lwYW50cyAmJiBmaXRzT3JpZW50YXRpb247XG4gICAgICB9KSAhPT0gLTE7XG4gICAgcmV0dXJuIGxheW91dF8ubWF4VGlsZXMgPj0gcGFydGljaXBhbnRDb3VudCAmJiAhaXNCaWdnZXJMYXlvdXRBdmFpbGFibGU7XG4gIH0pO1xuICBpZiAobGF5b3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBsYXlvdXQgPSBsYXlvdXRzW2xheW91dHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxheW91dCkge1xuICAgICAgbG9nLndhcm4oXG4gICAgICAgIGBObyBsYXlvdXQgZm91bmQgZm9yOiBwYXJ0aWNpcGFudENvdW50OiAke3BhcnRpY2lwYW50Q291bnR9LCB3aWR0aC9oZWlnaHQ6ICR7d2lkdGh9LyR7aGVpZ2h0fSBmYWxsYmFjayB0byBiaWdnZXN0IGF2YWlsYWJsZSBsYXlvdXQgKCR7bGF5b3V0fSkuYCxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gbGF5b3V0IG9yIGZhbGxiYWNrIGxheW91dCBmb3VuZC5gKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgbGF5b3V0IGZpdHMgaW50byB0aGUgc2NyZWVuIGNvbnN0cmFpbnRzLiBJZiBub3QsIHJlY3Vyc2l2ZWx5IGNoZWNrIHRoZSBuZXh0IHNtYWxsZXIgbGF5b3V0LlxuICBpZiAod2lkdGggPCBsYXlvdXQubWluV2lkdGggfHwgaGVpZ2h0IDwgbGF5b3V0Lm1pbkhlaWdodCkge1xuICAgIC8vIGNvbnN0IGN1cnJlbnRMYXlvdXRJbmRleCA9IGxheW91dHMuaW5kZXhPZihsYXlvdXQpO1xuICAgIGlmIChjdXJyZW50TGF5b3V0SW5kZXggPiAwKSB7XG4gICAgICBjb25zdCBzbWFsbGVyTGF5b3V0ID0gbGF5b3V0c1tjdXJyZW50TGF5b3V0SW5kZXggLSAxXTtcbiAgICAgIGxheW91dCA9IHNlbGVjdEdyaWRMYXlvdXQoXG4gICAgICAgIGxheW91dHMuc2xpY2UoMCwgY3VycmVudExheW91dEluZGV4KSxcbiAgICAgICAgc21hbGxlckxheW91dC5tYXhUaWxlcyxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBsYXlvdXQ7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRBbmRTb3J0TGF5b3V0RGVmaW5pdGlvbnMobGF5b3V0czogR3JpZExheW91dERlZmluaXRpb25bXSk6IEdyaWRMYXlvdXRJbmZvW10ge1xuICByZXR1cm4gWy4uLmxheW91dHNdXG4gICAgLm1hcCgobGF5b3V0KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBgJHtsYXlvdXQuY29sdW1uc314JHtsYXlvdXQucm93c31gLFxuICAgICAgICBjb2x1bW5zOiBsYXlvdXQuY29sdW1ucyxcbiAgICAgICAgcm93czogbGF5b3V0LnJvd3MsXG4gICAgICAgIG1heFRpbGVzOiBsYXlvdXQuY29sdW1ucyAqIGxheW91dC5yb3dzLFxuICAgICAgICBtaW5XaWR0aDogbGF5b3V0Lm1pbldpZHRoID8/IDAsXG4gICAgICAgIG1pbkhlaWdodDogbGF5b3V0Lm1pbkhlaWdodCA/PyAwLFxuICAgICAgICBvcmllbnRhdGlvbjogbGF5b3V0Lm9yaWVudGF0aW9uLFxuICAgICAgfSBzYXRpc2ZpZXMgR3JpZExheW91dEluZm87XG4gICAgfSlcbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEubWF4VGlsZXMgIT09IGIubWF4VGlsZXMpIHtcbiAgICAgICAgcmV0dXJuIGEubWF4VGlsZXMgLSBiLm1heFRpbGVzO1xuICAgICAgfSBlbHNlIGlmIChhLm1pbldpZHRoICE9PSAwIHx8IGIubWluV2lkdGggIT09IDApIHtcbiAgICAgICAgcmV0dXJuIGEubWluV2lkdGggLSBiLm1pbldpZHRoO1xuICAgICAgfSBlbHNlIGlmIChhLm1pbkhlaWdodCAhPT0gMCB8fCBiLm1pbkhlaWdodCAhPT0gMCkge1xuICAgICAgICByZXR1cm4gYS5taW5IZWlnaHQgLSBiLm1pbkhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH0pO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHNldERpZmZlcmVuY2U8VD4oc2V0QTogU2V0PFQ+LCBzZXRCOiBTZXQ8VD4pOiBTZXQ8VD4ge1xuICBjb25zdCBfZGlmZmVyZW5jZSA9IG5ldyBTZXQoc2V0QSk7XG4gIGZvciAoY29uc3QgZWxlbSBvZiBzZXRCKSB7XG4gICAgX2RpZmZlcmVuY2UuZGVsZXRlKGVsZW0pO1xuICB9XG4gIHJldHVybiBfZGlmZmVyZW5jZTtcbn1cbiIsIi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgc2NyZWVuIHNoYXJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdXBwb3J0c1NjcmVlblNoYXJpbmcoKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgISFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYVxuICApO1xufVxuIiwiaW1wb3J0IHR5cGUgeyBUcmFuc2NyaXB0aW9uU2VnbWVudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcblxuZXhwb3J0IHR5cGUgUmVjZWl2ZWRUcmFuc2NyaXB0aW9uU2VnbWVudCA9IFRyYW5zY3JpcHRpb25TZWdtZW50ICYge1xuICByZWNlaXZlZEF0TWVkaWFUaW1lc3RhbXA6IG51bWJlcjtcbiAgcmVjZWl2ZWRBdDogbnVtYmVyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZVRyYW5zY3JpcHRpb25TZWdtZW50cyhcbiAgc2VnbWVudHM6IFJlY2VpdmVkVHJhbnNjcmlwdGlvblNlZ21lbnRbXSxcbiAgc3luY1RpbWVzOiB7IHRpbWVzdGFtcDogbnVtYmVyOyBydHBUaW1lc3RhbXA/OiBudW1iZXIgfSxcbiAgbWF4QWdlID0gMCxcbikge1xuICByZXR1cm4gc2VnbWVudHMuZmlsdGVyKChzZWdtZW50KSA9PiB7XG4gICAgY29uc3QgaGFzVHJhY2tTeW5jID0gISFzeW5jVGltZXMucnRwVGltZXN0YW1wO1xuICAgIGNvbnN0IGN1cnJlbnRUcmFja1RpbWUgPSBzeW5jVGltZXMucnRwVGltZXN0YW1wID8/IHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4gKyBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAvLyBpZiBhIHNlZ21lbnQgYXJyaXZlcyBsYXRlLCBjb25zaWRlciBzdGFydFRpbWUgdG8gYmUgdGhlIG1lZGlhIHRpbWVzdGFtcCBmcm9tIHdoZW4gdGhlIHNlZ21lbnQgd2FzIHJlY2VpdmVkIGNsaWVudCBzaWRlXG4gICAgY29uc3QgZGlzcGxheVN0YXJ0VGltZSA9IGhhc1RyYWNrU3luY1xuICAgICAgPyBNYXRoLm1heChzZWdtZW50LnJlY2VpdmVkQXRNZWRpYVRpbWVzdGFtcCwgc2VnbWVudC5zdGFydFRpbWUpXG4gICAgICA6IHNlZ21lbnQucmVjZWl2ZWRBdDtcbiAgICAvLyBcImFjdGl2ZVwiIGR1cmF0aW9uIGlzIGNvbXB1dGVkIGJ5IHRoZSBkaWZmIGJldHdlZW4gc3RhcnQgYW5kIGVuZCB0aW1lLCBzbyB3ZSBkb24ndCByZWx5IG9uIGRpc3BsYXlTdGFydFRpbWUgdG8gYWx3YXlzIGJlIHRoZSBzYW1lIGFzIHRoZSBzZWdtZW50J3Mgc3RhcnRUaW1lXG4gICAgY29uc3Qgc2VnbWVudER1cmF0aW9uID0gbWF4QWdlICsgc2VnbWVudC5lbmRUaW1lIC0gc2VnbWVudC5zdGFydFRpbWU7XG4gICAgcmV0dXJuIChcbiAgICAgIGN1cnJlbnRUcmFja1RpbWUgPj0gZGlzcGxheVN0YXJ0VGltZSAmJiBjdXJyZW50VHJhY2tUaW1lIDw9IGRpc3BsYXlTdGFydFRpbWUgKyBzZWdtZW50RHVyYXRpb25cbiAgICApO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1lZGlhVGltZXN0YW1wVG9UcmFuc2NyaXB0aW9uKFxuICBzZWdtZW50OiBUcmFuc2NyaXB0aW9uU2VnbWVudCxcbiAgdGltZXN0YW1wczogeyB0aW1lc3RhbXA6IG51bWJlcjsgcnRwVGltZXN0YW1wPzogbnVtYmVyIH0sXG4pOiBSZWNlaXZlZFRyYW5zY3JpcHRpb25TZWdtZW50IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zZWdtZW50LFxuICAgIHJlY2VpdmVkQXRNZWRpYVRpbWVzdGFtcDogdGltZXN0YW1wcy5ydHBUaW1lc3RhbXAgPz8gMCxcbiAgICByZWNlaXZlZEF0OiB0aW1lc3RhbXBzLnRpbWVzdGFtcCxcbiAgfTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiB1bmlxdWUgKGJ5IGlkKSBgVHJhbnNjcmlwdGlvblNlZ21lbnRgcy4gTGF0ZXN0IHdpbnMuIElmIHRoZSByZXN1bHRpbmcgYXJyYXkgd291bGQgYmUgbG9uZ2VyIHRoYW4gYHdpbmRvd1NpemVgLCB0aGUgYXJyYXkgd2lsbCBiZSByZWR1Y2VkIHRvIGB3aW5kb3dTaXplYCBsZW5ndGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZVNlZ21lbnRzPFQgZXh0ZW5kcyBUcmFuc2NyaXB0aW9uU2VnbWVudD4oXG4gIHByZXZTZWdtZW50czogVFtdLFxuICBuZXdTZWdtZW50czogVFtdLFxuICB3aW5kb3dTaXplOiBudW1iZXIsXG4pIHtcbiAgcmV0dXJuIFsuLi5wcmV2U2VnbWVudHMsIC4uLm5ld1NlZ21lbnRzXVxuICAgIC5yZWR1Y2VSaWdodCgoYWNjLCBzZWdtZW50KSA9PiB7XG4gICAgICBpZiAoIWFjYy5maW5kKCh2YWwpID0+IHZhbC5pZCA9PT0gc2VnbWVudC5pZCkpIHtcbiAgICAgICAgYWNjLnVuc2hpZnQoc2VnbWVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdIGFzIEFycmF5PFQ+KVxuICAgIC5zbGljZSgwIC0gd2luZG93U2l6ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWRBY3RpdmVTZWdtZW50c0NoYW5nZTxUIGV4dGVuZHMgVHJhbnNjcmlwdGlvblNlZ21lbnQ+KFxuICBwcmV2QWN0aXZlOiBUW10sXG4gIG5ld0FjdGl2ZTogVFtdLFxuKSB7XG4gIGlmIChuZXdBY3RpdmUubGVuZ3RoICE9PSBwcmV2QWN0aXZlLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiAhbmV3QWN0aXZlLmV2ZXJ5KChuZXdTZWdtZW50KSA9PiB7XG4gICAgcmV0dXJuIHByZXZBY3RpdmUuZmluZChcbiAgICAgIChwcmV2U2VnbWVudCkgPT5cbiAgICAgICAgcHJldlNlZ21lbnQuaWQgPT09IG5ld1NlZ21lbnQuaWQgJiZcbiAgICAgICAgcHJldlNlZ21lbnQudGV4dCA9PT0gbmV3U2VnbWVudC50ZXh0ICYmXG4gICAgICAgIHByZXZTZWdtZW50LmZpbmFsID09PSBuZXdTZWdtZW50LmZpbmFsICYmXG4gICAgICAgIHByZXZTZWdtZW50Lmxhbmd1YWdlID09PSBuZXdTZWdtZW50Lmxhbmd1YWdlICYmXG4gICAgICAgIHByZXZTZWdtZW50LnN0YXJ0VGltZSA9PT0gbmV3U2VnbWVudC5zdGFydFRpbWUgJiZcbiAgICAgICAgcHJldlNlZ21lbnQuZW5kVGltZSA9PT0gbmV3U2VnbWVudC5lbmRUaW1lLFxuICAgICk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCwgUGFydGljaXBhbnRLaW5kLCBUcmFjaywgVHJhY2tQdWJsaWNhdGlvbiB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB0eXBlIHsgVHJhY2tSZWZlcmVuY2UsIFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlciB9IGZyb20gJy4vdHJhY2stcmVmZXJlbmNlJztcblxuLy8gIyMgUGluU3RhdGUgVHlwZVxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCB0eXBlIFBpblN0YXRlID0gVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW107XG5leHBvcnQgY29uc3QgUElOX0RFRkFVTFRfU1RBVEU6IFBpblN0YXRlID0gW107XG5cbi8vICMjIFdpZGdldFN0YXRlIFR5cGVzXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgV2lkZ2V0U3RhdGUgPSB7XG4gIHNob3dDaGF0OiBib29sZWFuO1xuICB1bnJlYWRNZXNzYWdlczogbnVtYmVyO1xuICBzaG93U2V0dGluZ3M/OiBib29sZWFuO1xufTtcbmV4cG9ydCBjb25zdCBXSURHRVRfREVGQVVMVF9TVEFURTogV2lkZ2V0U3RhdGUgPSB7XG4gIHNob3dDaGF0OiBmYWxzZSxcbiAgdW5yZWFkTWVzc2FnZXM6IDAsXG4gIHNob3dTZXR0aW5nczogZmFsc2UsXG59O1xuXG4vLyAjIyBUcmFjayBTb3VyY2UgVHlwZXNcbmV4cG9ydCB0eXBlIFRyYWNrU291cmNlV2l0aE9wdGlvbnMgPSB7IHNvdXJjZTogVHJhY2suU291cmNlOyB3aXRoUGxhY2Vob2xkZXI6IGJvb2xlYW4gfTtcblxuZXhwb3J0IHR5cGUgU291cmNlc0FycmF5ID0gVHJhY2suU291cmNlW10gfCBUcmFja1NvdXJjZVdpdGhPcHRpb25zW107XG5cbi8vICMjIyBUcmFjayBTb3VyY2UgVHlwZSBQcmVkaWNhdGVzXG5leHBvcnQgZnVuY3Rpb24gaXNTb3VyY2VXaXRPcHRpb25zKHNvdXJjZTogU291cmNlc0FycmF5W251bWJlcl0pOiBzb3VyY2UgaXMgVHJhY2tTb3VyY2VXaXRoT3B0aW9ucyB7XG4gIHJldHVybiB0eXBlb2Ygc291cmNlID09PSAnb2JqZWN0Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU291cmNlc1dpdGhPcHRpb25zKHNvdXJjZXM6IFNvdXJjZXNBcnJheSk6IHNvdXJjZXMgaXMgVHJhY2tTb3VyY2VXaXRoT3B0aW9uc1tdIHtcbiAgcmV0dXJuIChcbiAgICBBcnJheS5pc0FycmF5KHNvdXJjZXMpICYmXG4gICAgKHNvdXJjZXMgYXMgVHJhY2tTb3VyY2VXaXRoT3B0aW9uc1tdKS5maWx0ZXIoaXNTb3VyY2VXaXRPcHRpb25zKS5sZW5ndGggPiAwXG4gICk7XG59XG5cbi8vICMjIExvb3AgRmlsdGVyIFR5cGVzXG5leHBvcnQgdHlwZSBUcmFja1JlZmVyZW5jZUZpbHRlciA9IFBhcmFtZXRlcnM8VHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW11bJ2ZpbHRlciddPlsnMCddO1xuZXhwb3J0IHR5cGUgUGFydGljaXBhbnRGaWx0ZXIgPSBQYXJhbWV0ZXJzPFBhcnRpY2lwYW50W11bJ2ZpbHRlciddPlsnMCddO1xuXG4vLyAjIyBPdGhlciBUeXBlc1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudENsaWNrRXZlbnQge1xuICBwYXJ0aWNpcGFudDogUGFydGljaXBhbnQ7XG4gIHRyYWNrPzogVHJhY2tQdWJsaWNhdGlvbjtcbn1cblxuZXhwb3J0IHR5cGUgVHJhY2tTb3VyY2U8VCBleHRlbmRzIFRyYWNrLlNvdXJjZT4gPSBSZXF1aXJlQXRMZWFzdE9uZTxcbiAgeyBzb3VyY2U6IFQ7IG5hbWU6IHN0cmluZzsgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50IH0sXG4gICduYW1lJyB8ICdzb3VyY2UnXG4+O1xuXG5leHBvcnQgdHlwZSBQYXJ0aWNpcGFudFRyYWNrSWRlbnRpZmllciA9IFJlcXVpcmVBdExlYXN0T25lPFxuICB7IHNvdXJjZXM6IFRyYWNrLlNvdXJjZVtdOyBuYW1lOiBzdHJpbmc7IGtpbmQ6IFRyYWNrLktpbmQgfSxcbiAgJ3NvdXJjZXMnIHwgJ25hbWUnIHwgJ2tpbmQnXG4+O1xuXG4vKipcbiAqIEBiZXRhXG4gKi9cbmV4cG9ydCB0eXBlIFBhcnRpY2lwYW50SWRlbnRpZmllciA9IFJlcXVpcmVBdExlYXN0T25lPFxuICB7IGtpbmQ6IFBhcnRpY2lwYW50S2luZDsgaWRlbnRpdHk6IHN0cmluZyB9LFxuICAnaWRlbnRpdHknIHwgJ2tpbmQnXG4+O1xuXG4vKipcbiAqIFRoZSBUcmFja0lkZW50aWZpZXIgdHlwZSBpcyB1c2VkIHRvIHNlbGVjdCBUcmFja3MgZWl0aGVyIGJhc2VkIG9uXG4gKiAtIFRyYWNrLlNvdXJjZSBhbmQvb3IgbmFtZSBvZiB0aGUgdHJhY2ssIGUuZy4gYHtzb3VyY2U6IFRyYWNrLlNvdXJjZS5DYW1lcmF9YCBvciBge25hbWU6IFwibXktdHJhY2tcIn1gXG4gKiAtIFRyYWNrUmVmZXJlbmNlIChwYXJ0aWNpcGFudCBhbmQgcHVibGljYXRpb24pXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHR5cGUgVHJhY2tJZGVudGlmaWVyPFQgZXh0ZW5kcyBUcmFjay5Tb3VyY2UgPSBUcmFjay5Tb3VyY2U+ID1cbiAgfCBUcmFja1NvdXJjZTxUPlxuICB8IFRyYWNrUmVmZXJlbmNlO1xuXG4vLyAjIyBVdGlsIFR5cGVzXG50eXBlIFJlcXVpcmVBdExlYXN0T25lPFQsIEtleXMgZXh0ZW5kcyBrZXlvZiBUID0ga2V5b2YgVD4gPSBQaWNrPFQsIEV4Y2x1ZGU8a2V5b2YgVCwgS2V5cz4+ICZcbiAge1xuICAgIFtLIGluIEtleXNdLT86IFJlcXVpcmVkPFBpY2s8VCwgSz4+ICYgUGFydGlhbDxQaWNrPFQsIEV4Y2x1ZGU8S2V5cywgSz4+PjtcbiAgfVtLZXlzXTtcblxuZXhwb3J0IHR5cGUgUmVxdWlyZU9ubHlPbmU8VCwgS2V5cyBleHRlbmRzIGtleW9mIFQgPSBrZXlvZiBUPiA9IFBpY2s8VCwgRXhjbHVkZTxrZXlvZiBULCBLZXlzPj4gJlxuICB7XG4gICAgW0sgaW4gS2V5c10tPzogUmVxdWlyZWQ8UGljazxULCBLPj4gJiBQYXJ0aWFsPFJlY29yZDxFeGNsdWRlPEtleXMsIEs+LCB1bmRlZmluZWQ+PjtcbiAgfVtLZXlzXTtcblxuZXhwb3J0IHR5cGUgQXVkaW9Tb3VyY2UgPSBUcmFjay5Tb3VyY2UuTWljcm9waG9uZSB8IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvO1xuZXhwb3J0IHR5cGUgVmlkZW9Tb3VyY2UgPSBUcmFjay5Tb3VyY2UuQ2FtZXJhIHwgVHJhY2suU291cmNlLlNjcmVlblNoYXJlO1xuIiwiaW1wb3J0IHsgVHJhY2sgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgdHlwZSB7IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlciB9IGZyb20gJy4uL3RyYWNrLXJlZmVyZW5jZSc7XG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlIH0gZnJvbSAnLi4vdHJhY2stcmVmZXJlbmNlJztcbmltcG9ydCB7XG4gIHNvcnRQYXJ0aWNpcGFudHNCeUF1ZGlvTGV2ZWwsXG4gIHNvcnRQYXJ0aWNpcGFudHNCeUlzU3BlYWtpbmcsXG4gIHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0LFxuICBzb3J0UGFydGljaXBhbnRzQnlMYXN0U3Bva2VuQVQsXG4gIHNvcnRUcmFja1JlZmVyZW5jZXNCeVR5cGUsXG4gIHNvcnRUcmFja1JlZnNCeUlzQ2FtZXJhRW5hYmxlZCxcbn0gZnJvbSAnLi9iYXNlLXNvcnQtZnVuY3Rpb25zJztcblxuLyoqXG4gKiBEZWZhdWx0IHNvcnQgZm9yIGBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXJgLCBpdCdsbCBvcmRlciBwYXJ0aWNpcGFudHMgYnk6XG4gKiAxLiBsb2NhbCBjYW1lcmEgdHJhY2sgKHB1YmxpY2F0aW9uLmlzTG9jYWwpXG4gKiAyLiByZW1vdGUgc2NyZWVuX3NoYXJlIHRyYWNrXG4gKiAzLiBsb2NhbCBzY3JlZW5fc2hhcmUgdHJhY2tcbiAqIDQuIHJlbW90ZSBkb21pbmFudCBzcGVha2VyIGNhbWVyYSB0cmFjayAoc29ydGVkIGJ5IHNwZWFrZXIgd2l0aCB0aGUgbG91ZGVzdCBhdWRpbyBsZXZlbClcbiAqIDUuIG90aGVyIHJlbW90ZSBzcGVha2VycyB0aGF0IGFyZSByZWNlbnRseSBhY3RpdmVcbiAqIDYuIHJlbW90ZSB1bm11dGVkIGNhbWVyYSB0cmFja3NcbiAqIDcuIHJlbW90ZSB0cmFja3Mgc29ydGVkIGJ5IGpvaW5lZEF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0VHJhY2tSZWZlcmVuY2VzKFxuICB0cmFja3M6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcltdLFxuKTogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10ge1xuICBjb25zdCBsb2NhbFRyYWNrczogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10gPSBbXTtcbiAgY29uc3Qgc2NyZWVuU2hhcmVUcmFja3M6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcltdID0gW107XG4gIGNvbnN0IGNhbWVyYVRyYWNrczogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10gPSBbXTtcbiAgY29uc3QgdW5kZWZpbmVkVHJhY2tzOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXJbXSA9IFtdO1xuXG4gIHRyYWNrcy5mb3JFYWNoKCh0cmFja1JlZikgPT4ge1xuICAgIGlmICh0cmFja1JlZi5wYXJ0aWNpcGFudC5pc0xvY2FsICYmIHRyYWNrUmVmLnNvdXJjZSA9PT0gVHJhY2suU291cmNlLkNhbWVyYSkge1xuICAgICAgbG9jYWxUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIGlmICh0cmFja1JlZi5zb3VyY2UgPT09IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZSkge1xuICAgICAgc2NyZWVuU2hhcmVUcmFja3MucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIGlmICh0cmFja1JlZi5zb3VyY2UgPT09IFRyYWNrLlNvdXJjZS5DYW1lcmEpIHtcbiAgICAgIGNhbWVyYVRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5kZWZpbmVkVHJhY2tzLnB1c2godHJhY2tSZWYpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc29ydGVkU2NyZWVuU2hhcmVUcmFja3MgPSBzb3J0U2NyZWVuU2hhcmVUcmFja3Moc2NyZWVuU2hhcmVUcmFja3MpO1xuICBjb25zdCBzb3J0ZWRDYW1lcmFUcmFja3MgPSBzb3J0Q2FtZXJhVHJhY2tzKGNhbWVyYVRyYWNrcyk7XG5cbiAgcmV0dXJuIFsuLi5sb2NhbFRyYWNrcywgLi4uc29ydGVkU2NyZWVuU2hhcmVUcmFja3MsIC4uLnNvcnRlZENhbWVyYVRyYWNrcywgLi4udW5kZWZpbmVkVHJhY2tzXTtcbn1cblxuLyoqXG4gKiBTb3J0IGFuIGFycmF5IG9mIGBUcmFja1JlZmVyZW5jZWAgc2NyZWVuIHNoYXJlcy5cbiAqIE1haW4gc29ydGluZyBvcmRlcjpcbiAqIDEuIHJlbW90ZSBzY3JlZW4gc2hhcmVzXG4gKiAyLiBsb2NhbCBzY3JlZW4gc2hhcmVzXG4gKiBTZWNvbmRhcnkgc29ydGluZyBieSBwYXJ0aWNpcGFudCdzIGpvaW5pbmcgdGltZS5cbiAqL1xuZnVuY3Rpb24gc29ydFNjcmVlblNoYXJlVHJhY2tzKFxuICBzY3JlZW5TaGFyZVRyYWNrczogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10sXG4pOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXJbXSB7XG4gIGNvbnN0IGxvY2FsU2NyZWVuU2hhcmVzOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXJbXSA9IFtdO1xuICBjb25zdCByZW1vdGVTY3JlZW5TaGFyZXM6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcltdID0gW107XG5cbiAgc2NyZWVuU2hhcmVUcmFja3MuZm9yRWFjaCgodHJhY2tSZWYpID0+IHtcbiAgICBpZiAodHJhY2tSZWYucGFydGljaXBhbnQuaXNMb2NhbCkge1xuICAgICAgbG9jYWxTY3JlZW5TaGFyZXMucHVzaCh0cmFja1JlZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW90ZVNjcmVlblNoYXJlcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9XG4gIH0pO1xuXG4gIGxvY2FsU2NyZWVuU2hhcmVzLnNvcnQoKGEsIGIpID0+IHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpKTtcbiAgcmVtb3RlU2NyZWVuU2hhcmVzLnNvcnQoKGEsIGIpID0+IHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpKTtcblxuICBjb25zdCBzb3J0ZWRTY3JlZW5TaGFyZVRyYWNrUmVmcyA9IFsuLi5yZW1vdGVTY3JlZW5TaGFyZXMsIC4uLmxvY2FsU2NyZWVuU2hhcmVzXTtcbiAgcmV0dXJuIHNvcnRlZFNjcmVlblNoYXJlVHJhY2tSZWZzO1xufVxuXG5mdW5jdGlvbiBzb3J0Q2FtZXJhVHJhY2tzKFxuICBjYW1lcmFUcmFja1JlZmVyZW5jZXM6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcltdLFxuKTogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10ge1xuICBjb25zdCBsb2NhbENhbWVyYVRyYWNrczogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyW10gPSBbXTtcbiAgY29uc3QgcmVtb3RlQ2FtZXJhVHJhY2tzOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXJbXSA9IFtdO1xuXG4gIGNhbWVyYVRyYWNrUmVmZXJlbmNlcy5mb3JFYWNoKCh0cmFja1JlZikgPT4ge1xuICAgIGlmICh0cmFja1JlZi5wYXJ0aWNpcGFudC5pc0xvY2FsKSB7XG4gICAgICBsb2NhbENhbWVyYVRyYWNrcy5wdXNoKHRyYWNrUmVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3RlQ2FtZXJhVHJhY2tzLnB1c2godHJhY2tSZWYpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmVtb3RlQ2FtZXJhVHJhY2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAvLyBQYXJ0aWNpcGFudCB3aXRoIGhpZ2hlciBhdWRpbyBsZXZlbCBnb2VzIGZpcnN0LlxuICAgIGlmIChhLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgJiYgYi5wYXJ0aWNpcGFudC5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5QXVkaW9MZXZlbChhLnBhcnRpY2lwYW50LCBiLnBhcnRpY2lwYW50KTtcbiAgICB9XG5cbiAgICAvLyBBIHNwZWFraW5nIHBhcnRpY2lwYW50IGdvZXMgYmVmb3JlIG9uZSB0aGF0IGlzIG5vdCBzcGVha2luZy5cbiAgICBpZiAoYS5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICE9PSBiLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcpIHtcbiAgICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlJc1NwZWFraW5nKGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpO1xuICAgIH1cblxuICAgIC8vIEEgcGFydGljaXBhbnQgdGhhdCBzcG9rZSByZWNlbnRseSBnb2VzIGJlZm9yZSBhIHBhcnRpY2lwYW50IHRoYXQgc3Bva2UgYSB3aGlsZSBiYWNrLlxuICAgIGlmIChhLnBhcnRpY2lwYW50Lmxhc3RTcG9rZUF0ICE9PSBiLnBhcnRpY2lwYW50Lmxhc3RTcG9rZUF0KSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5TGFzdFNwb2tlbkFUKGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpO1xuICAgIH1cblxuICAgIC8vIFRyYWNrUmVmZXJlbmNlIGJlZm9yZSBUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyXG4gICAgaWYgKGlzVHJhY2tSZWZlcmVuY2UoYSkgIT09IGlzVHJhY2tSZWZlcmVuY2UoYikpIHtcbiAgICAgIHJldHVybiBzb3J0VHJhY2tSZWZlcmVuY2VzQnlUeXBlKGEsIGIpO1xuICAgIH1cblxuICAgIC8vIFRpbGVzIHdpdGggdmlkZW8gb24gYmVmb3JlIHRpbGVzIHdpdGggbXV0ZWQgdmlkZW8gdHJhY2suXG4gICAgaWYgKGEucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkICE9PSBiLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIHNvcnRUcmFja1JlZnNCeUlzQ2FtZXJhRW5hYmxlZChhLCBiKTtcbiAgICB9XG5cbiAgICAvLyBBIHBhcnRpY2lwYW50IHRoYXQgam9pbmVkIGEgbG9uZyB0aW1lIGFnbyBnb2VzIGJlZm9yZSBvbmUgdGhhdCBqb2luZWQgcmVjZW50bHkuXG4gICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEucGFydGljaXBhbnQsIGIucGFydGljaXBhbnQpO1xuICB9KTtcblxuICByZXR1cm4gWy4uLmxvY2FsQ2FtZXJhVHJhY2tzLCAuLi5yZW1vdGVDYW1lcmFUcmFja3NdO1xufVxuIiwiaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IFRyYWNrIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHR5cGUgeyBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIgfSBmcm9tICcuLi90cmFjay1yZWZlcmVuY2UnO1xuaW1wb3J0IHsgZ2V0VHJhY2tSZWZlcmVuY2VTb3VyY2UsIGlzVHJhY2tSZWZlcmVuY2UgfSBmcm9tICcuLi90cmFjay1yZWZlcmVuY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc29ydFBhcnRpY2lwYW50c0J5QXVkaW9MZXZlbChcbiAgYTogUGljazxQYXJ0aWNpcGFudCwgJ2F1ZGlvTGV2ZWwnPixcbiAgYjogUGljazxQYXJ0aWNpcGFudCwgJ2F1ZGlvTGV2ZWwnPixcbik6IG51bWJlciB7XG4gIHJldHVybiBiLmF1ZGlvTGV2ZWwgLSBhLmF1ZGlvTGV2ZWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0UGFydGljaXBhbnRzQnlJc1NwZWFraW5nKFxuICBhOiBQaWNrPFBhcnRpY2lwYW50LCAnaXNTcGVha2luZyc+LFxuICBiOiBQaWNrPFBhcnRpY2lwYW50LCAnaXNTcGVha2luZyc+LFxuKTogbnVtYmVyIHtcbiAgaWYgKGEuaXNTcGVha2luZyA9PT0gYi5pc1NwZWFraW5nKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGEuaXNTcGVha2luZyA/IC0xIDogMTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydFBhcnRpY2lwYW50c0J5TGFzdFNwb2tlbkFUKFxuICBhOiBQaWNrPFBhcnRpY2lwYW50LCAnbGFzdFNwb2tlQXQnPixcbiAgYjogUGljazxQYXJ0aWNpcGFudCwgJ2xhc3RTcG9rZUF0Jz4sXG4pOiBudW1iZXIge1xuICBpZiAoYS5sYXN0U3Bva2VBdCAhPT0gdW5kZWZpbmVkIHx8IGIubGFzdFNwb2tlQXQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAoYi5sYXN0U3Bva2VBdD8uZ2V0VGltZSgpID8/IDApIC0gKGEubGFzdFNwb2tlQXQ/LmdldFRpbWUoKSA/PyAwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydFBhcnRpY2lwYW50c0J5Sm9pbmVkQXQoXG4gIGE6IFBpY2s8UGFydGljaXBhbnQsICdqb2luZWRBdCc+LFxuICBiOiBQaWNrPFBhcnRpY2lwYW50LCAnam9pbmVkQXQnPixcbikge1xuICByZXR1cm4gKGEuam9pbmVkQXQ/LmdldFRpbWUoKSA/PyAwKSAtIChiLmpvaW5lZEF0Py5nZXRUaW1lKCkgPz8gMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0VHJhY2tSZWZlcmVuY2VzQnlUeXBlKFxuICBhOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIsXG4gIGI6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcixcbikge1xuICBpZiAoaXNUcmFja1JlZmVyZW5jZShhKSkge1xuICAgIGlmIChpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc1RyYWNrUmVmZXJlbmNlKGIpKSB7XG4gICAgcmV0dXJuIDE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuLyoqIFRyYWNrUmVmZXJlbmNlIHdpdGggc2NyZWVuIHNoYXJlIHNvdXJjZSBnb2VzIGZpcnN0LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRUcmFja1JlZmVyZW5jZXNCeVNjcmVlblNoYXJlKFxuICBhOiBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIsXG4gIGI6IFRyYWNrUmVmZXJlbmNlT3JQbGFjZWhvbGRlcixcbik6IG51bWJlciB7XG4gIGNvbnN0IHNvdXJjZUEgPSBnZXRUcmFja1JlZmVyZW5jZVNvdXJjZShhKTtcbiAgY29uc3Qgc291cmNlQiA9IGdldFRyYWNrUmVmZXJlbmNlU291cmNlKGIpO1xuXG4gIGlmIChzb3VyY2VBID09PSBzb3VyY2VCKSB7XG4gICAgaWYgKHNvdXJjZUEgPT09IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZSkge1xuICAgICAgaWYgKGEucGFydGljaXBhbnQuaXNMb2NhbCA9PT0gYi5wYXJ0aWNpcGFudC5pc0xvY2FsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGEucGFydGljaXBhbnQuaXNMb2NhbCA/IDEgOiAtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoc291cmNlQSA9PT0gVHJhY2suU291cmNlLlNjcmVlblNoYXJlKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKHNvdXJjZUIgPT09IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZSkge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0VHJhY2tSZWZzQnlJc0NhbWVyYUVuYWJsZWQoXG4gIGE6IHsgcGFydGljaXBhbnQ6IHsgaXNDYW1lcmFFbmFibGVkOiBib29sZWFuIH0gfSxcbiAgYjogeyBwYXJ0aWNpcGFudDogeyBpc0NhbWVyYUVuYWJsZWQ6IGJvb2xlYW4gfSB9LFxuKSB7XG4gIGNvbnN0IGFWaWRlbyA9IGEucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkO1xuICBjb25zdCBiVmlkZW8gPSBiLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZDtcblxuICBpZiAoYVZpZGVvICE9PSBiVmlkZW8pIHtcbiAgICBpZiAoYVZpZGVvKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IExvY2FsUGFydGljaXBhbnQgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQge1xuICBzb3J0UGFydGljaXBhbnRzQnlBdWRpb0xldmVsLFxuICBzb3J0UGFydGljaXBhbnRzQnlJc1NwZWFraW5nLFxuICBzb3J0UGFydGljaXBhbnRzQnlKb2luZWRBdCxcbiAgc29ydFBhcnRpY2lwYW50c0J5TGFzdFNwb2tlbkFULFxufSBmcm9tICcuL2Jhc2Utc29ydC1mdW5jdGlvbnMnO1xuXG4vKipcbiAqIERlZmF1bHQgc29ydCBmb3IgcGFydGljaXBhbnRzLCBpdCdsbCBvcmRlciBwYXJ0aWNpcGFudHMgYnk6XG4gKiAxLiBsb2NhbCBwYXJ0aWNpcGFudFxuICogMi4gZG9taW5hbnQgc3BlYWtlciAoc3BlYWtlciB3aXRoIHRoZSBsb3VkZXN0IGF1ZGlvIGxldmVsKVxuICogMy4gb3RoZXIgc3BlYWtlcnMgdGhhdCBhcmUgcmVjZW50bHkgYWN0aXZlXG4gKiA0LiBwYXJ0aWNpcGFudHMgd2l0aCB2aWRlbyBvblxuICogNS4gYnkgam9pbmVkQXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzOiBQYXJ0aWNpcGFudFtdKTogUGFydGljaXBhbnRbXSB7XG4gIGNvbnN0IHNvcnRlZFBhcnRpY2lwYW50cyA9IFsuLi5wYXJ0aWNpcGFudHNdO1xuICBzb3J0ZWRQYXJ0aWNpcGFudHMuc29ydCgoYSwgYikgPT4ge1xuICAgIC8vIGxvdWRlc3Qgc3BlYWtlciBmaXJzdFxuICAgIGlmIChhLmlzU3BlYWtpbmcgJiYgYi5pc1NwZWFraW5nKSB7XG4gICAgICByZXR1cm4gc29ydFBhcnRpY2lwYW50c0J5QXVkaW9MZXZlbChhLCBiKTtcbiAgICB9XG5cbiAgICAvLyBzcGVha2VyIGdvZXMgZmlyc3RcbiAgICBpZiAoYS5pc1NwZWFraW5nICE9PSBiLmlzU3BlYWtpbmcpIHtcbiAgICAgIHJldHVybiBzb3J0UGFydGljaXBhbnRzQnlJc1NwZWFraW5nKGEsIGIpO1xuICAgIH1cblxuICAgIC8vIGxhc3QgYWN0aXZlIHNwZWFrZXIgZmlyc3RcbiAgICBpZiAoYS5sYXN0U3Bva2VBdCAhPT0gYi5sYXN0U3Bva2VBdCkge1xuICAgICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUxhc3RTcG9rZW5BVChhLCBiKTtcbiAgICB9XG5cbiAgICAvLyB2aWRlbyBvblxuICAgIGNvbnN0IGFWaWRlbyA9IGEudmlkZW9UcmFja1B1YmxpY2F0aW9ucy5zaXplID4gMDtcbiAgICBjb25zdCBiVmlkZW8gPSBiLnZpZGVvVHJhY2tQdWJsaWNhdGlvbnMuc2l6ZSA+IDA7XG4gICAgaWYgKGFWaWRlbyAhPT0gYlZpZGVvKSB7XG4gICAgICBpZiAoYVZpZGVvKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGpvaW5lZEF0XG4gICAgcmV0dXJuIHNvcnRQYXJ0aWNpcGFudHNCeUpvaW5lZEF0KGEsIGIpO1xuICB9KTtcbiAgY29uc3QgbG9jYWxQYXJ0aWNpcGFudCA9IHNvcnRlZFBhcnRpY2lwYW50cy5maW5kKChwKSA9PiBwIGluc3RhbmNlb2YgTG9jYWxQYXJ0aWNpcGFudCk7XG4gIGlmIChsb2NhbFBhcnRpY2lwYW50KSB7XG4gICAgY29uc3QgbG9jYWxJZHggPSBzb3J0ZWRQYXJ0aWNpcGFudHMuaW5kZXhPZihsb2NhbFBhcnRpY2lwYW50KTtcbiAgICBpZiAobG9jYWxJZHggPj0gMCkge1xuICAgICAgc29ydGVkUGFydGljaXBhbnRzLnNwbGljZShsb2NhbElkeCwgMSk7XG4gICAgICBpZiAoc29ydGVkUGFydGljaXBhbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc29ydGVkUGFydGljaXBhbnRzLnNwbGljZSgwLCAwLCBsb2NhbFBhcnRpY2lwYW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvcnRlZFBhcnRpY2lwYW50cy5wdXNoKGxvY2FsUGFydGljaXBhbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gc29ydGVkUGFydGljaXBhbnRzO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNodW5rPFQ+KGlucHV0OiBBcnJheTxUPiwgc2l6ZTogbnVtYmVyKSB7XG4gIHJldHVybiBpbnB1dC5yZWR1Y2UoXG4gICAgKGFyciwgaXRlbSwgaWR4KSA9PiB7XG4gICAgICByZXR1cm4gaWR4ICUgc2l6ZSA9PT0gMFxuICAgICAgICA/IFsuLi5hcnIsIFtpdGVtXV1cbiAgICAgICAgOiBbLi4uYXJyLnNsaWNlKDAsIC0xKSwgWy4uLmFyci5zbGljZSgtMSlbMF0sIGl0ZW1dXTtcbiAgICB9LFxuICAgIFtdIGFzIEFycmF5PEFycmF5PFQ+PixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHppcDxULCBVPihhMTogQXJyYXk8VD4sIGEyOiBBcnJheTxVPikge1xuICBjb25zdCByZXN1bHRMZW5ndGggPSBNYXRoLm1heChhMS5sZW5ndGgsIGEyLmxlbmd0aCk7XG4gIHJldHVybiBuZXcgQXJyYXkocmVzdWx0TGVuZ3RoKS5maWxsKFtdKS5tYXAoKF92YWwsIGlkeCkgPT4gW2ExW2lkeF0sIGEyW2lkeF1dKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZlcmVuY2VCeTxUPihhMTogQXJyYXk8VD4sIGEyOiBBcnJheTxUPiwgYnk6IChhcmc6IFQpID0+IHN0cmluZykge1xuICByZXR1cm4gYTEuZmlsdGVyKChjKSA9PiAhYTIubWFwKCh2KSA9PiBieSh2KSkuaW5jbHVkZXMoYnkoYykpKTtcbn1cbiIsIi8qKlxuICogSW50ZXJuYWwgdGVzdCBmdW5jdGlvbi5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5pbXBvcnQgeyBQYXJ0aWNpcGFudCwgVHJhY2ssIFRyYWNrUHVibGljYXRpb24gfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgdHlwZSB7IFVwZGF0YWJsZUl0ZW0gfSBmcm9tICcuLi9zb3J0aW5nL3RpbGUtYXJyYXktdXBkYXRlJztcbmltcG9ydCB0eXBlIHsgVHJhY2tSZWZlcmVuY2UsIFRyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIgfSBmcm9tICcuL3RyYWNrLXJlZmVyZW5jZS50eXBlcyc7XG5pbXBvcnQgeyBnZXRUcmFja1JlZmVyZW5jZUlkIH0gZnJvbSAnLi90cmFjay1yZWZlcmVuY2UudXRpbHMnO1xuXG4vLyBUZXN0IGZ1bmN0aW9uOlxuZXhwb3J0IGNvbnN0IG1vY2tUcmFja1JlZmVyZW5jZVBsYWNlaG9sZGVyID0gKFxuICBpZDogc3RyaW5nLFxuICBzb3VyY2U6IFRyYWNrLlNvdXJjZSxcbik6IFRyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIgPT4ge1xuICByZXR1cm4geyBwYXJ0aWNpcGFudDogbmV3IFBhcnRpY2lwYW50KGAke2lkfWAsIGAke2lkfWApLCBzb3VyY2UgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb2NrVHJhY2tSZWZlcmVuY2VQdWJsaXNoZWQgPSAoaWQ6IHN0cmluZywgc291cmNlOiBUcmFjay5Tb3VyY2UpOiBUcmFja1JlZmVyZW5jZSA9PiB7XG4gIGNvbnN0IGtpbmQgPSBbVHJhY2suU291cmNlLkNhbWVyYSwgVHJhY2suU291cmNlLlNjcmVlblNoYXJlXS5pbmNsdWRlcyhzb3VyY2UpXG4gICAgPyBUcmFjay5LaW5kLlZpZGVvXG4gICAgOiBUcmFjay5LaW5kLkF1ZGlvO1xuICByZXR1cm4ge1xuICAgIHBhcnRpY2lwYW50OiBuZXcgUGFydGljaXBhbnQoYCR7aWR9YCwgYCR7aWR9YCksXG4gICAgcHVibGljYXRpb246IG5ldyBUcmFja1B1YmxpY2F0aW9uKGtpbmQsIGAke2lkfWAsIGAke2lkfWApLFxuICAgIHNvdXJjZTogc291cmNlLFxuICB9O1xufTtcblxudHlwZSBtb2NrVHJhY2tSZWZlcmVuY2VTdWJzY3JpYmVkT3B0aW9ucyA9IHtcbiAgbW9ja1B1YmxpY2F0aW9uPzogYm9vbGVhbjtcbiAgbW9ja1BhcnRpY2lwYW50PzogYm9vbGVhbjtcbiAgbW9ja0lzTG9jYWw/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vY2tUcmFja1JlZmVyZW5jZVN1YnNjcmliZWQgPSAoXG4gIGlkOiBzdHJpbmcsXG4gIHNvdXJjZTogVHJhY2suU291cmNlLFxuICBvcHRpb25zOiBtb2NrVHJhY2tSZWZlcmVuY2VTdWJzY3JpYmVkT3B0aW9ucyA9IHt9LFxuKTogVHJhY2tSZWZlcmVuY2UgPT4ge1xuICBjb25zdCBraW5kID0gW1RyYWNrLlNvdXJjZS5DYW1lcmEsIFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZV0uaW5jbHVkZXMoc291cmNlKVxuICAgID8gVHJhY2suS2luZC5WaWRlb1xuICAgIDogVHJhY2suS2luZC5BdWRpbztcblxuICBjb25zdCBwdWJsaWNhdGlvbiA9IG5ldyBUcmFja1B1YmxpY2F0aW9uKGtpbmQsIGAke2lkfWAsIGAke2lkfWApO1xuICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gIHB1YmxpY2F0aW9uLnRyYWNrID0ge307XG4gIHJldHVybiB7XG4gICAgcGFydGljaXBhbnQ6IG9wdGlvbnMubW9ja1BhcnRpY2lwYW50XG4gICAgICA/IChtb2NrUGFydGljaXBhbnQoaWQsIG9wdGlvbnMubW9ja0lzTG9jYWwgPz8gZmFsc2UpIGFzIFBhcnRpY2lwYW50KVxuICAgICAgOiBuZXcgUGFydGljaXBhbnQoYCR7aWR9YCwgYCR7aWR9YCksXG4gICAgcHVibGljYXRpb246IG9wdGlvbnMubW9ja1B1YmxpY2F0aW9uXG4gICAgICA/IChtb2NrVHJhY2tQdWJsaWNhdGlvbihgcHVibGljYXRpb25JZCgke2lkfSlgLCBraW5kLCBzb3VyY2UpIGFzIFRyYWNrUHVibGljYXRpb24pXG4gICAgICA6IHB1YmxpY2F0aW9uLFxuICAgIHNvdXJjZSxcbiAgfTtcbn07XG5cbmNvbnN0IG1vY2tUcmFja1B1YmxpY2F0aW9uID0gKFxuICBpZDogc3RyaW5nLFxuICBraW5kOiBUcmFjay5LaW5kLFxuICBzb3VyY2U6IFRyYWNrLlNvdXJjZSxcbik6IFBpY2s8VHJhY2tQdWJsaWNhdGlvbiwgJ2tpbmQnIHwgJ3RyYWNrU2lkJyB8ICd0cmFja05hbWUnIHwgJ3NvdXJjZSc+ID0+IHtcbiAgcmV0dXJuIHtcbiAgICBraW5kLFxuICAgIHRyYWNrU2lkOiBpZCxcbiAgICB0cmFja05hbWU6IGBuYW1lXyR7aWR9YCxcbiAgICBzb3VyY2U6IHNvdXJjZSxcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIG1vY2tQYXJ0aWNpcGFudChcbiAgaWQ6IHN0cmluZyxcbiAgaXNMb2NhbDogYm9vbGVhbixcbik6IFBpY2s8UGFydGljaXBhbnQsICdzaWQnIHwgJ2lkZW50aXR5JyB8ICdpc0xvY2FsJz4ge1xuICByZXR1cm4ge1xuICAgIHNpZDogYCR7aWR9X3NpZGAsXG4gICAgaWRlbnRpdHk6IGAke2lkfWAsXG4gICAgaXNMb2NhbDogaXNMb2NhbCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXRUcmFja1JlZmVyZW5jZUFycmF5PFQgZXh0ZW5kcyBVcGRhdGFibGVJdGVtPihsaXN0OiBUW10pOiBzdHJpbmdbXSB7XG4gIHJldHVybiBsaXN0Lm1hcCgoaXRlbSkgPT4ge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGl0ZW0gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gYCR7aXRlbX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0VHJhY2tSZWZlcmVuY2VJZChpdGVtKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgZGlmZmVyZW5jZUJ5LCBjaHVuaywgemlwIH0gZnJvbSAnLi4vaGVscGVyL2FycmF5LWhlbHBlcic7XG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHR5cGUgeyBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIgfSBmcm9tICcuLi90cmFjay1yZWZlcmVuY2UnO1xuaW1wb3J0IHtcbiAgZ2V0VHJhY2tSZWZlcmVuY2VJZCxcbiAgaXNQbGFjZWhvbGRlclJlcGxhY2VtZW50LFxuICBpc1RyYWNrUmVmZXJlbmNlLFxuICBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIsXG59IGZyb20gJy4uL3RyYWNrLXJlZmVyZW5jZSc7XG5pbXBvcnQgeyBmbGF0VHJhY2tSZWZlcmVuY2VBcnJheSB9IGZyb20gJy4uL3RyYWNrLXJlZmVyZW5jZS90ZXN0LXV0aWxzJztcblxudHlwZSBWaXN1YWxDaGFuZ2VzPFQ+ID0ge1xuICBkcm9wcGVkOiBUW107XG4gIGFkZGVkOiBUW107XG59O1xuXG5leHBvcnQgdHlwZSBVcGRhdGFibGVJdGVtID0gVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyIHwgbnVtYmVyO1xuXG4vKiogQ2hlY2sgdG8gc2VlIGlmIGFueXRoaW5nIHZpc3VhbGx5IGNoYW5nZXMgb24gdGhlIHBhZ2UuICovXG5leHBvcnQgZnVuY3Rpb24gdmlzdWFsUGFnZUNoYW5nZTxUIGV4dGVuZHMgVXBkYXRhYmxlSXRlbT4oc3RhdGU6IFRbXSwgbmV4dDogVFtdKTogVmlzdWFsQ2hhbmdlczxUPiB7XG4gIHJldHVybiB7XG4gICAgZHJvcHBlZDogZGlmZmVyZW5jZUJ5KHN0YXRlLCBuZXh0LCBnZXRUcmFja1JlZmVyZW5jZUlkKSxcbiAgICBhZGRlZDogZGlmZmVyZW5jZUJ5KG5leHQsIHN0YXRlLCBnZXRUcmFja1JlZmVyZW5jZUlkKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gbGlzdE5lZWRzVXBkYXRpbmc8VD4oY2hhbmdlczogVmlzdWFsQ2hhbmdlczxUPik6IGJvb2xlYW4ge1xuICByZXR1cm4gY2hhbmdlcy5hZGRlZC5sZW5ndGggIT09IDAgfHwgY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCAhPT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleDxUIGV4dGVuZHMgVXBkYXRhYmxlSXRlbT4oXG4gIHRyYWNrUmVmZXJlbmNlOiBULFxuICB0cmFja1JlZmVyZW5jZXM6IFRbXSxcbik6IG51bWJlciB7XG4gIGNvbnN0IGluZGV4VG9SZXBsYWNlID0gdHJhY2tSZWZlcmVuY2VzLmZpbmRJbmRleChcbiAgICAodHJhY2tSZWZlcmVuY2VfKSA9PlxuICAgICAgZ2V0VHJhY2tSZWZlcmVuY2VJZCh0cmFja1JlZmVyZW5jZV8pID09PSBnZXRUcmFja1JlZmVyZW5jZUlkKHRyYWNrUmVmZXJlbmNlKSxcbiAgKTtcbiAgaWYgKGluZGV4VG9SZXBsYWNlID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBFbGVtZW50IG5vdCBwYXJ0IG9mIHRoZSBhcnJheTogJHtnZXRUcmFja1JlZmVyZW5jZUlkKFxuICAgICAgICB0cmFja1JlZmVyZW5jZSxcbiAgICAgICl9IG5vdCBpbiAke2ZsYXRUcmFja1JlZmVyZW5jZUFycmF5KHRyYWNrUmVmZXJlbmNlcyl9YCxcbiAgICApO1xuICB9XG4gIHJldHVybiBpbmRleFRvUmVwbGFjZTtcbn1cblxuLyoqIFN3YXAgaXRlbXMgaW4gdGhlIGNvbXBsZXRlIGxpc3Qgb2YgYWxsIGVsZW1lbnRzICovXG5leHBvcnQgZnVuY3Rpb24gc3dhcEl0ZW1zPFQgZXh0ZW5kcyBVcGRhdGFibGVJdGVtPihcbiAgbW92ZUZvcndhcmQ6IFQsXG4gIG1vdmVCYWNrOiBULFxuICB0cmFja1JlZmVyZW5jZXM6IFRbXSxcbik6IFRbXSB7XG4gIGNvbnN0IGluZGV4VG9SZXBsYWNlID0gZmluZEluZGV4KG1vdmVGb3J3YXJkLCB0cmFja1JlZmVyZW5jZXMpO1xuICBjb25zdCBpbmRleFJlcGxhY2VXaXRoID0gZmluZEluZGV4KG1vdmVCYWNrLCB0cmFja1JlZmVyZW5jZXMpO1xuXG4gIHRyYWNrUmVmZXJlbmNlcy5zcGxpY2UoaW5kZXhUb1JlcGxhY2UsIDEsIG1vdmVCYWNrKTtcbiAgdHJhY2tSZWZlcmVuY2VzLnNwbGljZShpbmRleFJlcGxhY2VXaXRoLCAxLCBtb3ZlRm9yd2FyZCk7XG5cbiAgcmV0dXJuIHRyYWNrUmVmZXJlbmNlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyb3BJdGVtPFQgZXh0ZW5kcyBVcGRhdGFibGVJdGVtPihpdGVtVG9Ecm9wOiBULCBsaXN0OiBUW10pOiBUW10ge1xuICBjb25zdCBpbmRleE9mRWxlbWVudFRvRHJvcCA9IGZpbmRJbmRleChpdGVtVG9Ecm9wLCBsaXN0KTtcbiAgLy8gY29uc3QgaW5kZXhPZkVsZW1lbnRUb0Ryb3AgPSBsaXN0LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbSA9PT0gaXRlbVRvRHJvcCwgbGlzdCk7XG4gIGxpc3Quc3BsaWNlKGluZGV4T2ZFbGVtZW50VG9Ecm9wLCAxKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbmZ1bmN0aW9uIGFkZEl0ZW08VCBleHRlbmRzIFVwZGF0YWJsZUl0ZW0+KGl0ZW1Ub0FkZDogVCwgbGlzdDogVFtdKTogVFtdIHtcbiAgcmV0dXJuIFsuLi5saXN0LCBpdGVtVG9BZGRdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlSW50b1BhZ2VzPFQ+KGxpc3Q6IFRbXSwgbWF4RWxlbWVudHNPblBhZ2U6IG51bWJlcik6IEFycmF5PFRbXT4ge1xuICBjb25zdCBwYWdlcyA9IGNodW5rKGxpc3QsIG1heEVsZW1lbnRzT25QYWdlKTtcbiAgcmV0dXJuIHBhZ2VzO1xufVxuXG4vKiogRGl2aWRlIHRoZSBsaXN0IG9mIGVsZW1lbnRzIGludG8gcGFnZXMgYW5kIGFuZCBjaGVjayBpZiBwYWdlcyBuZWVkIHVwZGF0aW5nLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhZ2VzPFQgZXh0ZW5kcyBVcGRhdGFibGVJdGVtPihcbiAgY3VycmVudExpc3Q6IFRbXSxcbiAgbmV4dExpc3Q6IFRbXSxcbiAgbWF4SXRlbXNPblBhZ2U6IG51bWJlcixcbik6IFRbXSB7XG4gIGxldCB1cGRhdGVkTGlzdDogVFtdID0gcmVmcmVzaExpc3QoY3VycmVudExpc3QsIG5leHRMaXN0KTtcblxuICBpZiAodXBkYXRlZExpc3QubGVuZ3RoIDwgbmV4dExpc3QubGVuZ3RoKSB7XG4gICAgLy8gSXRlbXMgZ290IGFkZGVkOiBGaW5kIG5ld2x5IGFkZGVkIGl0ZW1zIGFuZCBhZGQgdGhlbSB0byB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAgIGNvbnN0IGFkZGVkSXRlbXMgPSBkaWZmZXJlbmNlQnkobmV4dExpc3QsIHVwZGF0ZWRMaXN0LCBnZXRUcmFja1JlZmVyZW5jZUlkKTtcbiAgICB1cGRhdGVkTGlzdCA9IFsuLi51cGRhdGVkTGlzdCwgLi4uYWRkZWRJdGVtc107XG4gIH1cbiAgY29uc3QgY3VycmVudFBhZ2VzID0gZGl2aWRlSW50b1BhZ2VzKHVwZGF0ZWRMaXN0LCBtYXhJdGVtc09uUGFnZSk7XG4gIGNvbnN0IG5leHRQYWdlcyA9IGRpdmlkZUludG9QYWdlcyhuZXh0TGlzdCwgbWF4SXRlbXNPblBhZ2UpO1xuXG4gIHppcChjdXJyZW50UGFnZXMsIG5leHRQYWdlcykuZm9yRWFjaCgoW2N1cnJlbnRQYWdlLCBuZXh0UGFnZV0sIHBhZ2VJbmRleCkgPT4ge1xuICAgIGlmIChjdXJyZW50UGFnZSAmJiBuZXh0UGFnZSkge1xuICAgICAgLy8gMSkgSWRlbnRpZnkgIG1pc3NpbmcgdGlsZS5cbiAgICAgIGNvbnN0IHVwZGF0ZWRQYWdlID0gZGl2aWRlSW50b1BhZ2VzKHVwZGF0ZWRMaXN0LCBtYXhJdGVtc09uUGFnZSlbcGFnZUluZGV4XTtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB2aXN1YWxQYWdlQ2hhbmdlKHVwZGF0ZWRQYWdlLCBuZXh0UGFnZSk7XG5cbiAgICAgIGlmIChsaXN0TmVlZHNVcGRhdGluZyhjaGFuZ2VzKSkge1xuICAgICAgICBsb2cuZGVidWcoXG4gICAgICAgICAgYERldGVjdGVkIHZpc3VhbCBjaGFuZ2VzIG9uIHBhZ2U6ICR7cGFnZUluZGV4fSwgY3VycmVudDogJHtmbGF0VHJhY2tSZWZlcmVuY2VBcnJheShcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlLFxuICAgICAgICAgICl9LCBuZXh0OiAke2ZsYXRUcmFja1JlZmVyZW5jZUFycmF5KG5leHRQYWdlKX1gLFxuICAgICAgICAgIHsgY2hhbmdlcyB9LFxuICAgICAgICApO1xuICAgICAgICAvLyAjIyBTd2FwIEl0ZW1zXG4gICAgICAgIGlmIChjaGFuZ2VzLmFkZGVkLmxlbmd0aCA9PT0gY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCkge1xuICAgICAgICAgIHppcChjaGFuZ2VzLmFkZGVkLCBjaGFuZ2VzLmRyb3BwZWQpLmZvckVhY2goKFthZGRlZCwgZHJvcHBlZF0pID0+IHtcbiAgICAgICAgICAgIGlmIChhZGRlZCAmJiBkcm9wcGVkKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZWRMaXN0ID0gc3dhcEl0ZW1zPFQ+KGFkZGVkLCBkcm9wcGVkLCB1cGRhdGVkTGlzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEZvciBhIHN3YXAgYWN0aW9uIHdlIG5lZWQgYSBhZGRpdGlvbiBhbmQgYSByZW1vdmFsIG9uZSBpcyBtaXNzaW5nOiAke2FkZGVkfSwgJHtkcm9wcGVkfWAsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gIyMgSGFuZGxlIERyb3AgSXRlbXNcbiAgICAgICAgaWYgKGNoYW5nZXMuYWRkZWQubGVuZ3RoID09PSAwICYmIGNoYW5nZXMuZHJvcHBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY2hhbmdlcy5kcm9wcGVkLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZWRMaXN0ID0gZHJvcEl0ZW08VD4oaXRlbSwgdXBkYXRlZExpc3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vICMjIEhhbmRsZSBJdGVtIGFkZGVkXG4gICAgICAgIGlmIChjaGFuZ2VzLmFkZGVkLmxlbmd0aCA+IDAgJiYgY2hhbmdlcy5kcm9wcGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNoYW5nZXMuYWRkZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlZExpc3QgPSBhZGRJdGVtPFQ+KGl0ZW0sIHVwZGF0ZWRMaXN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHVwZGF0ZWRMaXN0Lmxlbmd0aCA+IG5leHRMaXN0Lmxlbmd0aCkge1xuICAgIC8vIEl0ZW1zIGdvdCByZW1vdmVkOiBGaW5kIGl0ZW1zIHRoYXQgZ290IGNvbXBsZXRlbHkgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0LlxuICAgIGNvbnN0IG1pc3NpbmdJdGVtcyA9IGRpZmZlcmVuY2VCeSh1cGRhdGVkTGlzdCwgbmV4dExpc3QsIGdldFRyYWNrUmVmZXJlbmNlSWQpO1xuICAgIHVwZGF0ZWRMaXN0ID0gdXBkYXRlZExpc3QuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+ICFtaXNzaW5nSXRlbXMubWFwKGdldFRyYWNrUmVmZXJlbmNlSWQpLmluY2x1ZGVzKGdldFRyYWNrUmVmZXJlbmNlSWQoaXRlbSkpLFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gdXBkYXRlZExpc3Q7XG59XG5cbi8qKlxuICogVXBkYXRlIHRoZSBjdXJyZW50IGxpc3Qgd2l0aCB0aGUgaXRlbXMgZnJvbSB0aGUgbmV4dCBsaXN0IHdoZW5ldmVyIHRoZSBpdGVtIGlkcyBhcmUgdGhlIHNhbWVcbiAqIG9yIHRoZSBjdXJyZW50IGl0ZW0gaXMgYSBwbGFjZWhvbGRlciBhbmQgd2UgZmluZCBhIHRyYWNrIHJlZmVyZW5jZSBpbiB0aGUgbmV4dCBsaXN0XG4gKiB0byByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoLlxuICogQHJlbWFya3NcbiAqIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgYFRyYWNrUmVmZXJlbmNlYHMgY2FuIGNoYW5nZSB0aGVpciBpbnRlcm5hbCBzdGF0ZSB3aGlsZSBrZWVwaW5nIHRoZSBzYW1lIGlkLlxuICovXG5mdW5jdGlvbiByZWZyZXNoTGlzdDxUIGV4dGVuZHMgVXBkYXRhYmxlSXRlbT4oY3VycmVudExpc3Q6IFRbXSwgbmV4dExpc3Q6IFRbXSk6IFRbXSB7XG4gIHJldHVybiBjdXJyZW50TGlzdC5tYXAoKGN1cnJlbnRJdGVtKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlRm9yQ3VycmVudEl0ZW0gPSBuZXh0TGlzdC5maW5kKFxuICAgICAgKG5ld0l0ZW1fKSA9PlxuICAgICAgICAvLyBJZiB0aGUgSURzIG1hdGNoIG9yIC4uXG4gICAgICAgIGdldFRyYWNrUmVmZXJlbmNlSWQoY3VycmVudEl0ZW0pID09PSBnZXRUcmFja1JlZmVyZW5jZUlkKG5ld0l0ZW1fKSB8fFxuICAgICAgICAvLyAuLi4gaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhIHBsYWNlaG9sZGVyIGFuZCB0aGUgbmV3IGl0ZW0gaXMgdGhlIHRyYWNrIHJlZmVyZW5jZSBjYW4gcmVwbGFjZSBpdC5cbiAgICAgICAgKHR5cGVvZiBjdXJyZW50SXRlbSAhPT0gJ251bWJlcicgJiZcbiAgICAgICAgICBpc1RyYWNrUmVmZXJlbmNlUGxhY2Vob2xkZXIoY3VycmVudEl0ZW0pICYmXG4gICAgICAgICAgaXNUcmFja1JlZmVyZW5jZShuZXdJdGVtXykgJiZcbiAgICAgICAgICBpc1BsYWNlaG9sZGVyUmVwbGFjZW1lbnQoY3VycmVudEl0ZW0sIG5ld0l0ZW1fKSksXG4gICAgKTtcbiAgICByZXR1cm4gdXBkYXRlRm9yQ3VycmVudEl0ZW0gPz8gY3VycmVudEl0ZW07XG4gIH0pO1xufVxuIiwiaW1wb3J0IHR5cGUge1xuICBBdWRpb0NhcHR1cmVPcHRpb25zLFxuICBMb2NhbFBhcnRpY2lwYW50LFxuICBSb29tLFxuICBTY3JlZW5TaGFyZUNhcHR1cmVPcHRpb25zLFxuICBUcmFja1B1Ymxpc2hPcHRpb25zLFxuICBWaWRlb0NhcHR1cmVPcHRpb25zLFxufSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgeyBUcmFjayB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB0eXBlIHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgU3ViamVjdCwgbWFwLCBzdGFydFdpdGggfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQnO1xuaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcblxuZXhwb3J0IHR5cGUgQ2FwdHVyZU9wdGlvbnNCeVNvdXJjZTxUIGV4dGVuZHMgVG9nZ2xlU291cmNlPiA9IFQgZXh0ZW5kcyBUcmFjay5Tb3VyY2UuQ2FtZXJhXG4gID8gVmlkZW9DYXB0dXJlT3B0aW9uc1xuICA6IFQgZXh0ZW5kcyBUcmFjay5Tb3VyY2UuTWljcm9waG9uZVxuICAgID8gQXVkaW9DYXB0dXJlT3B0aW9uc1xuICAgIDogVCBleHRlbmRzIFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZVxuICAgICAgPyBTY3JlZW5TaGFyZUNhcHR1cmVPcHRpb25zXG4gICAgICA6IG5ldmVyO1xuXG5leHBvcnQgdHlwZSBNZWRpYVRvZ2dsZVR5cGU8VCBleHRlbmRzIFRvZ2dsZVNvdXJjZT4gPSB7XG4gIHBlbmRpbmdPYnNlcnZlcjogT2JzZXJ2YWJsZTxib29sZWFuPjtcbiAgdG9nZ2xlOiAoXG4gICAgZm9yY2VTdGF0ZT86IGJvb2xlYW4sXG4gICAgY2FwdHVyZU9wdGlvbnM/OiBDYXB0dXJlT3B0aW9uc0J5U291cmNlPFQ+LFxuICApID0+IFByb21pc2U8Ym9vbGVhbiB8IHVuZGVmaW5lZD47XG4gIGNsYXNzTmFtZTogc3RyaW5nO1xuICBlbmFibGVkT2JzZXJ2ZXI6IE9ic2VydmFibGU8Ym9vbGVhbj47XG59O1xuXG5leHBvcnQgdHlwZSBUb2dnbGVTb3VyY2UgPSBFeGNsdWRlPFxuICBUcmFjay5Tb3VyY2UsXG4gIFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvIHwgVHJhY2suU291cmNlLlVua25vd25cbj47XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cE1lZGlhVG9nZ2xlPFQgZXh0ZW5kcyBUb2dnbGVTb3VyY2U+KFxuICBzb3VyY2U6IFQsXG4gIHJvb206IFJvb20sXG4gIG9wdGlvbnM/OiBDYXB0dXJlT3B0aW9uc0J5U291cmNlPFQ+LFxuICBwdWJsaXNoT3B0aW9ucz86IFRyYWNrUHVibGlzaE9wdGlvbnMsXG4gIG9uRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkLFxuKTogTWVkaWFUb2dnbGVUeXBlPFQ+IHtcbiAgY29uc3QgeyBsb2NhbFBhcnRpY2lwYW50IH0gPSByb29tO1xuXG4gIGNvbnN0IGdldFNvdXJjZUVuYWJsZWQgPSAoc291cmNlOiBUb2dnbGVTb3VyY2UsIGxvY2FsUGFydGljaXBhbnQ6IExvY2FsUGFydGljaXBhbnQpID0+IHtcbiAgICBsZXQgaXNFbmFibGVkID0gZmFsc2U7XG4gICAgc3dpdGNoIChzb3VyY2UpIHtcbiAgICAgIGNhc2UgVHJhY2suU291cmNlLkNhbWVyYTpcbiAgICAgICAgaXNFbmFibGVkID0gbG9jYWxQYXJ0aWNpcGFudC5pc0NhbWVyYUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUcmFjay5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgICAgaXNFbmFibGVkID0gbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVHJhY2suU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgICBpc0VuYWJsZWQgPSBsb2NhbFBhcnRpY2lwYW50LmlzU2NyZWVuU2hhcmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gaXNFbmFibGVkO1xuICB9O1xuXG4gIGNvbnN0IGVuYWJsZWRPYnNlcnZlciA9IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKGxvY2FsUGFydGljaXBhbnQpLnBpcGUoXG4gICAgbWFwKChtZWRpYSkgPT4ge1xuICAgICAgcmV0dXJuIGdldFNvdXJjZUVuYWJsZWQoc291cmNlLCBtZWRpYS5wYXJ0aWNpcGFudCBhcyBMb2NhbFBhcnRpY2lwYW50KTtcbiAgICB9KSxcbiAgICBzdGFydFdpdGgoZ2V0U291cmNlRW5hYmxlZChzb3VyY2UsIGxvY2FsUGFydGljaXBhbnQpKSxcbiAgKTtcblxuICBjb25zdCBwZW5kaW5nU3ViamVjdCA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG4gIGNvbnN0IHRvZ2dsZSA9IGFzeW5jIChmb3JjZVN0YXRlPzogYm9vbGVhbiwgY2FwdHVyZU9wdGlvbnM/OiBDYXB0dXJlT3B0aW9uc0J5U291cmNlPFQ+KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNhcHR1cmVPcHRpb25zID8/PSBvcHRpb25zO1xuICAgICAgLy8gdHJpZ2dlciBvYnNlcnZhYmxlIHVwZGF0ZVxuICAgICAgcGVuZGluZ1N1YmplY3QubmV4dCh0cnVlKTtcbiAgICAgIHN3aXRjaCAoc291cmNlKSB7XG4gICAgICAgIGNhc2UgVHJhY2suU291cmNlLkNhbWVyYTpcbiAgICAgICAgICBhd2FpdCBsb2NhbFBhcnRpY2lwYW50LnNldENhbWVyYUVuYWJsZWQoXG4gICAgICAgICAgICBmb3JjZVN0YXRlID8/ICFsb2NhbFBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCxcbiAgICAgICAgICAgIGNhcHR1cmVPcHRpb25zIGFzIFZpZGVvQ2FwdHVyZU9wdGlvbnMsXG4gICAgICAgICAgICBwdWJsaXNoT3B0aW9ucyxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBsb2NhbFBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZDtcbiAgICAgICAgY2FzZSBUcmFjay5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgICAgICBhd2FpdCBsb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICAgZm9yY2VTdGF0ZSA/PyAhbG9jYWxQYXJ0aWNpcGFudC5pc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICAgICAgY2FwdHVyZU9wdGlvbnMgYXMgQXVkaW9DYXB0dXJlT3B0aW9ucyxcbiAgICAgICAgICAgIHB1Ymxpc2hPcHRpb25zLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsUGFydGljaXBhbnQuaXNNaWNyb3Bob25lRW5hYmxlZDtcbiAgICAgICAgY2FzZSBUcmFjay5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgYXdhaXQgbG9jYWxQYXJ0aWNpcGFudC5zZXRTY3JlZW5TaGFyZUVuYWJsZWQoXG4gICAgICAgICAgICBmb3JjZVN0YXRlID8/ICFsb2NhbFBhcnRpY2lwYW50LmlzU2NyZWVuU2hhcmVFbmFibGVkLFxuICAgICAgICAgICAgY2FwdHVyZU9wdGlvbnMgYXMgU2NyZWVuU2hhcmVDYXB0dXJlT3B0aW9ucyxcbiAgICAgICAgICAgIHB1Ymxpc2hPcHRpb25zLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGxvY2FsUGFydGljaXBhbnQuaXNTY3JlZW5TaGFyZUVuYWJsZWQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVHJpZWQgdG8gdG9nZ2xlIHVuc3VwcG9ydGVkIHNvdXJjZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChvbkVycm9yICYmIGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBvbkVycm9yPy4oZSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBwZW5kaW5nU3ViamVjdC5uZXh0KGZhbHNlKTtcbiAgICAgIC8vIHRyaWdnZXIgb2JzZXJ2YWJsZSB1cGRhdGVcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xhc3NOYW1lOiBzdHJpbmcgPSBwcmVmaXhDbGFzcygnYnV0dG9uJyk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lLFxuICAgIHRvZ2dsZSxcbiAgICBlbmFibGVkT2JzZXJ2ZXIsXG4gICAgcGVuZGluZ09ic2VydmVyOiBwZW5kaW5nU3ViamVjdC5hc09ic2VydmFibGUoKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwTWFudWFsVG9nZ2xlKCkge1xuICBsZXQgc3RhdGUgPSBmYWxzZTtcblxuICBjb25zdCBlbmFibGVkU3ViamVjdCA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG5cbiAgY29uc3QgcGVuZGluZ1N1YmplY3QgPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuXG4gIGNvbnN0IHRvZ2dsZSA9IGFzeW5jIChmb3JjZVN0YXRlPzogYm9vbGVhbikgPT4ge1xuICAgIHBlbmRpbmdTdWJqZWN0Lm5leHQodHJ1ZSk7XG4gICAgc3RhdGUgPSBmb3JjZVN0YXRlID8/ICFzdGF0ZTtcbiAgICBlbmFibGVkU3ViamVjdC5uZXh0KHN0YXRlKTtcbiAgICBwZW5kaW5nU3ViamVjdC5uZXh0KGZhbHNlKTtcbiAgfTtcbiAgY29uc3QgY2xhc3NOYW1lOiBzdHJpbmcgPSBwcmVmaXhDbGFzcygnYnV0dG9uJyk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lLFxuICAgIHRvZ2dsZSxcbiAgICBlbmFibGVkT2JzZXJ2ZXI6IGVuYWJsZWRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpLFxuICAgIHBlbmRpbmdPYnNlcnZlcjogcGVuZGluZ1N1YmplY3QuYXNPYnNlcnZhYmxlKCksXG4gIH07XG59XG4iLCJpbXBvcnQgdHlwZSB7IFBhcnRpY2lwYW50UGVybWlzc2lvbiB9IGZyb20gJ0BsaXZla2l0L3Byb3RvY29sJztcbmltcG9ydCB7IFBhcnRpY2lwYW50LCBSZW1vdGVQYXJ0aWNpcGFudCwgUm9vbSwgVHJhY2tQdWJsaWNhdGlvbiB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IFBhcnRpY2lwYW50RXZlbnQsIFJvb21FdmVudCwgVHJhY2sgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG4vLyBAdHMtaWdub3JlIHNvbWUgbW9kdWxlIHJlc29sdXRpb25zIChvdGhlciB0aGFuICdub2RlJykgY2hva2Ugb24gdGhpc1xuaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudEV2ZW50Q2FsbGJhY2tzIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQvZGlzdC9zcmMvcm9vbS9wYXJ0aWNpcGFudC9QYXJ0aWNpcGFudCc7XG5pbXBvcnQgdHlwZSB7IFN1YnNjcmliZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG1hcCwgc3RhcnRXaXRoLCBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGdldFRyYWNrQnlJZGVudGlmaWVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9tZWRpYVRyYWNrJztcbmltcG9ydCB7IGFsbFBhcnRpY2lwYW50RXZlbnRzLCBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHMgfSBmcm9tICcuLi9oZWxwZXIvZXZlbnRHcm91cHMnO1xuaW1wb3J0IHR5cGUgeyBUcmFja1JlZmVyZW5jZU9yUGxhY2Vob2xkZXIgfSBmcm9tICcuLi90cmFjay1yZWZlcmVuY2UnO1xuaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudElkZW50aWZpZXIsIFRyYWNrSWRlbnRpZmllciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IG9ic2VydmVSb29tRXZlbnRzIH0gZnJvbSAnLi9yb29tJztcblxuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50czxUIGV4dGVuZHMgUGFydGljaXBhbnQ+KFxuICBwYXJ0aWNpcGFudDogVCxcbiAgLi4uZXZlbnRzOiBQYXJ0aWNpcGFudEV2ZW50W11cbikge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU8VD4oKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IG9uUGFydGljaXBhbnRVcGRhdGUgPSAoKSA9PiB7XG4gICAgICBzdWJzY3JpYmUubmV4dChwYXJ0aWNpcGFudCk7XG4gICAgfTtcblxuICAgIGV2ZW50cy5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgIHBhcnRpY2lwYW50Lm9uKGV2dCBhcyBrZXlvZiBQYXJ0aWNpcGFudEV2ZW50Q2FsbGJhY2tzLCBvblBhcnRpY2lwYW50VXBkYXRlKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgICBwYXJ0aWNpcGFudC5vZmYoZXZ0IGFzIGtleW9mIFBhcnRpY2lwYW50RXZlbnRDYWxsYmFja3MsIG9uUGFydGljaXBhbnRVcGRhdGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pLnBpcGUoc3RhcnRXaXRoKHBhcnRpY2lwYW50KSk7XG5cbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGljaXBhbnRNZWRpYTxUIGV4dGVuZHMgUGFydGljaXBhbnQgPSBQYXJ0aWNpcGFudD4ge1xuICBpc0NhbWVyYUVuYWJsZWQ6IGJvb2xlYW47XG4gIGlzTWljcm9waG9uZUVuYWJsZWQ6IGJvb2xlYW47XG4gIGlzU2NyZWVuU2hhcmVFbmFibGVkOiBib29sZWFuO1xuICBtaWNyb3Bob25lVHJhY2s/OiBUcmFja1B1YmxpY2F0aW9uO1xuICBjYW1lcmFUcmFjaz86IFRyYWNrUHVibGljYXRpb247XG4gIHBhcnRpY2lwYW50OiBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWE8VCBleHRlbmRzIFBhcnRpY2lwYW50PihwYXJ0aWNpcGFudDogVCkge1xuICBjb25zdCBwYXJ0aWNpcGFudE9ic2VydmVyID0gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tNdXRlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5tdXRlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICAgIC8vIFBhcnRpY2lwYW50RXZlbnQuSXNTcGVha2luZ0NoYW5nZWQsXG4gICAgUGFydGljaXBhbnRFdmVudC5UcmFja1B1Ymxpc2hlZCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50LlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuTWVkaWFEZXZpY2VzRXJyb3IsXG4gICAgUGFydGljaXBhbnRFdmVudC5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQsXG4gICAgLy8gUGFydGljaXBhbnRFdmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICkucGlwZShcbiAgICBtYXAoKHApID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNaWNyb3Bob25lRW5hYmxlZCwgaXNDYW1lcmFFbmFibGVkLCBpc1NjcmVlblNoYXJlRW5hYmxlZCB9ID0gcDtcbiAgICAgIGNvbnN0IG1pY3JvcGhvbmVUcmFjayA9IHAuZ2V0VHJhY2tQdWJsaWNhdGlvbihUcmFjay5Tb3VyY2UuTWljcm9waG9uZSk7XG4gICAgICBjb25zdCBjYW1lcmFUcmFjayA9IHAuZ2V0VHJhY2tQdWJsaWNhdGlvbihUcmFjay5Tb3VyY2UuQ2FtZXJhKTtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50TWVkaWE6IFBhcnRpY2lwYW50TWVkaWE8VD4gPSB7XG4gICAgICAgIGlzQ2FtZXJhRW5hYmxlZCxcbiAgICAgICAgaXNNaWNyb3Bob25lRW5hYmxlZCxcbiAgICAgICAgaXNTY3JlZW5TaGFyZUVuYWJsZWQsXG4gICAgICAgIGNhbWVyYVRyYWNrLFxuICAgICAgICBtaWNyb3Bob25lVHJhY2ssXG4gICAgICAgIHBhcnRpY2lwYW50OiBwLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudE1lZGlhO1xuICAgIH0pLFxuICApO1xuXG4gIHJldHVybiBwYXJ0aWNpcGFudE9ic2VydmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhY2tPYnNlcnZlcihwYXJ0aWNpcGFudDogUGFydGljaXBhbnQsIG9wdGlvbnM6IFRyYWNrSWRlbnRpZmllcikge1xuICByZXR1cm4gb2JzZXJ2ZVBhcnRpY2lwYW50TWVkaWEocGFydGljaXBhbnQpLnBpcGUoXG4gICAgbWFwKCgpID0+IHtcbiAgICAgIHJldHVybiB7IHB1YmxpY2F0aW9uOiBnZXRUcmFja0J5SWRlbnRpZmllcihvcHRpb25zKSB9O1xuICAgIH0pLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFydGljaXBhbnRJbmZvT2JzZXJ2ZXIocGFydGljaXBhbnQ/OiBQYXJ0aWNpcGFudCkge1xuICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhcbiAgICBwYXJ0aWNpcGFudCxcbiAgICBQYXJ0aWNpcGFudEV2ZW50LlBhcnRpY2lwYW50TWV0YWRhdGFDaGFuZ2VkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuUGFydGljaXBhbnROYW1lQ2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIG1hcCgoeyBuYW1lLCBpZGVudGl0eSwgbWV0YWRhdGEgfSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgaWRlbnRpdHksXG4gICAgICAgIG1ldGFkYXRhLFxuICAgICAgfTtcbiAgICB9KSxcbiAgICBzdGFydFdpdGgoe1xuICAgICAgbmFtZTogcGFydGljaXBhbnQubmFtZSxcbiAgICAgIGlkZW50aXR5OiBwYXJ0aWNpcGFudC5pZGVudGl0eSxcbiAgICAgIG1ldGFkYXRhOiBwYXJ0aWNpcGFudC5tZXRhZGF0YSxcbiAgICB9KSxcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcihwYXJ0aWNpcGFudDogUGFydGljaXBhbnQpIHtcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBwYXJ0aWNpcGFudEV2ZW50U2VsZWN0b3IoXG4gICAgcGFydGljaXBhbnQsXG4gICAgUGFydGljaXBhbnRFdmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICkucGlwZShcbiAgICBtYXAoKFtxdWFsaXR5XSkgPT4gcXVhbGl0eSksXG4gICAgc3RhcnRXaXRoKHBhcnRpY2lwYW50LmNvbm5lY3Rpb25RdWFsaXR5KSxcbiAgKTtcbiAgcmV0dXJuIG9ic2VydmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yPFQgZXh0ZW5kcyBQYXJ0aWNpcGFudEV2ZW50PihcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50LFxuICBldmVudDogVCxcbikge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU8XG4gICAgUGFyYW1ldGVyczxQYXJ0aWNpcGFudEV2ZW50Q2FsbGJhY2tzW0V4dHJhY3Q8VCwga2V5b2YgUGFydGljaXBhbnRFdmVudENhbGxiYWNrcz5dPlxuICA+KChzdWJzY3JpYmUpID0+IHtcbiAgICBjb25zdCB1cGRhdGUgPSAoXG4gICAgICAuLi5wYXJhbXM6IFBhcmFtZXRlcnM8UGFydGljaXBhbnRFdmVudENhbGxiYWNrc1tFeHRyYWN0PFQsIGtleW9mIFBhcnRpY2lwYW50RXZlbnRDYWxsYmFja3M+XT5cbiAgICApID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHBhcmFtcyk7XG4gICAgfTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBhIHBlcmZlY3Qgb3ZlcmxhcCBiZXR3ZWVuIFBhcnRpY2lwYW50RXZlbnQgYW5kIGtleW9mIFBhcnRpY2lwYW50RXZlbnRDYWxsYmFja3NcbiAgICBwYXJ0aWNpcGFudC5vbihldmVudCwgdXBkYXRlKTtcblxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBub3QgYSBwZXJmZWN0IG92ZXJsYXAgYmV0d2VlbiBQYXJ0aWNpcGFudEV2ZW50IGFuZCBrZXlvZiBQYXJ0aWNpcGFudEV2ZW50Q2FsbGJhY2tzXG4gICAgICBwYXJ0aWNpcGFudC5vZmYoZXZlbnQsIHVwZGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbXV0ZWRPYnNlcnZlcih0cmFja1JlZjogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyKSB7XG4gIHJldHVybiBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMoXG4gICAgdHJhY2tSZWYucGFydGljaXBhbnQsXG4gICAgUGFydGljaXBhbnRFdmVudC5UcmFja011dGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tVbm11dGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tTdWJzY3JpYmVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuVHJhY2tVbnN1YnNjcmliZWQsXG4gICAgUGFydGljaXBhbnRFdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIFBhcnRpY2lwYW50RXZlbnQuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICApLnBpcGUoXG4gICAgbWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgY29uc3QgcHViID0gdHJhY2tSZWYucHVibGljYXRpb24gPz8gcGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbih0cmFja1JlZi5zb3VyY2UpO1xuICAgICAgcmV0dXJuIHB1Yj8uaXNNdXRlZCA/PyB0cnVlO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aChcbiAgICAgIHRyYWNrUmVmLnB1YmxpY2F0aW9uPy5pc011dGVkID8/XG4gICAgICAgIHRyYWNrUmVmLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24odHJhY2tSZWYuc291cmNlKT8uaXNNdXRlZCA/P1xuICAgICAgICB0cnVlLFxuICAgICksXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJc1NwZWFraW5nT2JzZXJ2ZXIocGFydGljaXBhbnQ6IFBhcnRpY2lwYW50KSB7XG4gIHJldHVybiBwYXJ0aWNpcGFudEV2ZW50U2VsZWN0b3IocGFydGljaXBhbnQsIFBhcnRpY2lwYW50RXZlbnQuSXNTcGVha2luZ0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwKChbaXNTcGVha2luZ10pID0+IGlzU3BlYWtpbmcpLFxuICApO1xufVxuXG50eXBlIENvbm5lY3RlZFBhcnRpY2lwYW50c09ic2VydmVyT3B0aW9ucyA9IHtcbiAgYWRkaXRpb25hbFJvb21FdmVudHM/OiBSb29tRXZlbnRbXTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0ZWRQYXJ0aWNpcGFudHNPYnNlcnZlcihcbiAgcm9vbTogUm9vbSxcbiAgb3B0aW9uczogQ29ubmVjdGVkUGFydGljaXBhbnRzT2JzZXJ2ZXJPcHRpb25zID0ge30sXG4pIHtcbiAgbGV0IHN1YnNjcmliZXI6IFN1YnNjcmliZXI8UmVtb3RlUGFydGljaXBhbnRbXT4gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlPFJlbW90ZVBhcnRpY2lwYW50W10+KChzdWIpID0+IHtcbiAgICBzdWJzY3JpYmVyID0gc3ViO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lci51bnN1YnNjcmliZSgpO1xuICB9KS5waXBlKHN0YXJ0V2l0aChBcnJheS5mcm9tKHJvb20ucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSkpO1xuXG4gIGNvbnN0IGFkZGl0aW9uYWxSb29tRXZlbnRzID0gb3B0aW9ucy5hZGRpdGlvbmFsUm9vbUV2ZW50cyA/PyBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHM7XG5cbiAgY29uc3Qgcm9vbUV2ZW50cyA9IEFycmF5LmZyb20oXG4gICAgbmV3IFNldChbXG4gICAgICBSb29tRXZlbnQuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICBSb29tRXZlbnQuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsXG4gICAgICBSb29tRXZlbnQuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgICAgIC4uLmFkZGl0aW9uYWxSb29tRXZlbnRzLFxuICAgIF0pLFxuICApO1xuXG4gIGNvbnN0IGxpc3RlbmVyID0gb2JzZXJ2ZVJvb21FdmVudHMocm9vbSwgLi4ucm9vbUV2ZW50cykuc3Vic2NyaWJlKChyKSA9PlxuICAgIHN1YnNjcmliZXI/Lm5leHQoQXJyYXkuZnJvbShyLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkpLFxuICApO1xuICBpZiAocm9vbS5yZW1vdGVQYXJ0aWNpcGFudHMuc2l6ZSA+IDApIHtcbiAgICBzdWJzY3JpYmVyPy5uZXh0KEFycmF5LmZyb20ocm9vbS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKTtcbiAgfVxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IHR5cGUgQ29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlck9wdGlvbnMgPSB7XG4gIGFkZGl0aW9uYWxFdmVudHM/OiBQYXJ0aWNpcGFudEV2ZW50W107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlcihcbiAgcm9vbTogUm9vbSxcbiAgaWRlbnRpdHk6IHN0cmluZyxcbiAgb3B0aW9uczogQ29ubmVjdGVkUGFydGljaXBhbnRPYnNlcnZlck9wdGlvbnMgPSB7fSxcbikge1xuICBjb25zdCBhZGRpdGlvbmFsRXZlbnRzID0gb3B0aW9ucy5hZGRpdGlvbmFsRXZlbnRzID8/IGFsbFBhcnRpY2lwYW50RXZlbnRzO1xuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVJvb21FdmVudHMoXG4gICAgcm9vbSxcbiAgICBSb29tRXZlbnQuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgUm9vbUV2ZW50LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgIFJvb21FdmVudC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICApLnBpcGUoXG4gICAgc3dpdGNoTWFwKChyKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHIuZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KGlkZW50aXR5KSBhcyBSZW1vdGVQYXJ0aWNpcGFudCB8IHVuZGVmaW5lZDtcbiAgICAgIGlmIChwYXJ0aWNpcGFudCkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZVBhcnRpY2lwYW50RXZlbnRzKHBhcnRpY2lwYW50LCAuLi5hZGRpdGlvbmFsRXZlbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTx1bmRlZmluZWQ+KChzdWJzY3JpYmUpID0+IHN1YnNjcmliZS5uZXh0KHVuZGVmaW5lZCkpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHN0YXJ0V2l0aChyb29tLmdldFBhcnRpY2lwYW50QnlJZGVudGl0eShpZGVudGl0eSkgYXMgUmVtb3RlUGFydGljaXBhbnQgfCB1bmRlZmluZWQpLFxuICApO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFydGljaXBhbnRQZXJtaXNzaW9uT2JzZXJ2ZXIoXG4gIHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudCxcbik6IE9ic2VydmFibGU8UGFydGljaXBhbnRQZXJtaXNzaW9uIHwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IG9ic2VydmVyID0gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIFBhcnRpY2lwYW50RXZlbnQuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWQsXG4gICkucGlwZShcbiAgICBtYXAoKCkgPT4gcGFydGljaXBhbnQucGVybWlzc2lvbnMpLFxuICAgIHN0YXJ0V2l0aChwYXJ0aWNpcGFudC5wZXJtaXNzaW9ucyksXG4gICk7XG4gIHJldHVybiBvYnNlcnZlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpY2lwYW50QnlJZGVudGlmaWVyT2JzZXJ2ZXIoXG4gIHJvb206IFJvb20sXG4gIHsga2luZCwgaWRlbnRpdHkgfTogUGFydGljaXBhbnRJZGVudGlmaWVyLFxuICBvcHRpb25zOiBDb25uZWN0ZWRQYXJ0aWNpcGFudE9ic2VydmVyT3B0aW9ucyA9IHt9LFxuKTogT2JzZXJ2YWJsZTxSZW1vdGVQYXJ0aWNpcGFudCB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBhZGRpdGlvbmFsRXZlbnRzID0gb3B0aW9ucy5hZGRpdGlvbmFsRXZlbnRzID8/IGFsbFBhcnRpY2lwYW50RXZlbnRzO1xuICBjb25zdCBtYXRjaGVzSWRlbnRpZmllciA9IChwYXJ0aWNpcGFudDogUmVtb3RlUGFydGljaXBhbnQpID0+IHtcbiAgICBsZXQgaXNNYXRjaCA9IHRydWU7XG4gICAgaWYgKGtpbmQpIHtcbiAgICAgIGlzTWF0Y2ggPSBpc01hdGNoICYmIHBhcnRpY2lwYW50LmtpbmQgPT09IGtpbmQ7XG4gICAgfVxuICAgIGlmIChpZGVudGl0eSkge1xuICAgICAgaXNNYXRjaCA9IGlzTWF0Y2ggJiYgcGFydGljaXBhbnQuaWRlbnRpdHkgPT09IGlkZW50aXR5O1xuICAgIH1cbiAgICByZXR1cm4gaXNNYXRjaDtcbiAgfTtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmVSb29tRXZlbnRzKFxuICAgIHJvb20sXG4gICAgUm9vbUV2ZW50LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgIFJvb21FdmVudC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIHN3aXRjaE1hcCgocikgPT4ge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBBcnJheS5mcm9tKHIucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKS5maW5kKChwKSA9PlxuICAgICAgICBtYXRjaGVzSWRlbnRpZmllcihwKSxcbiAgICAgICk7XG4gICAgICBpZiAocGFydGljaXBhbnQpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyhwYXJ0aWNpcGFudCwgLi4uYWRkaXRpb25hbEV2ZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGU8dW5kZWZpbmVkPigoc3Vic2NyaWJlKSA9PiBzdWJzY3JpYmUubmV4dCh1bmRlZmluZWQpKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBzdGFydFdpdGgoQXJyYXkuZnJvbShyb29tLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkuZmluZCgocCkgPT4gbWF0Y2hlc0lkZW50aWZpZXIocCkpKSxcbiAgKTtcblxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpY2lwYW50QXR0cmlidXRlc09ic2VydmVyKHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudCk6IE9ic2VydmFibGU8e1xuICBjaGFuZ2VkOiBSZWFkb25seTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PjtcbiAgYXR0cmlidXRlczogUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgc3RyaW5nPj47XG59PjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWNpcGFudEF0dHJpYnV0ZXNPYnNlcnZlcihwYXJ0aWNpcGFudDogdW5kZWZpbmVkKTogT2JzZXJ2YWJsZTx7XG4gIGNoYW5nZWQ6IHVuZGVmaW5lZDtcbiAgYXR0cmlidXRlczogdW5kZWZpbmVkO1xufT47XG5leHBvcnQgZnVuY3Rpb24gcGFydGljaXBhbnRBdHRyaWJ1dGVzT2JzZXJ2ZXIocGFydGljaXBhbnQ6IFBhcnRpY2lwYW50IHwgdW5kZWZpbmVkKSB7XG4gIGlmICh0eXBlb2YgcGFydGljaXBhbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPHsgY2hhbmdlZDogdW5kZWZpbmVkOyBhdHRyaWJ1dGVzOiB1bmRlZmluZWQgfT4oKTtcbiAgfVxuICByZXR1cm4gcGFydGljaXBhbnRFdmVudFNlbGVjdG9yKHBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudEV2ZW50LkF0dHJpYnV0ZXNDaGFuZ2VkKS5waXBlKFxuICAgIG1hcCgoW2NoYW5nZWRBdHRyaWJ1dGVzXSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2hhbmdlZDogY2hhbmdlZEF0dHJpYnV0ZXMgYXMgUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4sXG4gICAgICAgIGF0dHJpYnV0ZXM6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXMsXG4gICAgICB9O1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aCh7IGNoYW5nZWQ6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXM6IHBhcnRpY2lwYW50LmF0dHJpYnV0ZXMgfSksXG4gICk7XG59XG4iLCJpbXBvcnQgeyBUcmFjayB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IG1hcCwgc3RhcnRXaXRoIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBvYnNlcnZlUGFydGljaXBhbnRNZWRpYSB9IGZyb20gJy4uL29ic2VydmFibGVzL3BhcnRpY2lwYW50JztcbmltcG9ydCB7IHByZWZpeENsYXNzIH0gZnJvbSAnLi4vc3R5bGVzLWludGVyZmFjZSc7XG5pbXBvcnQgeyBpc1RyYWNrUmVmZXJlbmNlIH0gZnJvbSAnLi4vdHJhY2stcmVmZXJlbmNlL3RyYWNrLXJlZmVyZW5jZS50eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFRyYWNrSWRlbnRpZmllciB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwTWVkaWFUcmFjayh0cmFja0lkZW50aWZpZXI6IFRyYWNrSWRlbnRpZmllcikge1xuICBjb25zdCBpbml0aWFsUHViID0gZ2V0VHJhY2tCeUlkZW50aWZpZXIodHJhY2tJZGVudGlmaWVyKTtcbiAgY29uc3QgdHJhY2tPYnNlcnZlciA9IG9ic2VydmVQYXJ0aWNpcGFudE1lZGlhKHRyYWNrSWRlbnRpZmllci5wYXJ0aWNpcGFudCkucGlwZShcbiAgICBtYXAoKCkgPT4ge1xuICAgICAgcmV0dXJuIGdldFRyYWNrQnlJZGVudGlmaWVyKHRyYWNrSWRlbnRpZmllcik7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoKGluaXRpYWxQdWIpLFxuICApO1xuICBjb25zdCBjbGFzc05hbWU6IHN0cmluZyA9IHByZWZpeENsYXNzKFxuICAgIHRyYWNrSWRlbnRpZmllci5zb3VyY2UgPT09IFRyYWNrLlNvdXJjZS5DYW1lcmEgfHxcbiAgICAgIHRyYWNrSWRlbnRpZmllci5zb3VyY2UgPT09IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZVxuICAgICAgPyAncGFydGljaXBhbnQtbWVkaWEtdmlkZW8nXG4gICAgICA6ICdwYXJ0aWNpcGFudC1tZWRpYS1hdWRpbycsXG4gICk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgdHJhY2tPYnNlcnZlciB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2tCeUlkZW50aWZpZXIob3B0aW9uczogVHJhY2tJZGVudGlmaWVyKSB7XG4gIGlmIChpc1RyYWNrUmVmZXJlbmNlKG9wdGlvbnMpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMucHVibGljYXRpb247XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgeyBzb3VyY2UsIG5hbWUsIHBhcnRpY2lwYW50IH0gPSBvcHRpb25zO1xuICAgIGlmIChzb3VyY2UgJiYgbmFtZSkge1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50XG4gICAgICAgIC5nZXRUcmFja1B1YmxpY2F0aW9ucygpXG4gICAgICAgIC5maW5kKChwdWIpID0+IHB1Yi5zb3VyY2UgPT09IHNvdXJjZSAmJiBwdWIudHJhY2tOYW1lID09PSBuYW1lKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uQnlOYW1lKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0IGxlYXN0IG9uZSBvZiBzb3VyY2UgYW5kIG5hbWUgbmVlZHMgdG8gYmUgZGVmaW5lZCcpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBVbnByZWZpeGVkQ2xhc3NOYW1lcyBhcyBDb21wb25lbnROb1ByZWZpeENsYXNzZXMgfSBmcm9tICdAbGl2ZWtpdC9jb21wb25lbnRzLXN0eWxlcy9kaXN0L3R5cGVzX3VucHJlZml4ZWQvaW5kZXguc2Nzcyc7XG5pbXBvcnQgdHlwZSB7IFVucHJlZml4ZWRDbGFzc05hbWVzIGFzIFByZWZhYk5vUHJlZml4Q2xhc3NlcyB9IGZyb20gJ0BsaXZla2l0L2NvbXBvbmVudHMtc3R5bGVzL2Rpc3QvdHlwZXNfdW5wcmVmaXhlZC9wcmVmYWJzL2luZGV4LnNjc3MnO1xuaW1wb3J0IHsgY3NzUHJlZml4IH0gZnJvbSAnLi8uLi9jb25zdGFudHMnO1xuXG50eXBlIFVucHJlZml4ZWRDbGFzc05hbWVzID0gQ29tcG9uZW50Tm9QcmVmaXhDbGFzc2VzIHwgUHJlZmFiTm9QcmVmaXhDbGFzc2VzO1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYSB0eXBlIHNhZmUgd2F5IHRvIGFkZCBhIHByZWZpeCB0byBhIEhUTUwgY2xhc3MgYXR0cmlidXRlLlxuICogT25seSBjbGFzc2VzIGRlZmluZWQgaW4gdGhlIHN0eWxlcyBtb2R1bGUgYXJlIHZhbGlkLCBhbnkgb3RoZXIgY2xhc3MgcHJvZHVjZXMgYSB0cyBlcnJvci5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlZml4Q2xhc3M8VCBleHRlbmRzIFVucHJlZml4ZWRDbGFzc05hbWVzPih1bnByZWZpeGVkQ2xhc3NOYW1lOiBUKSB7XG4gIHJldHVybiBgJHtjc3NQcmVmaXh9LSR7dW5wcmVmaXhlZENsYXNzTmFtZX1gIGFzIGNvbnN0O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBTdWJzY3JpYmVyLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFN1YmplY3QsIG1hcCwgT2JzZXJ2YWJsZSwgc3RhcnRXaXRoLCBmaW5hbGl6ZSwgZmlsdGVyLCBjb25jYXQgfSBmcm9tICdyeGpzJztcbmltcG9ydCB0eXBlIHsgUGFydGljaXBhbnQsIFRyYWNrUHVibGljYXRpb24gfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgeyBMb2NhbFBhcnRpY2lwYW50LCBSb29tLCBSb29tRXZlbnQsIFRyYWNrIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuLy8gQHRzLWlnbm9yZSBzb21lIG1vZHVsZSByZXNvbHV0aW9ucyAob3RoZXIgdGhhbiAnbm9kZScpIGNob2tlIG9uIHRoaXNcbmltcG9ydCB0eXBlIHsgUm9vbUV2ZW50Q2FsbGJhY2tzIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQvZGlzdC9zcmMvcm9vbS9Sb29tJztcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4uL2xvZ2dlcic7XG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZVJvb21FdmVudHMocm9vbTogUm9vbSwgLi4uZXZlbnRzOiBSb29tRXZlbnRbXSk6IE9ic2VydmFibGU8Um9vbT4ge1xuICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU8Um9vbT4oKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IG9uUm9vbVVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHJvb20pO1xuICAgIH07XG5cbiAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICByb29tLm9uKGV2dCwgb25Sb29tVXBkYXRlKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gKCkgPT4ge1xuICAgICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgICByb29tLm9mZihldnQsIG9uUm9vbVVwZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSkucGlwZShzdGFydFdpdGgocm9vbSkpO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm9vbUV2ZW50U2VsZWN0b3I8VCBleHRlbmRzIFJvb21FdmVudD4ocm9vbTogUm9vbSwgZXZlbnQ6IFQpIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlPFBhcmFtZXRlcnM8Um9vbUV2ZW50Q2FsbGJhY2tzW1RdPj4oKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZSA9ICguLi5wYXJhbXM6IFBhcmFtZXRlcnM8Um9vbUV2ZW50Q2FsbGJhY2tzW1RdPikgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocGFyYW1zKTtcbiAgICB9O1xuICAgIHJvb20ub24oZXZlbnQgYXMga2V5b2YgUm9vbUV2ZW50Q2FsbGJhY2tzLCB1cGRhdGUpO1xuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICByb29tLm9mZihldmVudCBhcyBrZXlvZiBSb29tRXZlbnRDYWxsYmFja3MsIHVwZGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gIH0pO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm9vbU9ic2VydmVyKHJvb206IFJvb20pIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmVSb29tRXZlbnRzKFxuICAgIHJvb20sXG4gICAgUm9vbUV2ZW50LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgIFJvb21FdmVudC5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBSb29tRXZlbnQuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICAgIFJvb21FdmVudC5UcmFja1N1YnNjcmliZWQsXG4gICAgUm9vbUV2ZW50LlRyYWNrVW5zdWJzY3JpYmVkLFxuICAgIFJvb21FdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIFJvb21FdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgUm9vbUV2ZW50LkF1ZGlvUGxheWJhY2tTdGF0dXNDaGFuZ2VkLFxuICAgIFJvb21FdmVudC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICApLnBpcGUoc3RhcnRXaXRoKHJvb20pKTtcblxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3Rpb25TdGF0ZU9ic2VydmVyKHJvb206IFJvb20pIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkKS5waXBlKFxuICAgIG1hcCgoW2Nvbm5lY3Rpb25TdGF0ZV0pID0+IGNvbm5lY3Rpb25TdGF0ZSksXG4gICAgc3RhcnRXaXRoKHJvb20uc3RhdGUpLFxuICApO1xufVxuZXhwb3J0IHR5cGUgU2NyZWVuU2hhcmVUcmFja01hcCA9IEFycmF5PHtcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50O1xuICB0cmFja3M6IEFycmF5PFRyYWNrUHVibGljYXRpb24+O1xufT47XG5cbmV4cG9ydCBmdW5jdGlvbiBzY3JlZW5TaGFyZU9ic2VydmVyKHJvb206IFJvb20pIHtcbiAgbGV0IHNjcmVlblNoYXJlU3Vic2NyaWJlcjogU3Vic2NyaWJlcjxTY3JlZW5TaGFyZVRyYWNrTWFwPjtcbiAgY29uc3Qgb2JzZXJ2ZXJzOiBBcnJheTxTdWJzY3JpcHRpb24+ID0gW107XG5cbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlPFNjcmVlblNoYXJlVHJhY2tNYXA+KChzdWJzY3JpYmVyKSA9PiB7XG4gICAgc2NyZWVuU2hhcmVTdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb2JzZXJ2ZXJzLmZvckVhY2goKG9ic2VydmVyKSA9PiB7XG4gICAgICAgIG9ic2VydmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcbiAgY29uc3Qgc2NyZWVuU2hhcmVUcmFja3M6IFNjcmVlblNoYXJlVHJhY2tNYXAgPSBbXTtcblxuICBjb25zdCBoYW5kbGVTdWIgPSAocHVibGljYXRpb246IFRyYWNrUHVibGljYXRpb24sIHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIHB1YmxpY2F0aW9uLnNvdXJjZSAhPT0gVHJhY2suU291cmNlLlNjcmVlblNoYXJlICYmXG4gICAgICBwdWJsaWNhdGlvbi5zb3VyY2UgIT09IFRyYWNrLlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0cmFja01hcCA9IHNjcmVlblNoYXJlVHJhY2tzLmZpbmQoKHRyKSA9PiB0ci5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gcGFydGljaXBhbnQuaWRlbnRpdHkpO1xuICAgIGNvbnN0IGdldFNjcmVlblNoYXJlVHJhY2tzID0gKHBhcnRpY2lwYW50OiBQYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50XG4gICAgICAgIC5nZXRUcmFja1B1YmxpY2F0aW9ucygpXG4gICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgKHRyYWNrKSA9PlxuICAgICAgICAgICAgKHRyYWNrLnNvdXJjZSA9PT0gVHJhY2suU291cmNlLlNjcmVlblNoYXJlIHx8XG4gICAgICAgICAgICAgIHRyYWNrLnNvdXJjZSA9PT0gVHJhY2suU291cmNlLlNjcmVlblNoYXJlQXVkaW8pICYmXG4gICAgICAgICAgICB0cmFjay50cmFjayxcbiAgICAgICAgKTtcbiAgICB9O1xuICAgIGlmICghdHJhY2tNYXApIHtcbiAgICAgIHRyYWNrTWFwID0ge1xuICAgICAgICBwYXJ0aWNpcGFudCxcbiAgICAgICAgdHJhY2tzOiBnZXRTY3JlZW5TaGFyZVRyYWNrcyhwYXJ0aWNpcGFudCksXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRleCA9IHNjcmVlblNoYXJlVHJhY2tzLmluZGV4T2YodHJhY2tNYXApO1xuICAgICAgc2NyZWVuU2hhcmVUcmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRyYWNrTWFwLnRyYWNrcyA9IGdldFNjcmVlblNoYXJlVHJhY2tzKHBhcnRpY2lwYW50KTtcbiAgICB9XG4gICAgaWYgKHRyYWNrTWFwLnRyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBzY3JlZW5TaGFyZVRyYWNrcy5wdXNoKHRyYWNrTWFwKTtcbiAgICB9XG5cbiAgICBzY3JlZW5TaGFyZVN1YnNjcmliZXIubmV4dChzY3JlZW5TaGFyZVRyYWNrcyk7XG4gIH07XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5UcmFja1N1YnNjcmliZWQpLnN1YnNjcmliZSgoWywgLi4uYXJnc10pID0+XG4gICAgICBoYW5kbGVTdWIoLi4uYXJncyksXG4gICAgKSxcbiAgKTtcbiAgb2JzZXJ2ZXJzLnB1c2goXG4gICAgcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50LlRyYWNrVW5zdWJzY3JpYmVkKS5zdWJzY3JpYmUoKFssIC4uLmFyZ3NdKSA9PlxuICAgICAgaGFuZGxlU3ViKC4uLmFyZ3MpLFxuICAgICksXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5Mb2NhbFRyYWNrUHVibGlzaGVkKS5zdWJzY3JpYmUoKGFyZ3MpID0+IGhhbmRsZVN1YiguLi5hcmdzKSksXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQpLnN1YnNjcmliZSgoYXJncykgPT4ge1xuICAgICAgaGFuZGxlU3ViKC4uLmFyZ3MpO1xuICAgIH0pLFxuICApO1xuICBvYnNlcnZlcnMucHVzaChcbiAgICByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQuVHJhY2tNdXRlZCkuc3Vic2NyaWJlKChhcmdzKSA9PiB7XG4gICAgICBoYW5kbGVTdWIoLi4uYXJncyk7XG4gICAgfSksXG4gICk7XG4gIG9ic2VydmVycy5wdXNoKFxuICAgIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5UcmFja1VubXV0ZWQpLnN1YnNjcmliZSgoYXJncykgPT4ge1xuICAgICAgaGFuZGxlU3ViKC4uLmFyZ3MpO1xuICAgIH0pLFxuICApO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyBUT0RPIGZpbmQgd2F5IHRvIGF2b2lkIHRoaXMgdGltZW91dFxuICAgIGZvciAoY29uc3QgcCBvZiByb29tLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkge1xuICAgICAgcC5nZXRUcmFja1B1YmxpY2F0aW9ucygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgIGhhbmRsZVN1Yih0cmFjaywgcCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIDEpO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm9vbUluZm9PYnNlcnZlcihyb29tOiBSb29tKSB7XG4gIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZVJvb21FdmVudHMoXG4gICAgcm9vbSxcbiAgICBSb29tRXZlbnQuUm9vbU1ldGFkYXRhQ2hhbmdlZCxcbiAgICBSb29tRXZlbnQuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIG1hcCgocikgPT4ge1xuICAgICAgcmV0dXJuIHsgbmFtZTogci5uYW1lLCBtZXRhZGF0YTogci5tZXRhZGF0YSB9O1xuICAgIH0pLFxuICApO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmVTcGVha2VyT2JzZXJ2ZXIocm9vbTogUm9vbSkge1xuICByZXR1cm4gcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50LkFjdGl2ZVNwZWFrZXJzQ2hhbmdlZCkucGlwZShcbiAgICBtYXAoKFtzcGVha2Vyc10pID0+IHNwZWFrZXJzKSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1lZGlhRGV2aWNlT2JzZXJ2ZXIoXG4gIGtpbmQ/OiBNZWRpYURldmljZUtpbmQsXG4gIG9uRXJyb3I/OiAoZTogRXJyb3IpID0+IHZvaWQsXG4gIHJlcXVlc3RQZXJtaXNzaW9ucyA9IHRydWUsXG4pIHtcbiAgY29uc3Qgb25EZXZpY2VDaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld0RldmljZXMgPSBhd2FpdCBSb29tLmdldExvY2FsRGV2aWNlcyhraW5kLCByZXF1ZXN0UGVybWlzc2lvbnMpO1xuICAgICAgZGV2aWNlU3ViamVjdC5uZXh0KG5ld0RldmljZXMpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgb25FcnJvcj8uKGUpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZGV2aWNlU3ViamVjdCA9IG5ldyBTdWJqZWN0PE1lZGlhRGV2aWNlSW5mb1tdPigpO1xuXG4gIGNvbnN0IG9ic2VydmFibGUgPSBkZXZpY2VTdWJqZWN0LnBpcGUoXG4gICAgZmluYWxpemUoKCkgPT4ge1xuICAgICAgbmF2aWdhdG9yPy5tZWRpYURldmljZXM/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RldmljZWNoYW5nZScsIG9uRGV2aWNlQ2hhbmdlKTtcbiAgICB9KSxcbiAgKTtcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAoIXdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEFjY2Vzc2luZyBtZWRpYSBkZXZpY2VzIGlzIGF2YWlsYWJsZSBvbmx5IGluIHNlY3VyZSBjb250ZXh0cyAoSFRUUFMgYW5kIGxvY2FsaG9zdCksIGluIHNvbWUgb3IgYWxsIHN1cHBvcnRpbmcgYnJvd3NlcnMuIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hdmlnYXRvci9tZWRpYURldmljZXNgLFxuICAgICAgKTtcbiAgICB9XG4gICAgbmF2aWdhdG9yPy5tZWRpYURldmljZXM/LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZWNoYW5nZScsIG9uRGV2aWNlQ2hhbmdlKTtcbiAgfVxuICAvLyBiZWNhdXNlIHdlIHJlbHkgb24gYW4gYXN5bmMgZnVuY3Rpb24sIGNvbmNhdCB0aGUgcHJvbWlzZSB0byByZXRyaWV2ZSB0aGUgaW5pdGlhbCB2YWx1ZXMgd2l0aCB0aGUgb2JzZXJ2YWJsZVxuICByZXR1cm4gY29uY2F0KFxuICAgIFJvb20uZ2V0TG9jYWxEZXZpY2VzKGtpbmQsIHJlcXVlc3RQZXJtaXNzaW9ucykuY2F0Y2goKGUpID0+IHtcbiAgICAgIG9uRXJyb3I/LihlKTtcbiAgICAgIHJldHVybiBbXSBhcyBNZWRpYURldmljZUluZm9bXTtcbiAgICB9KSxcbiAgICBvYnNlcnZhYmxlLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGF0YU9ic2VydmVyKHJvb206IFJvb20pIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5EYXRhUmVjZWl2ZWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhdE9ic2VydmVyKHJvb206IFJvb20pIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5DaGF0TWVzc2FnZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByb29tQXVkaW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlKHJvb206IFJvb20pIHtcbiAgY29uc3Qgb2JzZXJ2YWJsZSA9IG9ic2VydmVSb29tRXZlbnRzKHJvb20sIFJvb21FdmVudC5BdWRpb1BsYXliYWNrU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBtYXAoKHJvb20pID0+IHtcbiAgICAgIHJldHVybiB7IGNhblBsYXlBdWRpbzogcm9vbS5jYW5QbGF5YmFja0F1ZGlvIH07XG4gICAgfSksXG4gICk7XG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZShyb29tOiBSb29tKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUm9vbUV2ZW50cyhyb29tLCBSb29tRXZlbnQuVmlkZW9QbGF5YmFja1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwKChyb29tKSA9PiB7XG4gICAgICByZXR1cm4geyBjYW5QbGF5VmlkZW86IHJvb20uY2FuUGxheWJhY2tWaWRlbyB9O1xuICAgIH0pLFxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFjdGl2ZURldmljZU9ic2VydmFibGUocm9vbTogUm9vbSwga2luZDogTWVkaWFEZXZpY2VLaW5kKSB7XG4gIHJldHVybiByb29tRXZlbnRTZWxlY3Rvcihyb29tLCBSb29tRXZlbnQuQWN0aXZlRGV2aWNlQ2hhbmdlZCkucGlwZShcbiAgICBmaWx0ZXIoKFtraW5kT2ZEZXZpY2VdKSA9PiBraW5kT2ZEZXZpY2UgPT09IGtpbmQpLFxuICAgIG1hcCgoW2tpbmQsIGRldmljZUlkXSkgPT4ge1xuICAgICAgbG9nLmRlYnVnKCdhY3RpdmVEZXZpY2VPYnNlcnZhYmxlIHwgUm9vbUV2ZW50LkFjdGl2ZURldmljZUNoYW5nZWQnLCB7IGtpbmQsIGRldmljZUlkIH0pO1xuICAgICAgcmV0dXJuIGRldmljZUlkO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aChyb29tLmdldEFjdGl2ZURldmljZShraW5kKSksXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNyeXB0aW9uU3RhdHVzT2JzZXJ2YWJsZShyb29tOiBSb29tLCBwYXJ0aWNpcGFudDogUGFydGljaXBhbnQgfCB1bmRlZmluZWQpIHtcbiAgcmV0dXJuIHJvb21FdmVudFNlbGVjdG9yKHJvb20sIFJvb21FdmVudC5QYXJ0aWNpcGFudEVuY3J5cHRpb25TdGF0dXNDaGFuZ2VkKS5waXBlKFxuICAgIGZpbHRlcihcbiAgICAgIChbLCBwXSkgPT5cbiAgICAgICAgcGFydGljaXBhbnQ/LmlkZW50aXR5ID09PSBwPy5pZGVudGl0eSB8fFxuICAgICAgICAoIXAgJiYgcGFydGljaXBhbnQ/LmlkZW50aXR5ID09PSByb29tLmxvY2FsUGFydGljaXBhbnQuaWRlbnRpdHkpLFxuICAgICksXG4gICAgbWFwKChbZW5jcnlwdGVkXSkgPT4gZW5jcnlwdGVkKSxcbiAgICBzdGFydFdpdGgoXG4gICAgICBwYXJ0aWNpcGFudCBpbnN0YW5jZW9mIExvY2FsUGFydGljaXBhbnRcbiAgICAgICAgPyBwYXJ0aWNpcGFudC5pc0UyRUVFbmFibGVkXG4gICAgICAgIDogISFwYXJ0aWNpcGFudD8uaXNFbmNyeXB0ZWQsXG4gICAgKSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZGluZ1N0YXR1c09ic2VydmFibGUocm9vbTogUm9vbSkge1xuICByZXR1cm4gcm9vbUV2ZW50U2VsZWN0b3Iocm9vbSwgUm9vbUV2ZW50LlJlY29yZGluZ1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgbWFwKChbcmVjb3JkaW5nXSkgPT4gcmVjb3JkaW5nKSxcbiAgICBzdGFydFdpdGgocm9vbS5pc1JlY29yZGluZyksXG4gICk7XG59XG4iLCJpbXBvcnQge1xuICBUcmFjayxcbiAgdHlwZSBMb2NhbEF1ZGlvVHJhY2ssXG4gIHR5cGUgTG9jYWxWaWRlb1RyYWNrLFxuICB0eXBlIFJvb20sXG4gIHR5cGUgTG9jYWxUcmFjayxcbn0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcbmltcG9ydCB7IGNyZWF0ZUFjdGl2ZURldmljZU9ic2VydmFibGUgfSBmcm9tICcuLi9vYnNlcnZhYmxlcy9yb29tJztcblxuZXhwb3J0IHR5cGUgU2V0TWVkaWFEZXZpY2VPcHRpb25zID0ge1xuICAvKipcbiAgICogIElmIHRydWUsIGFkZHMgYW4gYGV4YWN0YCBjb25zdHJhaW50IHRvIHRoZSBnZXRVc2VyTWVkaWEgcmVxdWVzdC5cbiAgICogIFRoZSByZXF1ZXN0IHdpbGwgZmFpbCBpZiB0aGlzIG9wdGlvbiBpcyB0cnVlIGFuZCB0aGUgZGV2aWNlIHNwZWNpZmllZCBpcyBub3QgYWN0dWFsbHkgYXZhaWxhYmxlXG4gICAqL1xuICBleGFjdD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBEZXZpY2VTZWxlY3RvcihcbiAga2luZDogTWVkaWFEZXZpY2VLaW5kLFxuICByb29tPzogUm9vbSxcbiAgbG9jYWxUcmFjaz86IExvY2FsQXVkaW9UcmFjayB8IExvY2FsVmlkZW9UcmFjayxcbikge1xuICBjb25zdCBhY3RpdmVEZXZpY2VTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmcgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbiAgY29uc3QgYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZSA9IHJvb21cbiAgICA/IGNyZWF0ZUFjdGl2ZURldmljZU9ic2VydmFibGUocm9vbSwga2luZClcbiAgICA6IGFjdGl2ZURldmljZVN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgY29uc3Qgc2V0QWN0aXZlTWVkaWFEZXZpY2UgPSBhc3luYyAoaWQ6IHN0cmluZywgb3B0aW9uczogU2V0TWVkaWFEZXZpY2VPcHRpb25zID0ge30pID0+IHtcbiAgICBpZiAocm9vbSkge1xuICAgICAgbG9nLmRlYnVnKGBTd2l0Y2hpbmcgYWN0aXZlIGRldmljZSBvZiBraW5kIFwiJHtraW5kfVwiIHdpdGggaWQgJHtpZH0uYCk7XG4gICAgICBhd2FpdCByb29tLnN3aXRjaEFjdGl2ZURldmljZShraW5kLCBpZCwgb3B0aW9ucy5leGFjdCk7XG4gICAgICBjb25zdCBhY3R1YWxEZXZpY2VJZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gcm9vbS5nZXRBY3RpdmVEZXZpY2Uoa2luZCkgPz8gaWQ7XG4gICAgICBpZiAoYWN0dWFsRGV2aWNlSWQgIT09IGlkICYmIGlkICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgbG9nLmluZm8oXG4gICAgICAgICAgYFdlIHRyaWVkIHRvIHNlbGVjdCB0aGUgZGV2aWNlIHdpdGggaWQgKCR7aWR9KSwgYnV0IHRoZSBicm93c2VyIGRlY2lkZWQgdG8gc2VsZWN0IHRoZSBkZXZpY2Ugd2l0aCBpZCAoJHthY3R1YWxEZXZpY2VJZH0pIGluc3RlYWQuYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGxldCB0YXJnZXRUcmFjazogTG9jYWxUcmFjayB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgIGlmIChraW5kID09PSAnYXVkaW9pbnB1dCcpXG4gICAgICAgIHRhcmdldFRyYWNrID0gcm9vbS5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oVHJhY2suU291cmNlLk1pY3JvcGhvbmUpPy50cmFjaztcbiAgICAgIGVsc2UgaWYgKGtpbmQgPT09ICd2aWRlb2lucHV0Jykge1xuICAgICAgICB0YXJnZXRUcmFjayA9IHJvb20ubG9jYWxQYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKFRyYWNrLlNvdXJjZS5DYW1lcmEpPy50cmFjaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZURlZmF1bHQgPVxuICAgICAgICAoaWQgPT09ICdkZWZhdWx0JyAmJiAhdGFyZ2V0VHJhY2spIHx8XG4gICAgICAgIChpZCA9PT0gJ2RlZmF1bHQnICYmIHRhcmdldFRyYWNrPy5tZWRpYVN0cmVhbVRyYWNrLmxhYmVsLnN0YXJ0c1dpdGgoJ0RlZmF1bHQnKSk7XG4gICAgICBhY3RpdmVEZXZpY2VTdWJqZWN0Lm5leHQodXNlRGVmYXVsdCA/IGlkIDogYWN0dWFsRGV2aWNlSWQpO1xuICAgIH0gZWxzZSBpZiAobG9jYWxUcmFjaykge1xuICAgICAgYXdhaXQgbG9jYWxUcmFjay5zZXREZXZpY2VJZChvcHRpb25zLmV4YWN0ID8geyBleGFjdDogaWQgfSA6IGlkKTtcbiAgICAgIGNvbnN0IGFjdHVhbElkID0gYXdhaXQgbG9jYWxUcmFjay5nZXREZXZpY2VJZCgpO1xuICAgICAgYWN0aXZlRGV2aWNlU3ViamVjdC5uZXh0KFxuICAgICAgICBpZCA9PT0gJ2RlZmF1bHQnICYmIGxvY2FsVHJhY2subWVkaWFTdHJlYW1UcmFjay5sYWJlbC5zdGFydHNXaXRoKCdEZWZhdWx0JykgPyBpZCA6IGFjdHVhbElkLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGFjdGl2ZURldmljZVN1YmplY3QudmFsdWUgIT09IGlkKSB7XG4gICAgICBsb2cud2FybihcbiAgICAgICAgJ2RldmljZSBzd2l0Y2ggc2tpcHBlZCwgcGxlYXNlIHByb3ZpZGUgZWl0aGVyIGEgcm9vbSBvciBhIGxvY2FsIHRyYWNrIHRvIHN3aXRjaCBvbi4gJyxcbiAgICAgICk7XG4gICAgICBhY3RpdmVEZXZpY2VTdWJqZWN0Lm5leHQoaWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY2xhc3NOYW1lOiBzdHJpbmcgPSBwcmVmaXhDbGFzcygnbWVkaWEtZGV2aWNlLXNlbGVjdCcpO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZSxcbiAgICBhY3RpdmVEZXZpY2VPYnNlcnZhYmxlLFxuICAgIHNldEFjdGl2ZU1lZGlhRGV2aWNlLFxuICB9O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBSb29tIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRGlzY29ubmVjdEJ1dHRvbihyb29tOiBSb29tKSB7XG4gIGNvbnN0IGRpc2Nvbm5lY3QgPSAoc3RvcFRyYWNrcz86IGJvb2xlYW4pID0+IHtcbiAgICByb29tLmRpc2Nvbm5lY3Qoc3RvcFRyYWNrcyk7XG4gIH07XG4gIGNvbnN0IGNsYXNzTmFtZTogc3RyaW5nID0gcHJlZml4Q2xhc3MoJ2Rpc2Nvbm5lY3QtYnV0dG9uJyk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgZGlzY29ubmVjdCB9O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IGNyZWF0ZUNvbm5lY3Rpb25RdWFsaXR5T2JzZXJ2ZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlcy9wYXJ0aWNpcGFudCc7XG5pbXBvcnQgeyBwcmVmaXhDbGFzcyB9IGZyb20gJy4uL3N0eWxlcy1pbnRlcmZhY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBDb25uZWN0aW9uUXVhbGl0eUluZGljYXRvcihwYXJ0aWNpcGFudDogUGFydGljaXBhbnQpIHtcbiAgY29uc3QgY2xhc3NOYW1lID0gcHJlZml4Q2xhc3MoJ2Nvbm5lY3Rpb24tcXVhbGl0eScpO1xuICBjb25zdCBjb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyID0gY3JlYXRlQ29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcihwYXJ0aWNpcGFudCk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlciB9O1xufVxuIiwiLy8gQHRzLWlnbm9yZSBzb21lIG1vZHVsZSByZXNvbHV0aW9ucyAob3RoZXIgdGhhbiAnbm9kZScpIGNob2tlIG9uIHRoaXNcbmltcG9ydCB0eXBlIHsgU3R5bGVzIH0gZnJvbSAnQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMvZGlzdC90eXBlc191bnByZWZpeGVkL2luZGV4LnNjc3MnO1xuaW1wb3J0IHsgVHJhY2sgfSBmcm9tICdsaXZla2l0LWNsaWVudCc7XG5pbXBvcnQgeyBtdXRlZE9ic2VydmVyIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQnO1xuaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcbmltcG9ydCB0eXBlIHsgVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyIH0gZnJvbSAnLi4vdHJhY2stcmVmZXJlbmNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwVHJhY2tNdXRlZEluZGljYXRvcih0cmFja1JlZjogVHJhY2tSZWZlcmVuY2VPclBsYWNlaG9sZGVyKSB7XG4gIGxldCBjbGFzc0ZvclNvdXJjZToga2V5b2YgU3R5bGVzID0gJ3RyYWNrLW11dGVkLWluZGljYXRvci1jYW1lcmEnO1xuICBzd2l0Y2ggKHRyYWNrUmVmLnNvdXJjZSkge1xuICAgIGNhc2UgVHJhY2suU291cmNlLkNhbWVyYTpcbiAgICAgIGNsYXNzRm9yU291cmNlID0gJ3RyYWNrLW11dGVkLWluZGljYXRvci1jYW1lcmEnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBUcmFjay5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgIGNsYXNzRm9yU291cmNlID0gJ3RyYWNrLW11dGVkLWluZGljYXRvci1taWNyb3Bob25lJztcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG4gIGNvbnN0IGNsYXNzTmFtZTogc3RyaW5nID0gcHJlZml4Q2xhc3MoY2xhc3NGb3JTb3VyY2UpO1xuICBjb25zdCBtZWRpYU11dGVkT2JzZXJ2ZXIgPSBtdXRlZE9ic2VydmVyKHRyYWNrUmVmKTtcblxuICByZXR1cm4geyBjbGFzc05hbWUsIG1lZGlhTXV0ZWRPYnNlcnZlciB9O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IHBhcnRpY2lwYW50SW5mb09ic2VydmVyIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZXMvcGFydGljaXBhbnQnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQYXJ0aWNpcGFudE5hbWUocGFydGljaXBhbnQ6IFBhcnRpY2lwYW50KSB7XG4gIGNvbnN0IGluZm9PYnNlcnZlciA9IHBhcnRpY2lwYW50SW5mb09ic2VydmVyKHBhcnRpY2lwYW50KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiAnbGstcGFydGljaXBhbnQtbmFtZScsIGluZm9PYnNlcnZlciB9O1xufVxuIiwiaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUGFydGljaXBhbnRUaWxlKCkge1xuICBjb25zdCBjbGFzc05hbWU6IHN0cmluZyA9IHByZWZpeENsYXNzKCdwYXJ0aWNpcGFudC10aWxlJyk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lLFxuICB9O1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG5pbXBvcnQgdHlwZSB7IFBhcnRpY2lwYW50LCBSb29tLCBDaGF0TWVzc2FnZSB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IGNvbXBhcmVWZXJzaW9ucywgUm9vbUV2ZW50IH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0LCBzY2FuLCBtYXAsIHRha2VVbnRpbCwgbWVyZ2UgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIERhdGFUb3BpYyxcbiAgc2VuZE1lc3NhZ2UsXG4gIHNldHVwQ2hhdE1lc3NhZ2VIYW5kbGVyLFxuICBzZXR1cERhdGFNZXNzYWdlSGFuZGxlcixcbn0gZnJvbSAnLi4vb2JzZXJ2YWJsZXMvZGF0YUNoYW5uZWwnO1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgeyBDaGF0TWVzc2FnZSB9O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWNlaXZlZENoYXRNZXNzYWdlIGV4dGVuZHMgQ2hhdE1lc3NhZ2Uge1xuICBmcm9tPzogUGFydGljaXBhbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWN5Q2hhdE1lc3NhZ2UgZXh0ZW5kcyBDaGF0TWVzc2FnZSB7XG4gIGlnbm9yZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWN5UmVjZWl2ZWRDaGF0TWVzc2FnZSBleHRlbmRzIFJlY2VpdmVkQ2hhdE1lc3NhZ2Uge1xuICBpZ25vcmU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqIEBkZXByZWNhdGVkIHRoZSBuZXcgY2hhdCBBUEkgZG9lc24ndCByZWx5IG9uIGVuY29kZXJzIGFuZCBkZWNvZGVycyBhbnltb3JlIGFuZCB1c2VzIGEgZGVkaWNhdGVkIGNoYXQgQVBJIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgTWVzc2FnZUVuY29kZXIgPSAobWVzc2FnZTogTGVnYWN5Q2hhdE1lc3NhZ2UpID0+IFVpbnQ4QXJyYXk7XG4vKipcbiAqIEBwdWJsaWNcbiAqIEBkZXByZWNhdGVkIHRoZSBuZXcgY2hhdCBBUEkgZG9lc24ndCByZWx5IG9uIGVuY29kZXJzIGFuZCBkZWNvZGVycyBhbnltb3JlIGFuZCB1c2VzIGEgZGVkaWNhdGVkIGNoYXQgQVBJIGluc3RlYWRcbiAqL1xuZXhwb3J0IHR5cGUgTWVzc2FnZURlY29kZXIgPSAobWVzc2FnZTogVWludDhBcnJheSkgPT4gTGVnYWN5UmVjZWl2ZWRDaGF0TWVzc2FnZTtcbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBDaGF0T3B0aW9ucyA9IHtcbiAgLyoqIEBkZXByZWNhdGVkIHRoZSBuZXcgY2hhdCBBUEkgZG9lc24ndCByZWx5IG9uIGVuY29kZXJzIGFuZCBkZWNvZGVycyBhbnltb3JlIGFuZCB1c2VzIGEgZGVkaWNhdGVkIGNoYXQgQVBJIGluc3RlYWQgKi9cbiAgbWVzc2FnZUVuY29kZXI/OiAobWVzc2FnZTogTGVnYWN5Q2hhdE1lc3NhZ2UpID0+IFVpbnQ4QXJyYXk7XG4gIC8qKiBAZGVwcmVjYXRlZCB0aGUgbmV3IGNoYXQgQVBJIGRvZXNuJ3QgcmVseSBvbiBlbmNvZGVycyBhbmQgZGVjb2RlcnMgYW55bW9yZSBhbmQgdXNlcyBhIGRlZGljYXRlZCBjaGF0IEFQSSBpbnN0ZWFkICovXG4gIG1lc3NhZ2VEZWNvZGVyPzogKG1lc3NhZ2U6IFVpbnQ4QXJyYXkpID0+IExlZ2FjeVJlY2VpdmVkQ2hhdE1lc3NhZ2U7XG4gIC8qKiBAZGVwcmVjYXRlZCB0aGUgbmV3IGNoYXQgQVBJIGRvZXNuJ3QgcmVseSBvbiB0b3BpY3MgYW55bW9yZSBhbmQgdXNlcyBhIGRlZGljYXRlZCBjaGF0IEFQSSBpbnN0ZWFkICovXG4gIGNoYW5uZWxUb3BpYz86IHN0cmluZztcbiAgLyoqIEBkZXByZWNhdGVkIHRoZSBuZXcgY2hhdCBBUEkgZG9lc24ndCByZWx5IG9uIHRvcGljcyBhbnltb3JlIGFuZCB1c2VzIGEgZGVkaWNhdGVkIGNoYXQgQVBJIGluc3RlYWQgKi9cbiAgdXBkYXRlQ2hhbm5lbFRvcGljPzogc3RyaW5nO1xufTtcblxudHlwZSBSYXdNZXNzYWdlID0ge1xuICBwYXlsb2FkOiBVaW50OEFycmF5O1xuICB0b3BpYzogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBmcm9tOiBQYXJ0aWNpcGFudCB8IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcblxuY29uc3QgdG9waWNTdWJqZWN0TWFwOiBNYXA8Um9vbSwgTWFwPHN0cmluZywgU3ViamVjdDxSYXdNZXNzYWdlPj4+ID0gbmV3IE1hcCgpO1xuXG5jb25zdCBlbmNvZGUgPSAobWVzc2FnZTogTGVnYWN5UmVjZWl2ZWRDaGF0TWVzc2FnZSkgPT4gZW5jb2Rlci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuXG5jb25zdCBkZWNvZGUgPSAobWVzc2FnZTogVWludDhBcnJheSkgPT5cbiAgSlNPTi5wYXJzZShkZWNvZGVyLmRlY29kZShtZXNzYWdlKSkgYXMgTGVnYWN5UmVjZWl2ZWRDaGF0TWVzc2FnZSB8IFJlY2VpdmVkQ2hhdE1lc3NhZ2U7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cENoYXQocm9vbTogUm9vbSwgb3B0aW9ucz86IENoYXRPcHRpb25zKSB7XG4gIGNvbnN0IG9uRGVzdHJveU9ic2VydmFibGUgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIGNvbnN0IHNlcnZlclN1cHBvcnRzQ2hhdEFwaSA9ICgpID0+XG4gICAgcm9vbS5zZXJ2ZXJJbmZvPy5lZGl0aW9uID09PSAxIHx8XG4gICAgKCEhcm9vbS5zZXJ2ZXJJbmZvPy52ZXJzaW9uICYmIGNvbXBhcmVWZXJzaW9ucyhyb29tLnNlcnZlckluZm8/LnZlcnNpb24sICcxLjE3LjInKSA+IDApO1xuXG4gIGNvbnN0IHsgbWVzc2FnZURlY29kZXIsIG1lc3NhZ2VFbmNvZGVyLCBjaGFubmVsVG9waWMsIHVwZGF0ZUNoYW5uZWxUb3BpYyB9ID0gb3B0aW9ucyA/PyB7fTtcblxuICBjb25zdCB0b3BpYyA9IGNoYW5uZWxUb3BpYyA/PyBEYXRhVG9waWMuQ0hBVDtcblxuICBjb25zdCB1cGRhdGVUb3BpYyA9IHVwZGF0ZUNoYW5uZWxUb3BpYyA/PyBEYXRhVG9waWMuQ0hBVF9VUERBVEU7XG5cbiAgbGV0IG5lZWRzU2V0dXAgPSBmYWxzZTtcbiAgaWYgKCF0b3BpY1N1YmplY3RNYXAuaGFzKHJvb20pKSB7XG4gICAgbmVlZHNTZXR1cCA9IHRydWU7XG4gIH1cbiAgY29uc3QgdG9waWNNYXAgPSB0b3BpY1N1YmplY3RNYXAuZ2V0KHJvb20pID8/IG5ldyBNYXA8c3RyaW5nLCBTdWJqZWN0PFJhd01lc3NhZ2U+PigpO1xuICBjb25zdCBtZXNzYWdlU3ViamVjdCA9IHRvcGljTWFwLmdldCh0b3BpYykgPz8gbmV3IFN1YmplY3Q8UmF3TWVzc2FnZT4oKTtcbiAgdG9waWNNYXAuc2V0KHRvcGljLCBtZXNzYWdlU3ViamVjdCk7XG4gIHRvcGljU3ViamVjdE1hcC5zZXQocm9vbSwgdG9waWNNYXApO1xuXG4gIGlmIChuZWVkc1NldHVwKSB7XG4gICAgLyoqIFN1YnNjcmliZSB0byBhbGwgYXBwcm9wcmlhdGUgbWVzc2FnZXMgc2VudCBvdmVyIHRoZSB3aXJlLiAqL1xuICAgIGNvbnN0IHsgbWVzc2FnZU9ic2VydmFibGUgfSA9IHNldHVwRGF0YU1lc3NhZ2VIYW5kbGVyKHJvb20sIFt0b3BpYywgdXBkYXRlVG9waWNdKTtcbiAgICBtZXNzYWdlT2JzZXJ2YWJsZS5waXBlKHRha2VVbnRpbChvbkRlc3Ryb3lPYnNlcnZhYmxlKSkuc3Vic2NyaWJlKG1lc3NhZ2VTdWJqZWN0KTtcbiAgfVxuICBjb25zdCB7IGNoYXRPYnNlcnZhYmxlLCBzZW5kOiBzZW5kQ2hhdE1lc3NhZ2UgfSA9IHNldHVwQ2hhdE1lc3NhZ2VIYW5kbGVyKHJvb20pO1xuXG4gIGNvbnN0IGZpbmFsTWVzc2FnZURlY29kZXIgPSBtZXNzYWdlRGVjb2RlciA/PyBkZWNvZGU7XG5cbiAgLyoqIEJ1aWxkIHVwIHRoZSBtZXNzYWdlIGFycmF5IG92ZXIgdGltZS4gKi9cbiAgY29uc3QgbWVzc2FnZXNPYnNlcnZhYmxlID0gbWVyZ2UoXG4gICAgbWVzc2FnZVN1YmplY3QucGlwZShcbiAgICAgIG1hcCgobXNnKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnNlZE1lc3NhZ2UgPSBmaW5hbE1lc3NhZ2VEZWNvZGVyKG1zZy5wYXlsb2FkKTtcbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IHsgLi4ucGFyc2VkTWVzc2FnZSwgZnJvbTogbXNnLmZyb20gfTtcbiAgICAgICAgaWYgKGlzSWdub3JhYmxlQ2hhdE1lc3NhZ2UobmV3TWVzc2FnZSkpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlO1xuICAgICAgfSksXG4gICAgKSxcbiAgICBjaGF0T2JzZXJ2YWJsZS5waXBlKFxuICAgICAgbWFwKChbbXNnLCBwYXJ0aWNpcGFudF0pID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBmcm9tOiBwYXJ0aWNpcGFudCB9O1xuICAgICAgfSksXG4gICAgKSxcbiAgKS5waXBlKFxuICAgIHNjYW48UmVjZWl2ZWRDaGF0TWVzc2FnZSB8IHVuZGVmaW5lZCwgUmVjZWl2ZWRDaGF0TWVzc2FnZVtdPigoYWNjLCB2YWx1ZSkgPT4ge1xuICAgICAgLy8gaWdub3JlIGxlZ2FjeSBtZXNzYWdlIHVwZGF0ZXNcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH1cbiAgICAgIC8vIGhhbmRsZSBtZXNzYWdlIHVwZGF0ZXNcbiAgICAgIGlmIChcbiAgICAgICAgJ2lkJyBpbiB2YWx1ZSAmJlxuICAgICAgICBhY2MuZmluZCgobXNnKSA9PiBtc2cuZnJvbT8uaWRlbnRpdHkgPT09IHZhbHVlLmZyb20/LmlkZW50aXR5ICYmIG1zZy5pZCA9PT0gdmFsdWUuaWQpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgcmVwbGFjZUluZGV4ID0gYWNjLmZpbmRJbmRleCgobXNnKSA9PiBtc2cuaWQgPT09IHZhbHVlLmlkKTtcbiAgICAgICAgaWYgKHJlcGxhY2VJbmRleCA+IC0xKSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxNc2cgPSBhY2NbcmVwbGFjZUluZGV4XTtcbiAgICAgICAgICBhY2NbcmVwbGFjZUluZGV4XSA9IHtcbiAgICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBvcmlnaW5hbE1zZy50aW1lc3RhbXAsXG4gICAgICAgICAgICBlZGl0VGltZXN0YW1wOiB2YWx1ZS5lZGl0VGltZXN0YW1wID8/IHZhbHVlLnRpbWVzdGFtcCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFsuLi5hY2NdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5hY2MsIHZhbHVlXTtcbiAgICB9LCBbXSksXG4gICAgdGFrZVVudGlsKG9uRGVzdHJveU9ic2VydmFibGUpLFxuICApO1xuXG4gIGNvbnN0IGlzU2VuZGluZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcblxuICBjb25zdCBmaW5hbE1lc3NhZ2VFbmNvZGVyID0gbWVzc2FnZUVuY29kZXIgPz8gZW5jb2RlO1xuXG4gIGNvbnN0IHNlbmQgPSBhc3luYyAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgaXNTZW5kaW5nJC5uZXh0KHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IHNlbmRDaGF0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIGNvbnN0IGVuY29kZWRMZWdhY3lNc2cgPSBmaW5hbE1lc3NhZ2VFbmNvZGVyKHtcbiAgICAgICAgLi4uY2hhdE1lc3NhZ2UsXG4gICAgICAgIGlnbm9yZTogc2VydmVyU3VwcG9ydHNDaGF0QXBpKCksXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHNlbmRNZXNzYWdlKHJvb20ubG9jYWxQYXJ0aWNpcGFudCwgZW5jb2RlZExlZ2FjeU1zZywge1xuICAgICAgICByZWxpYWJsZTogdHJ1ZSxcbiAgICAgICAgdG9waWMsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjaGF0TWVzc2FnZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTZW5kaW5nJC5uZXh0KGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlID0gYXN5bmMgKG1lc3NhZ2U6IHN0cmluZywgb3JpZ2luYWxNZXNzYWdlT3JJZDogc3RyaW5nIHwgQ2hhdE1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPVxuICAgICAgdHlwZW9mIG9yaWdpbmFsTWVzc2FnZU9ySWQgPT09ICdzdHJpbmcnXG4gICAgICAgID8geyBpZDogb3JpZ2luYWxNZXNzYWdlT3JJZCwgbWVzc2FnZTogJycsIHRpbWVzdGFtcCB9XG4gICAgICAgIDogb3JpZ2luYWxNZXNzYWdlT3JJZDtcbiAgICBpc1NlbmRpbmckLm5leHQodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVkaXRlZE1lc3NhZ2UgPSBhd2FpdCByb29tLmxvY2FsUGFydGljaXBhbnQuZWRpdENoYXRNZXNzYWdlKG1lc3NhZ2UsIG9yaWdpbmFsTWVzc2FnZSk7XG4gICAgICBjb25zdCBlbmNvZGVkTGVnYWN5TWVzc2FnZSA9IGZpbmFsTWVzc2FnZUVuY29kZXIoZWRpdGVkTWVzc2FnZSk7XG4gICAgICBhd2FpdCBzZW5kTWVzc2FnZShyb29tLmxvY2FsUGFydGljaXBhbnQsIGVuY29kZWRMZWdhY3lNZXNzYWdlLCB7XG4gICAgICAgIHRvcGljOiB1cGRhdGVUb3BpYyxcbiAgICAgICAgcmVsaWFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBlZGl0ZWRNZXNzYWdlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpc1NlbmRpbmckLm5leHQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIG9uRGVzdHJveU9ic2VydmFibGUubmV4dCgpO1xuICAgIG9uRGVzdHJveU9ic2VydmFibGUuY29tcGxldGUoKTtcbiAgICB0b3BpY1N1YmplY3RNYXAuZGVsZXRlKHJvb20pO1xuICB9XG4gIHJvb20ub25jZShSb29tRXZlbnQuRGlzY29ubmVjdGVkLCBkZXN0cm95KTtcblxuICByZXR1cm4ge1xuICAgIG1lc3NhZ2VPYnNlcnZhYmxlOiBtZXNzYWdlc09ic2VydmFibGUsXG4gICAgaXNTZW5kaW5nT2JzZXJ2YWJsZTogaXNTZW5kaW5nJCxcbiAgICBzZW5kLFxuICAgIHVwZGF0ZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNJZ25vcmFibGVDaGF0TWVzc2FnZShcbiAgbXNnOiBSZWNlaXZlZENoYXRNZXNzYWdlIHwgTGVnYWN5UmVjZWl2ZWRDaGF0TWVzc2FnZSxcbik6IG1zZyBpcyBSZWNlaXZlZENoYXRNZXNzYWdlIHtcbiAgcmV0dXJuIChtc2cgYXMgTGVnYWN5Q2hhdE1lc3NhZ2UpLmlnbm9yZSA9PSB0cnVlO1xufVxuIiwiaW1wb3J0IHR5cGUge1xuICBDaGF0TWVzc2FnZSxcbiAgRGF0YVB1Ymxpc2hPcHRpb25zLFxuICBMb2NhbFBhcnRpY2lwYW50LFxuICBQYXJ0aWNpcGFudCxcbiAgUm9vbSxcbn0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHR5cGUgeyBTdWJzY3JpYmVyIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBmaWx0ZXIsIG1hcCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgY3JlYXRlQ2hhdE9ic2VydmVyLCBjcmVhdGVEYXRhT2JzZXJ2ZXIgfSBmcm9tICcuL3Jvb20nO1xuXG5leHBvcnQgY29uc3QgRGF0YVRvcGljID0ge1xuICBDSEFUOiAnbGstY2hhdC10b3BpYycsXG4gIENIQVRfVVBEQVRFOiAnbGstY2hhdC11cGRhdGUtdG9waWMnLFxufSBhcyBjb25zdDtcblxuLyoqIFB1Ymxpc2ggZGF0YSBmcm9tIHRoZSBMb2NhbFBhcnRpY2lwYW50LiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKFxuICBsb2NhbFBhcnRpY2lwYW50OiBMb2NhbFBhcnRpY2lwYW50LFxuICBwYXlsb2FkOiBVaW50OEFycmF5LFxuICBvcHRpb25zOiBEYXRhUHVibGlzaE9wdGlvbnMgPSB7fSxcbikge1xuICBjb25zdCB7IHJlbGlhYmxlLCBkZXN0aW5hdGlvbklkZW50aXRpZXMsIHRvcGljIH0gPSBvcHRpb25zO1xuXG4gIGF3YWl0IGxvY2FsUGFydGljaXBhbnQucHVibGlzaERhdGEocGF5bG9hZCwge1xuICAgIGRlc3RpbmF0aW9uSWRlbnRpdGllcyxcbiAgICB0b3BpYyxcbiAgICByZWxpYWJsZSxcbiAgfSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZURhdGFNZXNzYWdlPFQgZXh0ZW5kcyBzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgdG9waWM/OiBUO1xuICBwYXlsb2FkOiBVaW50OEFycmF5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY2VpdmVkRGF0YU1lc3NhZ2U8VCBleHRlbmRzIHN0cmluZyB8IHVuZGVmaW5lZCA9IHN0cmluZz5cbiAgZXh0ZW5kcyBCYXNlRGF0YU1lc3NhZ2U8VD4ge1xuICBmcm9tPzogUGFydGljaXBhbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cERhdGFNZXNzYWdlSGFuZGxlcjxUIGV4dGVuZHMgc3RyaW5nPihcbiAgcm9vbTogUm9vbSxcbiAgdG9waWM/OiBUIHwgW1QsIC4uLlRbXV0sXG4gIG9uTWVzc2FnZT86IChtc2c6IFJlY2VpdmVkRGF0YU1lc3NhZ2U8VD4pID0+IHZvaWQsXG4pIHtcbiAgY29uc3QgdG9waWNzID0gQXJyYXkuaXNBcnJheSh0b3BpYykgPyB0b3BpYyA6IFt0b3BpY107XG4gIC8qKiBTZXR1cCBhIE9ic2VydmFibGUgdGhhdCByZXR1cm5zIGFsbCBkYXRhIG1lc3NhZ2VzIGJlbG9uZ2luZyB0byBhIHRvcGljLiAqL1xuICBjb25zdCBtZXNzYWdlT2JzZXJ2YWJsZSA9IGNyZWF0ZURhdGFPYnNlcnZlcihyb29tKS5waXBlKFxuICAgIGZpbHRlcihcbiAgICAgIChbLCAsICwgbWVzc2FnZVRvcGljXSkgPT5cbiAgICAgICAgdG9waWMgPT09IHVuZGVmaW5lZCB8fCAobWVzc2FnZVRvcGljICE9PSB1bmRlZmluZWQgJiYgdG9waWNzLmluY2x1ZGVzKG1lc3NhZ2VUb3BpYyBhcyBUKSksXG4gICAgKSxcbiAgICBtYXAoKFtwYXlsb2FkLCBwYXJ0aWNpcGFudCwgLCBtZXNzYWdlVG9waWNdKSA9PiB7XG4gICAgICBjb25zdCBtc2cgPSB7XG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIHRvcGljOiBtZXNzYWdlVG9waWMgYXMgVCxcbiAgICAgICAgZnJvbTogcGFydGljaXBhbnQsXG4gICAgICB9IHNhdGlzZmllcyBSZWNlaXZlZERhdGFNZXNzYWdlPFQ+O1xuICAgICAgb25NZXNzYWdlPy4obXNnKTtcbiAgICAgIHJldHVybiBtc2c7XG4gICAgfSksXG4gICk7XG5cbiAgbGV0IGlzU2VuZGluZ1N1YnNjcmliZXI6IFN1YnNjcmliZXI8Ym9vbGVhbj47XG4gIGNvbnN0IGlzU2VuZGluZ09ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigoc3Vic2NyaWJlcikgPT4ge1xuICAgIGlzU2VuZGluZ1N1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICB9KTtcblxuICBjb25zdCBzZW5kID0gYXN5bmMgKHBheWxvYWQ6IFVpbnQ4QXJyYXksIG9wdGlvbnM6IERhdGFQdWJsaXNoT3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgaXNTZW5kaW5nU3Vic2NyaWJlci5uZXh0KHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZW5kTWVzc2FnZShyb29tLmxvY2FsUGFydGljaXBhbnQsIHBheWxvYWQsIHsgdG9waWM6IHRvcGljc1swXSwgLi4ub3B0aW9ucyB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTZW5kaW5nU3Vic2NyaWJlci5uZXh0KGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHsgbWVzc2FnZU9ic2VydmFibGUsIGlzU2VuZGluZ09ic2VydmFibGUsIHNlbmQgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQ2hhdE1lc3NhZ2VIYW5kbGVyKHJvb206IFJvb20pIHtcbiAgY29uc3QgY2hhdE9ic2VydmFibGUgPSBjcmVhdGVDaGF0T2JzZXJ2ZXIocm9vbSk7XG5cbiAgY29uc3Qgc2VuZCA9IGFzeW5jICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBtc2cgPSBhd2FpdCByb29tLmxvY2FsUGFydGljaXBhbnQuc2VuZENoYXRNZXNzYWdlKHRleHQpO1xuICAgIHJldHVybiBtc2c7XG4gIH07XG5cbiAgY29uc3QgZWRpdCA9IGFzeW5jICh0ZXh0OiBzdHJpbmcsIG9yaWdpbmFsTXNnOiBDaGF0TWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IG1zZyA9IGF3YWl0IHJvb20ubG9jYWxQYXJ0aWNpcGFudC5lZGl0Q2hhdE1lc3NhZ2UodGV4dCwgb3JpZ2luYWxNc2cpO1xuICAgIHJldHVybiBtc2c7XG4gIH07XG5cbiAgcmV0dXJuIHsgY2hhdE9ic2VydmFibGUsIHNlbmQsIGVkaXQgfTtcbn1cbiIsImltcG9ydCB0eXBlIHsgUm9vbSB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyByb29tQXVkaW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZXMvcm9vbSc7XG5pbXBvcnQgeyBwcmVmaXhDbGFzcyB9IGZyb20gJy4uL3N0eWxlcy1pbnRlcmZhY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTdGFydEF1ZGlvKCkge1xuICBjb25zdCBoYW5kbGVTdGFydEF1ZGlvUGxheWJhY2sgPSBhc3luYyAocm9vbTogUm9vbSkgPT4ge1xuICAgIGxvZy5pbmZvKCdTdGFydCBBdWRpbyBmb3Igcm9vbTogJywgcm9vbSk7XG4gICAgYXdhaXQgcm9vbS5zdGFydEF1ZGlvKCk7XG4gIH07XG4gIGNvbnN0IGNsYXNzTmFtZTogc3RyaW5nID0gcHJlZml4Q2xhc3MoJ3N0YXJ0LWF1ZGlvLWJ1dHRvbicpO1xuICByZXR1cm4geyBjbGFzc05hbWUsIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUsIGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjayB9O1xufVxuIiwiaW1wb3J0IHR5cGUgeyBSb29tIH0gZnJvbSAnbGl2ZWtpdC1jbGllbnQnO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGUgfSBmcm9tICcuLi9vYnNlcnZhYmxlcy9yb29tJztcbmltcG9ydCB7IHByZWZpeENsYXNzIH0gZnJvbSAnLi4vc3R5bGVzLWludGVyZmFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFN0YXJ0VmlkZW8oKSB7XG4gIGNvbnN0IGhhbmRsZVN0YXJ0VmlkZW9QbGF5YmFjayA9IGFzeW5jIChyb29tOiBSb29tKSA9PiB7XG4gICAgbG9nLmluZm8oJ1N0YXJ0IFZpZGVvIGZvciByb29tOiAnLCByb29tKTtcbiAgICBhd2FpdCByb29tLnN0YXJ0VmlkZW8oKTtcbiAgfTtcbiAgY29uc3QgY2xhc3NOYW1lOiBzdHJpbmcgPSBwcmVmaXhDbGFzcygnc3RhcnQtYXVkaW8tYnV0dG9uJyk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSwgcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZSwgaGFuZGxlU3RhcnRWaWRlb1BsYXliYWNrIH07XG59XG4iLCJpbXBvcnQgeyBwcmVmaXhDbGFzcyB9IGZyb20gJy4uL3N0eWxlcy1pbnRlcmZhY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBDaGF0VG9nZ2xlKCkge1xuICBjb25zdCBjbGFzc05hbWU6IHN0cmluZyA9IFtwcmVmaXhDbGFzcygnYnV0dG9uJyksIHByZWZpeENsYXNzKCdjaGF0LXRvZ2dsZScpXS5qb2luKCcgJyk7XG4gIHJldHVybiB7IGNsYXNzTmFtZSB9O1xufVxuIiwiaW1wb3J0IHsgcHJlZml4Q2xhc3MgfSBmcm9tICcuLi9zdHlsZXMtaW50ZXJmYWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRm9jdXNUb2dnbGUoKSB7XG4gIGNvbnN0IGNsYXNzTmFtZTogc3RyaW5nID0gW3ByZWZpeENsYXNzKCdidXR0b24nKSwgcHJlZml4Q2xhc3MoJ2ZvY3VzLXRvZ2dsZS1idXR0b24nKV0uam9pbignICcpO1xuICByZXR1cm4geyBjbGFzc05hbWUgfTtcbn1cbiIsIi8vIGltcG9ydCB7IHByZWZpeENsYXNzIH0gZnJvbSAnLi4vc3R5bGVzLWludGVyZmFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cENsZWFyUGluQnV0dG9uKCkge1xuICAvLyBjb25zdCBjbGFzc05hbWUgPSBwcmVmaXhDbGFzcygnY2xlYXItcGluLWJ1dHRvbicpO1xuICBjb25zdCBjbGFzc05hbWUgPSAnbGstY2xlYXItcGluLWJ1dHRvbiBsay1idXR0b24nO1xuICByZXR1cm4geyBjbGFzc05hbWUgfTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBzZXR1cExpdmVLaXRSb29tKCkge1xuICBjb25zdCBjbGFzc05hbWUgPSAnbGstcm9vbS1jb250YWluZXInO1xuICByZXR1cm4geyBjbGFzc05hbWUgfTtcbn1cbiIsImltcG9ydCB0eXBlIHtcbiAgTG9jYWxUcmFja1B1YmxpY2F0aW9uLFxuICBQYXJ0aWNpcGFudCxcbiAgUmVtb3RlVHJhY2tQdWJsaWNhdGlvbixcbiAgUm9vbSxcbiAgVHJhY2ssXG4gIFRyYWNrUHVibGljYXRpb24sXG59IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IFJvb21FdmVudCwgVHJhY2tFdmVudCB9IGZyb20gJ2xpdmVraXQtY2xpZW50JztcbmltcG9ydCB7IG1hcCwgT2JzZXJ2YWJsZSwgc3RhcnRXaXRoIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBhbGxQYXJ0aWNpcGFudFJvb21FdmVudHMsIHBhcnRpY2lwYW50VHJhY2tFdmVudHMgfSBmcm9tICcuLi9oZWxwZXInO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB0eXBlIHsgVHJhY2tSZWZlcmVuY2UgfSBmcm9tICcuLi90cmFjay1yZWZlcmVuY2UnO1xuaW1wb3J0IHsgb2JzZXJ2ZVJvb21FdmVudHMgfSBmcm9tICcuL3Jvb20nO1xuaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudFRyYWNrSWRlbnRpZmllciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IG9ic2VydmVQYXJ0aWNpcGFudEV2ZW50cyB9IGZyb20gJy4vcGFydGljaXBhbnQnO1xuLy8gQHRzLWlnbm9yZSBzb21lIG1vZHVsZSByZXNvbHV0aW9ucyAob3RoZXIgdGhhbiAnbm9kZScpIGNob2tlIG9uIHRoaXNcbmltcG9ydCB0eXBlIHsgUHVibGljYXRpb25FdmVudENhbGxiYWNrcyB9IGZyb20gJ2xpdmVraXQtY2xpZW50L2Rpc3Qvc3JjL3Jvb20vdHJhY2svVHJhY2tQdWJsaWNhdGlvbic7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja09ic2VydmFibGUodHJhY2s6IFRyYWNrUHVibGljYXRpb24pIHtcbiAgY29uc3QgdHJhY2tPYnNlcnZlciA9IG9ic2VydmVUcmFja0V2ZW50cyhcbiAgICB0cmFjayxcbiAgICBUcmFja0V2ZW50Lk11dGVkLFxuICAgIFRyYWNrRXZlbnQuVW5tdXRlZCxcbiAgICBUcmFja0V2ZW50LlN1YnNjcmliZWQsXG4gICAgVHJhY2tFdmVudC5VbnN1YnNjcmliZWQsXG4gICk7XG5cbiAgcmV0dXJuIHRyYWNrT2JzZXJ2ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlVHJhY2tFdmVudHModHJhY2s6IFRyYWNrUHVibGljYXRpb24sIC4uLmV2ZW50czogVHJhY2tFdmVudFtdKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxUcmFja1B1YmxpY2F0aW9uPigoc3Vic2NyaWJlKSA9PiB7XG4gICAgY29uc3Qgb25UcmFja1VwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHN1YnNjcmliZS5uZXh0KHRyYWNrKTtcbiAgICB9O1xuXG4gICAgZXZlbnRzLmZvckVhY2goKGV2dCkgPT4ge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0eXBlIG9mIGBUcmFja0V2ZW50YCBhbmQgYFB1YmxpY2F0aW9uQ2FsbGJhY2tzYCBhcmUgY29uZ3J1ZW50XG4gICAgICB0cmFjay5vbihldnQsIG9uVHJhY2tVcGRhdGUpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBldmVudHMuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHlwZSBvZiBgVHJhY2tFdmVudGAgYW5kIGBQdWJsaWNhdGlvbkNhbGxiYWNrc2AgYXJlIGNvbmdydWVudFxuICAgICAgICB0cmFjay5vZmYoZXZ0LCBvblRyYWNrVXBkYXRlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9KS5waXBlKHN0YXJ0V2l0aCh0cmFjaykpO1xuXG4gIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBgVHJhY2tSZWZlcmVuY2VzYCBmb3IgYWxsIHRyYWNrcyB0aGF0IGFyZSBpbmNsdWRlZCBpbiB0aGUgc291cmNlcyBwcm9wZXJ0eS5cbiAqICAqL1xuZnVuY3Rpb24gZ2V0VHJhY2tSZWZlcmVuY2VzKFxuICByb29tOiBSb29tLFxuICBzb3VyY2VzOiBUcmFjay5Tb3VyY2VbXSxcbiAgb25seVN1YnNjcmliZWRUcmFja3MgPSB0cnVlLFxuKTogeyB0cmFja1JlZmVyZW5jZXM6IFRyYWNrUmVmZXJlbmNlW107IHBhcnRpY2lwYW50czogUGFydGljaXBhbnRbXSB9IHtcbiAgY29uc3QgbG9jYWxQYXJ0aWNpcGFudCA9IHJvb20ubG9jYWxQYXJ0aWNpcGFudDtcbiAgY29uc3QgYWxsUGFydGljaXBhbnRzID0gW2xvY2FsUGFydGljaXBhbnQsIC4uLkFycmF5LmZyb20ocm9vbS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpXTtcbiAgY29uc3QgdHJhY2tSZWZlcmVuY2VzOiBUcmFja1JlZmVyZW5jZVtdID0gW107XG5cbiAgYWxsUGFydGljaXBhbnRzLmZvckVhY2goKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgc291cmNlcy5mb3JFYWNoKChzb3VyY2UpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZVJlZmVyZW5jZXMgPSBBcnJheS5mcm9tPFJlbW90ZVRyYWNrUHVibGljYXRpb24gfCBMb2NhbFRyYWNrUHVibGljYXRpb24+KFxuICAgICAgICBwYXJ0aWNpcGFudC50cmFja1B1YmxpY2F0aW9ucy52YWx1ZXMoKSxcbiAgICAgIClcbiAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAodHJhY2spID0+XG4gICAgICAgICAgICB0cmFjay5zb3VyY2UgPT09IHNvdXJjZSAmJlxuICAgICAgICAgICAgLy8gZWl0aGVyIHJldHVybiBhbGwgb3Igb25seSB0aGUgb25lcyB0aGF0IGFyZSBzdWJzY3JpYmVkXG4gICAgICAgICAgICAoIW9ubHlTdWJzY3JpYmVkVHJhY2tzIHx8IHRyYWNrLnRyYWNrKSxcbiAgICAgICAgKVxuICAgICAgICAubWFwKCh0cmFjayk6IFRyYWNrUmVmZXJlbmNlID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LFxuICAgICAgICAgICAgcHVibGljYXRpb246IHRyYWNrLFxuICAgICAgICAgICAgc291cmNlOiB0cmFjay5zb3VyY2UsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHRyYWNrUmVmZXJlbmNlcy5wdXNoKC4uLnNvdXJjZVJlZmVyZW5jZXMpO1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4geyB0cmFja1JlZmVyZW5jZXMsIHBhcnRpY2lwYW50czogYWxsUGFydGljaXBhbnRzIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGBUcmFja1JlZmVyZW5jZXNgIGZvciBhbGwgdHJhY2tzIHRoYXQgYXJlIGluY2x1ZGVkIGluIHRoZSBzb3VyY2VzIHByb3BlcnR5LlxuICogICovXG5mdW5jdGlvbiBnZXRQYXJ0aWNpcGFudFRyYWNrUmVmcyhcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50LFxuICBpZGVudGlmaWVyOiBQYXJ0aWNpcGFudFRyYWNrSWRlbnRpZmllcixcbiAgb25seVN1YnNjcmliZWRUcmFja3MgPSBmYWxzZSxcbik6IFRyYWNrUmVmZXJlbmNlW10ge1xuICBjb25zdCB7IHNvdXJjZXMsIGtpbmQsIG5hbWUgfSA9IGlkZW50aWZpZXI7XG4gIGNvbnN0IHNvdXJjZVJlZmVyZW5jZXMgPSBBcnJheS5mcm9tKHBhcnRpY2lwYW50LnRyYWNrUHVibGljYXRpb25zLnZhbHVlcygpKVxuICAgIC5maWx0ZXIoXG4gICAgICAocHViKSA9PlxuICAgICAgICAoIXNvdXJjZXMgfHwgc291cmNlcy5pbmNsdWRlcyhwdWIuc291cmNlKSkgJiZcbiAgICAgICAgKCFraW5kIHx8IHB1Yi5raW5kID09PSBraW5kKSAmJlxuICAgICAgICAoIW5hbWUgfHwgcHViLnRyYWNrTmFtZSA9PT0gbmFtZSkgJiZcbiAgICAgICAgLy8gZWl0aGVyIHJldHVybiBhbGwgb3Igb25seSB0aGUgb25lcyB0aGF0IGFyZSBzdWJzY3JpYmVkXG4gICAgICAgICghb25seVN1YnNjcmliZWRUcmFja3MgfHwgcHViLnRyYWNrKSxcbiAgICApXG4gICAgLm1hcCgodHJhY2spOiBUcmFja1JlZmVyZW5jZSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsXG4gICAgICAgIHB1YmxpY2F0aW9uOiB0cmFjayxcbiAgICAgICAgc291cmNlOiB0cmFjay5zb3VyY2UsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gIHJldHVybiBzb3VyY2VSZWZlcmVuY2VzO1xufVxuXG50eXBlIFRyYWNrUmVmZXJlbmNlc09ic2VydmFibGVPcHRpb25zID0ge1xuICBhZGRpdGlvbmFsUm9vbUV2ZW50cz86IFJvb21FdmVudFtdO1xuICBvbmx5U3Vic2NyaWJlZD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tSZWZlcmVuY2VzT2JzZXJ2YWJsZShcbiAgcm9vbTogUm9vbSxcbiAgc291cmNlczogVHJhY2suU291cmNlW10sXG4gIG9wdGlvbnM6IFRyYWNrUmVmZXJlbmNlc09ic2VydmFibGVPcHRpb25zLFxuKTogT2JzZXJ2YWJsZTx7IHRyYWNrUmVmZXJlbmNlczogVHJhY2tSZWZlcmVuY2VbXTsgcGFydGljaXBhbnRzOiBQYXJ0aWNpcGFudFtdIH0+IHtcbiAgY29uc3QgYWRkaXRpb25hbFJvb21FdmVudHMgPSBvcHRpb25zLmFkZGl0aW9uYWxSb29tRXZlbnRzID8/IGFsbFBhcnRpY2lwYW50Um9vbUV2ZW50cztcbiAgY29uc3Qgb25seVN1YnNjcmliZWRUcmFja3M6IGJvb2xlYW4gPSBvcHRpb25zLm9ubHlTdWJzY3JpYmVkID8/IHRydWU7XG4gIGNvbnN0IHJvb21FdmVudHMgPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoW1xuICAgICAgUm9vbUV2ZW50LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgICAgUm9vbUV2ZW50LlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgUm9vbUV2ZW50LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsXG4gICAgICBSb29tRXZlbnQuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICAgIFJvb21FdmVudC5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQuVHJhY2tQdWJsaXNoZWQsXG4gICAgICBSb29tRXZlbnQuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICAgIFJvb21FdmVudC5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQsXG4gICAgICAuLi5hZGRpdGlvbmFsUm9vbUV2ZW50cyxcbiAgICBdKS52YWx1ZXMoKSxcbiAgKTtcblxuICBjb25zdCBvYnNlcnZhYmxlID0gb2JzZXJ2ZVJvb21FdmVudHMocm9vbSwgLi4ucm9vbUV2ZW50cykucGlwZShcbiAgICBtYXAoKHJvb20pID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBnZXRUcmFja1JlZmVyZW5jZXMocm9vbSwgc291cmNlcywgb25seVN1YnNjcmliZWRUcmFja3MpO1xuICAgICAgbG9nLmRlYnVnKGBUcmFja1JlZmVyZW5jZVtdIHdhcyB1cGRhdGVkLiAobGVuZ3RoICR7ZGF0YS50cmFja1JlZmVyZW5jZXMubGVuZ3RofSlgLCBkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLFxuICAgIHN0YXJ0V2l0aChnZXRUcmFja1JlZmVyZW5jZXMocm9vbSwgc291cmNlcywgb25seVN1YnNjcmliZWRUcmFja3MpKSxcbiAgKTtcblxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpY2lwYW50VHJhY2tzT2JzZXJ2YWJsZShcbiAgcGFydGljaXBhbnQ6IFBhcnRpY2lwYW50LFxuICB0cmFja0lkZW50aWZpZXI6IFBhcnRpY2lwYW50VHJhY2tJZGVudGlmaWVyLFxuKTogT2JzZXJ2YWJsZTxUcmFja1JlZmVyZW5jZVtdPiB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBvYnNlcnZlUGFydGljaXBhbnRFdmVudHMocGFydGljaXBhbnQsIC4uLnBhcnRpY2lwYW50VHJhY2tFdmVudHMpLnBpcGUoXG4gICAgbWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGdldFBhcnRpY2lwYW50VHJhY2tSZWZzKHBhcnRpY2lwYW50LCB0cmFja0lkZW50aWZpZXIpO1xuICAgICAgbG9nLmRlYnVnKGBUcmFja1JlZmVyZW5jZVtdIHdhcyB1cGRhdGVkLiAobGVuZ3RoICR7ZGF0YS5sZW5ndGh9KWAsIGRhdGEpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSksXG4gICAgc3RhcnRXaXRoKGdldFBhcnRpY2lwYW50VHJhY2tSZWZzKHBhcnRpY2lwYW50LCB0cmFja0lkZW50aWZpZXIpKSxcbiAgKTtcblxuICByZXR1cm4gb2JzZXJ2YWJsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYWNrRXZlbnRTZWxlY3RvcjxUIGV4dGVuZHMgVHJhY2tFdmVudD4oXG4gIHB1YmxpY2F0aW9uOiBUcmFja1B1YmxpY2F0aW9uIHwgVHJhY2ssXG4gIGV2ZW50OiBULFxuKSB7XG4gIGNvbnN0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxcbiAgICBQYXJhbWV0ZXJzPFB1YmxpY2F0aW9uRXZlbnRDYWxsYmFja3NbRXh0cmFjdDxULCBrZXlvZiBQdWJsaWNhdGlvbkV2ZW50Q2FsbGJhY2tzPl0+XG4gID4oKHN1YnNjcmliZSkgPT4ge1xuICAgIGNvbnN0IHVwZGF0ZSA9IChcbiAgICAgIC4uLnBhcmFtczogUGFyYW1ldGVyczxQdWJsaWNhdGlvbkV2ZW50Q2FsbGJhY2tzW0V4dHJhY3Q8VCwga2V5b2YgUHVibGljYXRpb25FdmVudENhbGxiYWNrcz5dPlxuICAgICkgPT4ge1xuICAgICAgc3Vic2NyaWJlLm5leHQocGFyYW1zKTtcbiAgICB9O1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igbm90IGEgcGVyZmVjdCBvdmVybGFwIGJldHdlZW4gVHJhY2tFdmVudCBhbmQga2V5b2YgVHJhY2tFdmVudENhbGxiYWNrc1xuICAgIHB1YmxpY2F0aW9uLm9uKGV2ZW50LCB1cGRhdGUpO1xuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIG5vdCBhIHBlcmZlY3Qgb3ZlcmxhcCBiZXR3ZWVuIFRyYWNrRXZlbnQgYW5kIGtleW9mIFRyYWNrRXZlbnRDYWxsYmFja3NcbiAgICAgIHB1YmxpY2F0aW9uLm9mZihldmVudCwgdXBkYXRlKTtcbiAgICB9O1xuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSk7XG5cbiAgcmV0dXJuIG9ic2VydmFibGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja1RyYW5zY3JpcHRpb25PYnNlcnZlcihwdWJsaWNhdGlvbjogVHJhY2tQdWJsaWNhdGlvbikge1xuICByZXR1cm4gdHJhY2tFdmVudFNlbGVjdG9yKHB1YmxpY2F0aW9uLCBUcmFja0V2ZW50LlRyYW5zY3JpcHRpb25SZWNlaXZlZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja1N5bmNUaW1lT2JzZXJ2ZXIodHJhY2s6IFRyYWNrKSB7XG4gIHJldHVybiB0cmFja0V2ZW50U2VsZWN0b3IodHJhY2ssIFRyYWNrRXZlbnQuVGltZVN5bmNVcGRhdGUpLnBpcGUoXG4gICAgbWFwKChbdGltZVVwZGF0ZV0pID0+IHRpbWVVcGRhdGUpLFxuICApO1xufVxuIiwiaW1wb3J0IHR5cGUgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjb25jYXQsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBmcm9tRXZlbnQsIG1hcCwgb2YsIHNraXBVbnRpbCwgdGltZW91dCB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdXNlciBpcyBpbnRlcmFjdGluZyB3aXRoIHRoZSBIVE1MIGVsZW1lbnQsXG4gKiBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSBpcyBubyBpbnRlcmFjdGlvbiBmb3IgYSBzcGVjaWZpZWQgcGVyaW9kIG9mIHRpbWUuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbnRlcmFjdGluZ09ic2VydmFibGUoaHRtbEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgaW5hY3RpdmVBZnRlciA9IDEwMDApIHtcbiAgaWYgKGh0bWxFbGVtZW50ID09PSBudWxsKSByZXR1cm4gb2YoZmFsc2UpO1xuICBjb25zdCBtb3ZlJCA9IGZyb21FdmVudChodG1sRWxlbWVudCwgJ21vdXNlbW92ZScsIHsgcGFzc2l2ZTogdHJ1ZSB9KS5waXBlKG1hcCgoKSA9PiB0cnVlKSk7XG4gIGNvbnN0IG1vdmVBbmRTdG9wJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9IG1vdmUkLnBpcGUoXG4gICAgdGltZW91dCh7XG4gICAgICBlYWNoOiBpbmFjdGl2ZUFmdGVyLFxuICAgICAgd2l0aDogKCkgPT4gY29uY2F0KG9mKGZhbHNlKSwgbW92ZUFuZFN0b3AkLnBpcGUoc2tpcFVudGlsKG1vdmUkKSkpLFxuICAgIH0pLFxuICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICk7XG4gIHJldHVybiBtb3ZlQW5kU3RvcCQ7XG59XG4iLCJpbXBvcnQgeyBsb2cgfSBmcm9tICcuLi9sb2dnZXInO1xuXG50eXBlIEpzb25QcmltaXRpdmUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbDtcbnR5cGUgSnNvbkFycmF5ID0gSnNvblZhbHVlW107XG50eXBlIEpzb25PYmplY3QgPSB7IFtrZXk6IHN0cmluZ106IEpzb25WYWx1ZSB9O1xudHlwZSBKc29uVmFsdWUgPSBKc29uUHJpbWl0aXZlIHwgSnNvbkFycmF5IHwgSnNvbk9iamVjdDtcblxuLyoqXG4gKiBQZXJzaXN0cyBhIHNlcmlhbGl6YWJsZSBvYmplY3QgdG8gbG9jYWwgc3RvcmFnZSBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlPFQgZXh0ZW5kcyBKc29uVmFsdWU+KGtleTogc3RyaW5nLCB2YWx1ZTogVCk6IHZvaWQge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2cuZXJyb3IoJ0xvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS4nKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY29uc3Qgbm9uRW1wdHlTZXR0aW5ncyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZpbHRlcigoWywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gJycpLFxuICAgICAgKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobm9uRW1wdHlTZXR0aW5ncykpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2cuZXJyb3IoYEVycm9yIHNldHRpbmcgaXRlbSB0byBsb2NhbCBzdG9yYWdlOiAke2Vycm9yfWApO1xuICB9XG59XG5cbi8qKlxuICogUmV0cmlldmVzIGEgc2VyaWFsaXphYmxlIG9iamVjdCBmcm9tIGxvY2FsIHN0b3JhZ2UgYnkgaXRzIGtleS5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBsb2FkRnJvbUxvY2FsU3RvcmFnZTxUIGV4dGVuZHMgSnNvblZhbHVlPihrZXk6IHN0cmluZyk6IFQgfCB1bmRlZmluZWQge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2cuZXJyb3IoJ0xvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS4nKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIGxvZy53YXJuKGBJdGVtIHdpdGgga2V5ICR7a2V5fSBkb2VzIG5vdCBleGlzdCBpbiBsb2NhbCBzdG9yYWdlLmApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoaXRlbSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nLmVycm9yKGBFcnJvciBnZXR0aW5nIGl0ZW0gZnJvbSBsb2NhbCBzdG9yYWdlOiAke2Vycm9yfWApO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHBhaXIgb2YgZnVuY3Rpb25zIHRvIGxvYWQgYW5kIHNhdmUgYSB2YWx1ZSBvZiB0eXBlIFQgdG8gbG9jYWwgc3RvcmFnZS5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYWxTdG9yYWdlSW50ZXJmYWNlPFQgZXh0ZW5kcyBKc29uVmFsdWU+KFxuICBrZXk6IHN0cmluZyxcbik6IHsgbG9hZDogKCkgPT4gVCB8IHVuZGVmaW5lZDsgc2F2ZTogKHZhbHVlOiBUKSA9PiB2b2lkIH0ge1xuICByZXR1cm4ge1xuICAgIGxvYWQ6ICgpID0+IGxvYWRGcm9tTG9jYWxTdG9yYWdlPFQ+KGtleSksXG4gICAgc2F2ZTogKHZhbHVlOiBUKSA9PiBzYXZlVG9Mb2NhbFN0b3JhZ2U8VD4oa2V5LCB2YWx1ZSksXG4gIH07XG59XG4iLCJpbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYWxTdG9yYWdlSW50ZXJmYWNlIH0gZnJvbSAnLi9sb2NhbC1zdG9yYWdlLWhlbHBlcnMnO1xuXG5jb25zdCBVU0VSX0NIT0lDRVNfS0VZID0gYCR7Y3NzUHJlZml4fS11c2VyLWNob2ljZXNgIGFzIGNvbnN0O1xuXG4vKipcbiAqIEBwdWJsaWNcbiAqIFJlcHJlc2VudHMgdGhlIHVzZXIncyBjaG9pY2VzIGZvciB2aWRlbyBhbmQgYXVkaW8gaW5wdXQgZGV2aWNlcyxcbiAqIGFzIHdlbGwgYXMgdGhlaXIgdXNlcm5hbWUuXG4gKi9cbmV4cG9ydCB0eXBlIExvY2FsVXNlckNob2ljZXMgPSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHZpZGVvIGlucHV0IGlzIGVuYWJsZWQuXG4gICAqIEBkZWZhdWx0VmFsdWUgYHRydWVgXG4gICAqL1xuICB2aWRlb0VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIGF1ZGlvIGlucHV0IGlzIGVuYWJsZWQuXG4gICAqIEBkZWZhdWx0VmFsdWUgYHRydWVgXG4gICAqL1xuICBhdWRpb0VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgZGV2aWNlIElEIG9mIHRoZSB2aWRlbyBpbnB1dCBkZXZpY2UgdG8gdXNlLlxuICAgKiBAZGVmYXVsdFZhbHVlIGAnJ2BcbiAgICovXG4gIHZpZGVvRGV2aWNlSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBkZXZpY2UgSUQgb2YgdGhlIGF1ZGlvIGlucHV0IGRldmljZSB0byB1c2UuXG4gICAqIEBkZWZhdWx0VmFsdWUgYCcnYFxuICAgKi9cbiAgYXVkaW9EZXZpY2VJZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHVzZXJuYW1lIHRvIHVzZS5cbiAgICogQGRlZmF1bHRWYWx1ZSBgJydgXG4gICAqL1xuICB1c2VybmFtZTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRVc2VyQ2hvaWNlczogTG9jYWxVc2VyQ2hvaWNlcyA9IHtcbiAgdmlkZW9FbmFibGVkOiB0cnVlLFxuICBhdWRpb0VuYWJsZWQ6IHRydWUsXG4gIHZpZGVvRGV2aWNlSWQ6ICcnLFxuICBhdWRpb0RldmljZUlkOiAnJyxcbiAgdXNlcm5hbWU6ICcnLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgb2JqZWN0IHN0b3JlZCBpbiBsb2NhbCBzdG9yYWdlLlxuICogQHJlbWFya3NcbiAqIFRPRE86IFJlcGxhY2UgdGhpcyB0eXBlIHdpdGggYExvY2FsVXNlckNob2ljZXNgIGFmdGVyIHJlbW92aW5nIHRoZSBkZXByZWNhdGVkIHByb3BlcnRpZXMgZnJvbSBgTG9jYWxVc2VyQ2hvaWNlc2AuXG4gKiBAaW50ZXJuYWxcbiAqL1xudHlwZSBUZW1wU3RvcmFnZVR5cGUgPSBPbWl0PExvY2FsVXNlckNob2ljZXMsICdlMmVlJyB8ICdzaGFyZWRQYXNzcGhyYXNlJz47XG5jb25zdCB7IGxvYWQsIHNhdmUgfSA9IGNyZWF0ZUxvY2FsU3RvcmFnZUludGVyZmFjZTxUZW1wU3RvcmFnZVR5cGU+KFVTRVJfQ0hPSUNFU19LRVkpO1xuXG4vKipcbiAqIFNhdmVzIHVzZXIgY2hvaWNlcyB0byBsb2NhbCBzdG9yYWdlLlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYXZlVXNlckNob2ljZXMoXG4gIHVzZXJDaG9pY2VzOiBMb2NhbFVzZXJDaG9pY2VzLFxuICAvKipcbiAgICogV2hldGhlciB0byBwcmV2ZW50IHNhdmluZyB1c2VyIGNob2ljZXMgdG8gbG9jYWwgc3RvcmFnZS5cbiAgICovXG4gIHByZXZlbnRTYXZlOiBib29sZWFuID0gZmFsc2UsXG4pOiB2b2lkIHtcbiAgaWYgKHByZXZlbnRTYXZlID09PSB0cnVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNhdmUodXNlckNob2ljZXMpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSB1c2VyIGNob2ljZXMgZnJvbSBsb2NhbCBzdG9yYWdlLCBvciByZXR1cm5zIHRoZSBkZWZhdWx0IHNldHRpbmdzIGlmIG5vbmUgYXJlIGZvdW5kLlxuICogQHJlbWFya3NcbiAqIFRoZSBkZXByZWNhdGVkIHBhcmFtZXRlcnMgYGUyZWVgIGFuZCBgc2hhcmVkUGFzc3BocmFzZWAgYXJlIG5vdCByZWFkIGZyb20gbG9jYWwgc3RvcmFnZVxuICogYW5kIGFsd2F5cyByZXR1cm4gdGhlIHZhbHVlIGZyb20gdGhlIHBhc3NlZCBgZGVmYXVsdHNgIG9yIGludGVybmFsIGRlZmF1bHRzLlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkVXNlckNob2ljZXMoXG4gIGRlZmF1bHRzPzogUGFydGlhbDxMb2NhbFVzZXJDaG9pY2VzPixcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJldmVudCBsb2FkaW5nIGZyb20gbG9jYWwgc3RvcmFnZSBhbmQgcmV0dXJuIGRlZmF1bHQgdmFsdWVzIGluc3RlYWQuXG4gICAqIEBkZWZhdWx0VmFsdWUgZmFsc2VcbiAgICovXG4gIHByZXZlbnRMb2FkOiBib29sZWFuID0gZmFsc2UsXG4pOiBMb2NhbFVzZXJDaG9pY2VzIHtcbiAgY29uc3QgZmFsbGJhY2s6IExvY2FsVXNlckNob2ljZXMgPSB7XG4gICAgdmlkZW9FbmFibGVkOiBkZWZhdWx0cz8udmlkZW9FbmFibGVkID8/IGRlZmF1bHRVc2VyQ2hvaWNlcy52aWRlb0VuYWJsZWQsXG4gICAgYXVkaW9FbmFibGVkOiBkZWZhdWx0cz8uYXVkaW9FbmFibGVkID8/IGRlZmF1bHRVc2VyQ2hvaWNlcy5hdWRpb0VuYWJsZWQsXG4gICAgdmlkZW9EZXZpY2VJZDogZGVmYXVsdHM/LnZpZGVvRGV2aWNlSWQgPz8gZGVmYXVsdFVzZXJDaG9pY2VzLnZpZGVvRGV2aWNlSWQsXG4gICAgYXVkaW9EZXZpY2VJZDogZGVmYXVsdHM/LmF1ZGlvRGV2aWNlSWQgPz8gZGVmYXVsdFVzZXJDaG9pY2VzLmF1ZGlvRGV2aWNlSWQsXG4gICAgdXNlcm5hbWU6IGRlZmF1bHRzPy51c2VybmFtZSA/PyBkZWZhdWx0VXNlckNob2ljZXMudXNlcm5hbWUsXG4gIH07XG5cbiAgaWYgKHByZXZlbnRMb2FkKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG1heWJlTG9hZGVkT2JqZWN0ID0gbG9hZCgpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4uZmFsbGJhY2ssIC4uLihtYXliZUxvYWRlZE9iamVjdCA/PyB7fSkgfTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iXSwibmFtZXMiOlsicmVnZXgiLCJUcmFjayIsIkxvY2FsUGFydGljaXBhbnQiLCJTdWJqZWN0IiwibWFwIiwic3RhcnRXaXRoIiwiUGFydGljaXBhbnRFdmVudCIsIlJvb21FdmVudCIsIk9ic2VydmFibGUiLCJwYXJ0aWNpcGFudCIsIl9hIiwicm9vbSIsImtpbmQiLCJfYiIsInNvdXJjZSIsImxvY2FsUGFydGljaXBhbnQiLCJCZWhhdmlvclN1YmplY3QiLCJmaWx0ZXIiLCJjb25jYXQiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-core@0.11.9_livekit-client@2.5.9_tslib@2.7.0/node_modules/@livekit/components-core/dist/index.mjs\n");

/***/ })

};
;